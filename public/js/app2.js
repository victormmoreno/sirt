function detallesIdeasDelEntrenamiento(e){$.ajax({dataType:"json",type:"get",url:"entrenamientos/"+e,data:{identrenamiento:e}}).done(function(e){$("#ideasEntrenamiento").empty(),null!=e&&($("#fechasEntrenamiento").empty(),$("#fechasEntrenamiento").append("<span class='cyan-text text-darken-3'>Fecha del taller de fortalecimiento: </span>"+e[0].fecha_sesion1+"<br>"),$.each(e,function(e,a){$("#ideasEntrenamiento").append("<tr><td>"+a.codigo_idea+" - "+a.nombre_proyecto+"</td><td>"+a.confirmacion+"</td><td>"+a.asistencia1+"</td></tr>")}),$("#modalIdeasEntrenamiento").openModal())})}function consultarEmpresaTecnoparque(){let e=$("#txtnit").val();e.length<9||e.length>13?Swal.fire({title:"Advertencia!",text:"El nit de la empresa debe tener entre 9 y 13 dígitos!",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}):""==e?Swal.fire({title:"Advertencia!",text:"Digite el nit de la empresa!",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}):$.ajax({dataType:"json",type:"get",url:"/empresa/ajaxDetallesDeUnaEmpresa/"+e+"/nit",success:function(a){if(null==a.empresa)divEmpresaRegistrada.hide(),divRegistrarEmpresa.show(),$("#txtnit_empresa").val(e),$("label[for='txtnit_empresa']").addClass("active");else{let e;asignarValoresFRMIdeas(a),divEmpresaRegistrada.show(),divRegistrarEmpresa.hide(),reiniciarSede(),e=mostrarSedesEmpresa(a),$("#sedesEmpresaFormIdea").append(e)}},error:function(e,a,t){alert("Error: "+t)}})}function reiniciarSede(){$("#sedesEmpresaFormIdea").empty(),$("#txtsede_id").val(""),$("#txtnombre_sede_disabled").val("Primero debes seleccionar una sede")}function mostrarSedesEmpresa(e){let a="";return e.empresa.sedes.forEach(e=>{a+='<li class="collection-item">\n      '+e.nombre_sede+" - "+e.direccion+" "+e.ciudad.nombre+" ("+e.ciudad.departamento.nombre+')\n      <a href="#!" class="secondary-content" onclick="asociarSedeAIdeaProyecto('+e.id+')">Asociar esta sede de la empresa a la idea de proyecto</a></div>\n    </li>'}),a}function asociarSedeAIdeaProyecto(e){$.ajax({dataType:"json",type:"get",url:"/empresa/ajaxDetalleDeUnaSede/"+e,success:function(e){$("#txtsede_id").val(e.sede.id),$("#txtnombre_sede_disabled").val(e.sede.nombre_sede+" - "+e.sede.direccion+" "+e.sede.ciudad.nombre+" ("+e.sede.ciudad.departamento.nombre+")"),Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"La sede "+e.sede.nombre_sede+" se asoció a la idea de proyecto!"})},error:function(e,a,t){alert("Error: "+t)}})}function modalOpcionesFormulario(e){e.preventDefault(),Swal.fire({title:"Guardar información",html:'¿Qué desea hacer?<br><button type="button" role="button" tabindex="0" class="btnModalIdeaGuardar swal2-guardar-custom">Guardar</button><button type="button" role="button" tabindex="0" class="btnModalIdeaPostular swal2-postular-custom">Postular</button><button type="button" role="button" tabindex="0" class="btnModalIdeaCancelar swal2-cancelar-custom">Cancelar</button>',showCancelButton:!1,showConfirmButton:!1,type:"warning"})}function modalOpcionesFormularioModificar(e){e.preventDefault(),Swal.fire({title:"Modificar información",html:'¿Qué desea hacer?<br><button type="button" role="button" tabindex="0" class="btnModalIdeaModificar swal2-guardar-custom">Modificar</button><button type="button" role="button" tabindex="0" class="btnModalIdeaPostularModificar swal2-postular-custom">Postular</button><button type="button" role="button" tabindex="0" class="btnModalIdeaCancelar swal2-cancelar-custom">Cancelar</button>',showCancelButton:!1,showConfirmButton:!1,type:"warning"})}function enviarIdeaRegistro(e,a){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=null,o=null;"create"==a?(t=$("#frmIdea_Inicio"),o=new FormData($("#frmIdea_Inicio")[0])):(t=$("#frmIdea_Update"),o=new FormData($("#frmIdea_Update")[0]));var n=t.attr("action");ajaxSendFormIdea(t,o,n)}function asignarValoresFRMIdeas(e){$("#txtnombre_empresa_det").val(e.empresa.nombre),$("label[for='txtnombre_empresa_det']").addClass("active"),$("#txttipo_empresa_det").val(e.empresa.tipoempresa.nombre),$("label[for='txttipo_empresa_det']").addClass("active"),$("#txttamanho_empresa_det").val(e.empresa.tamanhoempresa.nombre),$("label[for='txttamanho_empresa_det']").addClass("active"),$("#txtsector_empresa_det").val(e.empresa.sector.nombre),$("label[for='txtsector_empresa_det']").addClass("active"),$("#txtnit_empresa").val(e.empresa.nit)}function ajaxSendFormIdea(e,a,t){$.ajax({type:e.attr("method"),url:t,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),mensajesIdeaForm(e)},error:function(e,a,t){alert("Error: "+t)}})}function pintarMensajeIdeaForm(e,a,t){Swal.fire({title:e,html:a,type:t,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function mensajesIdeaForm(e){let a="error",t="error",o="error";a=e.title,t=e.msg,o=e.type,"error_form"!=e.state&&pintarMensajeIdeaForm(a,t,o),"registro"==e.state&&setTimeout(function(){window.location.href=e.url},5e3),"update"==e.state&&setTimeout(function(){window.location.href=e.url},5e3)}function showInput_ProductoParecido(){$("#txtproducto_parecido").is(":checked")?divProductoParecido.show():divProductoParecido.hide()}function showInput_Reemplaza(){$("#txtreemplaza").is(":checked")?divReemplaza.show():divReemplaza.hide()}function showInput_Packing(){$("#txtpacking").is(":checked")?divPacking.show():divPacking.hide()}function showInput_RequisitosLegales(){$("#txtrequisitos_legales").is(":checked")?divRequisitosLegales.show():divRequisitosLegales.hide()}function showInput_BuscarEmpresa(){$("#txtidea_empresa").is(":checked")?divBuscarEmpresa.show():divBuscarEmpresa.hide()}function showInput_Certificaciones(){$("#txtrequiere_certificaciones").is(":checked")?divCertificaciones.show():divCertificaciones.hide()}function showInput_Recursos(){$("#txtrecursos_necesarios").is(":checked")?divRecursos.show():divRecursos.hide()}function showInput_Convocatoria(){$("#txtviene_convocatoria").is(":checked")?divConvocatoria.show():divConvocatoria.hide()}function showInput_AvalEmpresa(){$("#txtaval_empresa").is(":checked")?divAvalEmpresa.show():divAvalEmpresa.hide()}function consultarProyectosDeTalentos(){$("#tblProyectoDelTalento").dataTable().fnDestroy(),$("#tblProyectoDelTalento").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],lengthChange:!1,ajax:{url:"/proyecto/datatableProyectosDelTalento/",data:function(e){e.codigo_proyecto=$(".codigo_proyecto").val(),e.nombre=$(".nombre").val(),e.nombre_fase=$(".nombre_fase").val(),e.search=$('input[type="search"]').val()}},columns:[{width:"15%",data:"codigo_proyecto",name:"codigo_proyecto"},{data:"nombre_gestor",name:"nombre_gestor"},{data:"nombre",name:"nombre"},{data:"nombre_fase",name:"nombre_fase"},{width:"8%",data:"info",name:"info",orderable:!1},{width:"8%",data:"proceso",name:"proceso",orderable:!1}]})}function consultarIdeasDelTalento(){$("#tbl_IdeasDelTalento").dataTable().fnDestroy(),$("#tbl_IdeasDelTalento").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],lengthChange:!1,ajax:{url:"/idea/datatableIdeasDeTalentos/"},columns:[{width:"15%",data:"codigo_idea",name:"codigo_idea"},{width:"8%",data:"nodo",name:"nodo"},{data:"nombre_proyecto",name:"nombre_proyecto"},{data:"estado",name:"estado"},{width:"8%",data:"info",name:"info",orderable:!1},{width:"8%",data:"postular",name:"postular",orderable:!1},{width:"8%",data:"edit",name:"edit",orderable:!1}]})}function confirmacionPostulacion(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de postular esta idea de proyecto?",text:"Una vez que se postule la idea de proyecto, ya no se podrá cambiar los datos de esta.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&document.frmEnviarIdeaTalento.submit()})}function confirmacionDuplicacion(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de duplicar esta idea de proyecto?",text:"Esto se recomienda hacer en caso de que se quiera continuar con el proceso en tecnoparque.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&document.frmDuplicarIdea.submit()})}function confirmacionInhabilitar(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de inhabilitar esta idea de proyecto?",text:"Esto quiere decir que esta idea de proyecto no se le podrá realizar un proceso en tecnoparque.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&document.frmInhabilitarIdea.submit()})}function consultarIdeasEnviadasAlNodo(){$("#tbl_IdeasEnviadasDelNodo").dataTable().fnDestroy(),$("#tbl_IdeasEnviadasDelNodo").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],lengthChange:!1,ajax:{url:"/idea/datatableIdeasDeTalentos/"},columns:[{width:"15%",data:"codigo_idea",name:"codigo_idea"},{data:"nombre_proyecto",name:"nombre_proyecto"},{data:"nombre_talento",name:"nombre_talento"},{data:"estado",name:"estado"},{width:"8%",data:"info",name:"info",orderable:!1}]})}function consultarEntrenamientosPorNodo_Administrador(e){$("#entrenamientosPorNodo_tableAdministrador").dataTable().fnDestroy(),$("#entrenamientosPorNodo_tableAdministrador").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:"/entrenamientos/consultarEntrenamientosPorNodo/",type:"get",data:{filter_nodo:e.value}},columns:[{title:"Código del Entrenamiento",data:"codigo_entrenamiento",name:"codigo_entrenamiento"},{data:"fecha_sesion1",name:"fecha_sesion1"},{width:"8%",data:"details",name:"details",orderable:!1},{width:"8%",data:"evidencias",name:"evidencias",orderable:!1}]})}function noSeEncontraronResultados(){Swal.fire({title:"¿Desea inhabilitar elentrenamiento?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, inhabilitar"})}function inhabilitarEntrenamientoPorId(e,a){Swal.fire({title:"¿Desea inhabilitar el entrenamiento?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, inhabilitar"}).then(a=>{a.value&&Swal.fire({title:"¿Qué desea hacer?",text:"Seleccione lo que ocurrirá con las ideas de proyecto que están asociasdas al entrenamiento",type:"warning",footer:'<a onclick="Swal.close()" href="#">Cancelar</a>',confirmButtonText:'<a class="white-text" onclick="cambiarEstadoDeIdeasDeProyectoDeEntrenamiento('+e+', \'Inhabilitado\'); Swal.close()" href="#">Inhabilitar las ideas de proyecto</a>',cancelButtonColor:"#d33",showCancelButton:!0,cancelButtonText:'<a class="white-text" onclick="cambiarEstadoDeIdeasDeProyectoDeEntrenamiento('+e+', \'Inicio\'); Swal.close()" href="#">Regresar las ideas de proyecto al estado de Inicio</a>',focusConfirm:!1})})}function cambiarEstadoDeIdeasDeProyectoDeEntrenamiento(e,a){$.ajax({dataType:"json",type:"get",url:"/entrenamientos/inhabilitarEntrenamiento/"+e+"/"+a,success:function(e){console.log(e),"true"==e.update&&Swal.fire({title:"El entrenamiento se ha inhabilitado!",html:"Las ideas de proyecto del entrenamiento han cambiado su estado a: "+e.estado,type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok!"}),"1"==e.update&&Swal.fire({title:"No se puede inhabilitar el entrenamiento!",html:"Al parecer, las siguientes ideas de proyecto se encuentran registradas en un comité: </br> <b> "+e.ideas+"</b></br>Si deseas hacer esto, las ideas de proyecto asociadas al entrenamiento no pueden estar en proyecto ó CSIBT",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Entiendo!"})},error:function(e,a,t){alert("Error: "+t)}})}function ajaxSendFormEntrenamiento(e,a,t,o){$.ajax({type:e.attr("method"),url:t,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),mensajesEntrenamientoCreate(e)},error:function(e,a,t){alert("Error: "+t)}})}function mensajesEntrenamientoCreate(e){"error_form"!=e.state&&Swal.fire({title:e.title,html:e.msg,type:e.type,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"registro"==e.state&&setTimeout(function(){window.location.href=e.url},1500),"update"==e.state&&setTimeout(function(){window.location.href=e.url},1500)}function noRepeatIdeasTaller(e){let a=e,t=!0,o=document.getElementsByName("ideas_taller[]");for(x=0;x<o.length;x++)if(o[x].value==a){t=!1;break}return t}function getValorConfirmacion(){return $("#txtconfirmacion").is(":checked")?1:0}function getValorAsistencia(){return $("#txtasistencia").is(":checked")?1:0}function addIdeaToEntrenamiento(){let e=$("#txtidea_taller").val(),a=getValorConfirmacion(),t=getValorAsistencia();0==e?Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,type:"error",title:"Estás ingresando mal los datos"}):0==noRepeatIdeasTaller(e)?Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"La idea de proyecto ya se encuentra asociada al taller!"}):pintarIdeaEnLaTablaTaller(e,a,t)}function pintarIdeaEnLaTablaTaller(e,a,t){$.ajax({dataType:"json",type:"get",url:"/idea/detallesIdea/"+e}).done(function(e){let o=prepararFilaEnLaTablaDeIdeasTaller(e,a,t);$("#tblIdeasEntrenamientoForm").append(o),Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,type:"success",title:"La idea de proyecto se asoció con éxito al taller"}),reiniciarCamposTaller()})}function reiniciarCamposTaller(){$("#txtidea_taller").val("0"),$("#txtidea_taller").select2()}function prepararFilaEnLaTablaDeIdeasTaller(e,a,t){let o=e.detalles.id;return'<tr class="selected" id=ideaAsociadaTaller'+o+'><td><input type="hidden" name="ideas_taller[]" value="'+o+'">'+e.detalles.codigo_idea+" - "+e.detalles.nombre_proyecto+'</td><td><input type="hidden" name="confirmaciones[]" value="'+a+'">'+getYesOrNot(a)+'</td><td><input type="hidden" name="asistencias[]" value="'+t+'">'+getYesOrNot(t)+'</td><td><a class="waves-effect red lighten-3 btn" onclick="eliminarIdeaDelTaller('+o+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function eliminarIdeaDelTaller(e){$("#ideaAsociadaTaller"+e).remove()}function getYesOrNot(e){return 0==e?"No":"Si"}function enviarNotificacionResultadosCSIBT(e,a){$.ajax({type:"get",url:"/csibt/notificar_resultado/"+e+"/"+a,dataType:"json",processData:!1,success:function(e){"notifica"==e.state?notificacionExitosaDelResultado(e):notificacionFallidaDelResultado()},error:function(e,a,t){alert("Error: "+t)}})}function notificacionExitosaDelResultado(e){Swal.fire({title:"Notificación Exitosa!",text:"Se ha enviado un mensaje a la dirección: "+e.idea+" con los resultados del comité.",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function notificacionFallidaDelResultado(){Swal.fire({title:"Notificación Fallida!",text:"No se ha logrado enviar una mensaje con los resultados del comité al talento.",type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function confirmacionDuplicidad(e,a){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de duplicar esta idea de proyecto?",text:"Debes tener en cuenta que a partir de esta idea se va a registrar mas de un TRL.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&Swal.fire({title:"Verificación. ¿Está seguro(a) de duplicar esta idea de proyecto?",text:"Esta acción no se podrá revertir.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Continuar!"}).then(e=>{e.value&&(location.href=a)})})}function ajaxSendFormComiteAsignar(e,a,t,o){$.ajax({type:e.attr("method"),url:t,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),"create"==o&&mensajesComiteAsignarCreate(e)},error:function(e,a,t){alert("Error: "+t)}})}function mensajesComiteAsignarCreate(e){"registro"==e.state&&(Swal.fire({title:"Registro Exitoso",text:"La asignación de ideas de proyecto del comité ha sido registrada satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/csibt")},1e3)),"no_registro"==e.state&&Swal.fire({title:"La asignación de ideas de proyecto del comité no se ha registrado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function addIdeaComite(){let e=$("#txtideaproyecto").val(),a=$("#txthoraidea").val(),t=$("#txtdireccion").val();0==e||""==a||""==t?datosIncompletosAgendamiento():0==noRepeatIdeasAgendamiento(e)?ideaYaSeEncuentraAsociadaAgendamiento():pintarIdeaEnLaTabla(e,a,t)}function addGestorComite(){let e=$("#txtidgestor").val(),a=$("#txthorainiciogestor").val(),t=$("#txthorafingestor").val();0==e||""==a||""==t?datosIncompletosGestorAgendamiento():0==noRepeatGestoresAgendamiento(e)?gestorYaSeEncuentraAsociadoAgendamiento():pintarGestorEnLaTabla(e,a,t)}function eliminarIdeaDelAgendamiento(e){$("#ideaAsociadaAgendamiento"+e).remove()}function eliminarGestorDelAgendamiento(e){$("#gestorAsociadoAgendamiento"+e).remove()}function ajaxSendFormComiteAgendamiento(e,a,t,o){$.ajax({type:e.attr("method"),url:t,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),"create"==o?mensajesComiteAgendamientoCreate(e):mensajesComiteAgendamientoUpdate(e)},error:function(e,a,t){alert("Error: "+t)}})}function mensajesComiteAgendamientoCreate(e){"registro"==e.state&&(Swal.fire({title:"Registro Exitoso",text:"El comité ha sido registrado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/csibt")},1e3)),"no_registro"==e.state&&Swal.fire({title:"El comité no se ha registrado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function mensajesComiteAgendamientoUpdate(e){"update"==e.state&&(Swal.fire({title:"Modificación Exitosa",text:"El comité se ha modificado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/csibt")},1e3)),"no_update"==e.state&&Swal.fire({title:"El comité no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function pintarIdeaEnLaTabla(e,a,t){$.ajax({dataType:"json",type:"get",url:"/idea/detallesIdea/"+e}).done(function(e){let o=prepararFilaEnLaTablaDeIdeas(e,a,t);$("#tblIdeasComiteCreate").append(o),ideaSeAsocioAlAgendamiento(),reiniciarCamposAgendamiento()})}function pintarGestorEnLaTabla(e,a,t){$.ajax({dataType:"json",type:"get",url:"/usuario/consultarUserPorId/"+e}).done(function(e){let o=prepararFilaEnLaTablaDeGestores(e,a,t);$("#tblGestoresComiteCreate").append(o),gestorSeAsocioAlAgendamiento(),reiniciarCamposGestorAgendamiento()})}function prepararFilaEnLaTablaDeIdeas(e,a,t){let o=e.detalles.id;return'<tr class="selected" id=ideaAsociadaAgendamiento'+o+'><td><input type="hidden" name="ideas[]" value="'+o+'">'+e.detalles.nombre_proyecto+'</td><td><input type="hidden" name="horas[]" value="'+a+'">'+a+'</td><td><input type="hidden" name="direcciones[]" value="'+t+'">'+t+'</td><td><a class="waves-effect red lighten-3 btn" onclick="eliminarIdeaDelAgendamiento('+o+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function prepararFilaEnLaTablaDeGestores(e,a,t){let o=e.user.gestor.id;return'<tr class="selected" id=gestorAsociadoAgendamiento'+o+'><td><input type="hidden" name="gestores[]" value="'+o+'">'+e.user.documento+" - "+e.user.nombres+" "+e.user.apellidos+'</td><td><input type="hidden" name="horas_inicio[]" value="'+a+'">'+a+'</td><td><input type="hidden" name="horas_fin[]" value="'+t+'">'+t+'</td><td><a class="waves-effect red lighten-3 btn" onclick="eliminarGestorDelAgendamiento('+o+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function datosIncompletosAgendamiento(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,type:"error",title:"Estás ingresando mal los datos"})}function datosIncompletosGestorAgendamiento(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,type:"error",title:"Estás ingresando mal los datos del gestor"})}function ideaSeAsocioAlAgendamiento(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,type:"success",title:"La idea de proyecto se asoció con éxito al comité"})}function gestorSeAsocioAlAgendamiento(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,type:"success",title:"El gestor se asoció con éxito al comité"})}function ideaYaSeEncuentraAsociadaAgendamiento(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"La idea de proyecto ya se encuentra asociada al comité!"})}function gestorYaSeEncuentraAsociadoAgendamiento(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"El gestor ya se encuentra asociado en este comité!"})}function noRepeatIdeasAgendamiento(e){let a=e,t=!0,o=document.getElementsByName("ideas[]");for(x=0;x<o.length;x++)if(o[x].value==a){t=!1;break}return t}function noRepeatGestoresAgendamiento(e){let a=e,t=!0,o=document.getElementsByName("gestores[]");for(x=0;x<o.length;x++)if(o[x].value==a){t=!1;break}return t}function reiniciarCamposAgendamiento(){$("#txtideaproyecto").val("0"),$("#txtideaproyecto").select2(),$("#txthoraidea").val(""),$("#txtobservacionesidea").val(""),$("#txtdireccion").val(""),$("label[for='txtdireccion']").removeClass("active"),$("label[for='txthoraidea']").removeClass("active")}function reiniciarCamposGestorAgendamiento(){$("#txtidgestor").val("0"),$("#txtidgestor").select2(),$("#txthorainiciogestor").val(""),$("label[for='txthorainiciogestor']").removeClass("active"),$("#txthorafingestor").val(""),$("label[for='txthorafingestor']").removeClass("active")}function ajaxSendFormComiteRealizado(e,a,t,o){$.ajax({type:e.attr("method"),url:t,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),"create"==o&&mensajesComiteRealizadoCreate(e)},error:function(e,a,t){alert("Error: "+t)}})}function mensajesComiteRealizadoCreate(e){"registro"==e.state&&(Swal.fire({title:"Registro Exitoso",text:"La calificación del comité ha sido registrada satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/csibt")},1e3)),"no_registro"==e.state&&Swal.fire({title:"La calificación del comité no se ha registrado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function consultarCsibtPorNodo(){let e=$("#txtnodo").val();$("#comitesDelNodoAdministrador_table").dataTable().fnDestroy(),$("#comitesDelNodoAdministrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:!1,ajax:{url:"/csibt/"+e+"/consultarCsibtPorNodo",type:"get"},columns:[{data:"codigo",name:"codigo"},{data:"fechacomite",name:"fechacomite"},{data:"estadocomite",name:"estadocomite"},{data:"observaciones",name:"observaciones"},{data:"details",name:"details",orderable:!1}]})}$(document).ready(function(){$("#linea_administrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,ajax:{url:"lineas"},columns:[{data:"abreviatura",name:"abreviatura"},{data:"nombre",name:"nombre"},{data:"show",name:"show",orderable:!1},{data:"action",name:"action",orderable:!1}]})}),$(document).ready(function(){$("#linea_dinamizador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,ajax:{url:"lineas"},columns:[{data:"abreviatura",name:"abreviatura"},{data:"nombre",name:"nombre"},{data:"action",name:"action",orderable:!1}]})}),$(document).ready(function(){$("#nodos_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,lengthChange:!0,responsive:!0,bSort:!1,dom:"Bfrtip",buttons:[{extend:"csv",text:"exportar csv",exportOptions:{columns:":visible"}},{extend:"excel",exportOptions:{columns:":visible"}},{extend:"pdf",exportOptions:{columns:":visible"}}],ajax:{url:"/nodo"},columns:[{data:"centro",name:"centro"},{data:"nodos",name:"nodos"},{data:"direccion",name:"direccion"},{data:"ubicacion",name:"ubicacion"},{data:"detail",name:"detail",orderable:!1}]})}),$(document).ready(function(){$("#entrenamientosPorNodo_tableDinamizador").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:"/entrenamientos/consultarEntrenamientosPorNodo",type:"get"},columns:[{title:"Código del Entrenamiento",data:"codigo_entrenamiento",name:"codigo_entrenamiento"},{data:"fecha_sesion1",name:"fecha_sesion1"},{width:"8%",data:"details",name:"details",orderable:!1},{width:"8%",data:"evidencias",name:"evidencias",orderable:!1}]}),$("#entrenamientos_nodo_table_articulador").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:"/entrenamientos/consultarEntrenamientosPorNodo",type:"get",data:{nodo:null}},columns:[{title:"Código del Entrenamiento",data:"codigo_entrenamiento",name:"codigo_entrenamiento"},{data:"fecha_sesion1",name:"fecha_sesion1"},{width:"8%",data:"details",name:"details",orderable:!1},{width:"8%",data:"edit",name:"edit",orderable:!1},{width:"8%",data:"evidencias",name:"evidencias",orderable:!1}]})}),$(document).ready(function(){divProductoParecido=$("#productoParecido_content"),divReemplaza=$("#reemplaza_content"),divPacking=$("#packing_content"),divRequisitosLegales=$("#requisitosLegales_content"),divCertificaciones=$("#certificaciones_content"),divRecursos=$("#recursos_content"),divConvocatoria=$("#convocatoria_content"),divAvalEmpresa=$("#avalEmpresa_content"),divBuscarEmpresa=$("#buscarEmpresa_content"),divRegistrarEmpresa=$("#registrarEmpresa_content"),divEmpresaRegistrada=$("#consultarEmpresa_content"),divProductoParecido.hide(),divReemplaza.hide(),divPacking.hide(),divRequisitosLegales.hide(),divCertificaciones.hide(),divRecursos.hide(),divConvocatoria.hide(),divAvalEmpresa.hide(),divBuscarEmpresa.hide(),divRegistrarEmpresa.hide(),divEmpresaRegistrada.hide(),showInput_ProductoParecido(),showInput_Reemplaza(),showInput_Packing(),showInput_RequisitosLegales(),showInput_Certificaciones(),showInput_Recursos(),showInput_Convocatoria(),showInput_AvalEmpresa(),showInput_BuscarEmpresa()}),$(document).on("click",".btnModalIdeaCancelar",function(e){Swal.close()}),$(document).on("click",".btnModalIdeaGuardar",function(e){$("#txtopcionRegistro").val("guardar"),Swal.clickConfirm(),enviarIdeaRegistro(e,"create")}),$(document).on("click",".btnModalIdeaModificar",function(e){$("#txtopcionRegistro").val("guardar"),Swal.clickConfirm(),enviarIdeaRegistro(e,"update")}),$(document).on("click",".btnModalIdeaPostular",function(e){$("#txtopcionRegistro").val("postular"),Swal.clickConfirm(),enviarIdeaRegistro(e,"create")}),$(document).on("click",".btnModalIdeaPostularModificar",function(e){$("#txtopcionRegistro").val("postular"),Swal.clickConfirm(),enviarIdeaRegistro(e,"update")}),$(document).ready(function(){$("#entrenamientos_nodo_table").dataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,paging:!0,ajax:{url:"/entrenamientos",type:"get"},columns:[{title:"Código del Entrenamiento",data:"codigo_entrenamiento",name:"codigo_entrenamiento"},{data:"fecha_sesion1",name:"fecha_sesion1"},{data:"fecha_sesion2",name:"fecha_sesion2"},{data:"correos",name:"correos"},{data:"fotos",name:"fotos"},{data:"listado_asistencia",name:"listado_asistencia"},{width:"8%",data:"details",name:"details",orderable:!1},{width:"8%",data:"edit",name:"edit",orderable:!1},{width:"8%",data:"update_state",name:"update_state",orderable:!1},{width:"8%",data:"evidencias",name:"evidencias",orderable:!1}]}),$("a.toggle-vis").on("click",function(e){e.preventDefault();var a=table.column($(this).attr("data-column"));a.visible(!a.visible())})}),$(document).ready(function(){$("#txtfecha_sesion1").bootstrapMaterialDatePicker({time:!1,date:!0,shortTime:!0,format:"YYYY-MM-DD",language:"es",weekStart:1,cancelText:"Cancelar",okText:"Guardar"}).on("change",function(e,a){$("#txtsegundasesion").bootstrapMaterialDatePicker("setMinDate",a)})}),$(document).on("submit","form#formEntrenamientosCreate",function(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de guardar esta información?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, guardar"}).then(a=>{if(a.value){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),o=new FormData($(this)[0]),n=t.attr("action");ajaxSendFormEntrenamiento(t,o,n,"create")}})}),$(document).on("submit","form#formComiteAsignarCreate",function(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de guardar esta información?",text:"No podrás revertir estos cambios!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, guardar"}).then(a=>{if(a.value){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),o=new FormData($(this)[0]),n=t.attr("action");ajaxSendFormComiteAsignar(t,o,n,"create")}})}),$(document).ready(function(){$(".dataTables_length select").addClass("browser-default"),$("#comitesDelNodo_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:!1,ajax:{url:"/csibt",type:"get"},columns:[{data:"codigo",name:"codigo"},{data:"fechacomite",name:"fechacomite"},{data:"estadocomite",name:"estadocomite"},{data:"observaciones",name:"observaciones"},{data:"details",name:"details",orderable:!1}],initComplete:function(){this.api().columns().every(function(){var e=this,a=document.createElement("input");$(a).appendTo($(e.footer()).empty()).on("change",function(){e.search($(this).val(),!1,!1,!0).draw()})})}})}),csibt={consultarComitesPorNodo:function(e){$.ajax({dataType:"json",type:"get",url:"/csibt/"+e}).done(function(e){console.log(e),$("#ideasProyectoDeUnComite").empty(),null!=e&&($("#fechaComiteModal").empty(),$("#fechaComiteModal").append("<span class='cyan-text text-darken-3'>Fecha del Comité: </span>"+e.ideasDelComite[0].fechacomite),$.each(e.ideasDelComite,function(e,a){let t='<a class="btn cyan m-b-xs" onclick="csibt.consultarIdeaProyectoAsociadaAlEntrenamiento('+a.id+')"><i class="material-icons">library_books</i></a>',o='<a target="_blank" href="/idea/'+a.id+'/edit" class="waves-effect waves-light btn btn-info m-b-xs"><i class="material-icons">edit</i></a>';$("#ideasProyectoDeUnComite").append("<tr><td>"+a.nombre_proyecto+"</td><td>"+a.hora+"</td><td>"+a.asistencia+"</td><td>"+a.observaciones+"</td><td>"+a.admitido+"</td><td>"+o+"</td><td>"+t+"</td></tr>")}),$("#modalIdeasComite").openModal())})},consultarIdeaProyectoAsociadaAlEntrenamiento:function(e){$.ajax({dataType:"json",type:"get",url:"/idea/detallesIdea/"+e}).done(function(e){$("#titulo").empty(),$("#detalle_idea").empty(),null==e?swal("Ups!!","Ha ocurrido un error","warning"):($("#titulo").append("<span class='cyan-text text-darken-3'>Nombre de Proyecto: </span>"+e.detalles.nombre_proyecto),$("#detalle_idea").append('<div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">¿Aprendiz SENA?: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.aprendiz_sena+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">¿En qué estado se encuentra la propuesta?: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.pregunta1String+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">¿Cómo está conformado el equipo de trabajo?: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.pregunta2String+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Descripcion: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.descripcion+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Objetivo: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.objetivo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Alcance: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.alcance+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">¿La idea viene de una convocatoria? </span></div><div class="col s12 m6 l6"><span class="black-text">'+vieneConvocatoria(e.detalles.viene_convocatoria)+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nombre de Convocatoria: </span></div><div class="col s12 m6 l6"><span class="black-text">'+nombreConvocatoria(e.detalles.viene_convocatoria,e.detalles.convocatoria)+"</span></div></div>"),$("#ideaProyecto").openModal())})}},$("#txthoraidea").bootstrapMaterialDatePicker({time:!0,date:!1,shortTime:!0,format:"HH:mm",language:"es",weekStart:1,cancelText:"Cancelar",okText:"Guardar"}),$("#txthorafingestor").bootstrapMaterialDatePicker({time:!0,date:!1,shortTime:!0,format:"HH:mm",language:"es",weekStart:1,cancelText:"Cancelar",okText:"Guardar"}),$("#txthorainiciogestor").bootstrapMaterialDatePicker({time:!0,date:!1,shortTime:!0,format:"HH:mm",language:"es",weekStart:1,cancelText:"Cancelar",okText:"Guardar"}),$("#txthorafingestor").bootstrapMaterialDatePicker({time:!0,date:!1,shortTime:!0,format:"HH:mm",language:"es",weekStart:1,cancelText:"Cancelar",okText:"Guardar"}),$(document).on("submit","form#formComiteAgendamientoCreate",function(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de guardar esta información?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, guardar"}).then(a=>{if(a.value){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),o=new FormData($(this)[0]),n=t.attr("action");ajaxSendFormComiteAgendamiento(t,o,n,"create")}})}),$(document).on("submit","form#formComiteAgendamientoUpdate",function(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de guardar esta información?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, guardar"}).then(a=>{if(a.value){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),o=new FormData($(this)[0]),n=t.attr("action");ajaxSendFormComiteAgendamiento(t,o,n,"update")}})}),$(document).on("submit","form#formComiteRealizadoCreate",function(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de guardar esta información?",text:"Debes tener en cuenta mientras el dinamizador no asigne las ideas de proyectos a los gestores puedes cambiar esta información",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, guardar"}).then(a=>{if(a.value){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),o=new FormData($(this)[0]),n=t.attr("action");ajaxSendFormComiteRealizado(t,o,n,"create")}})}),$(document).ready(function(){$("#comitesDelNodoGestor_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:!1,ajax:{url:"/csibt",type:"get"},columns:[{data:"codigo",name:"codigo"},{data:"fechacomite",name:"fechacomite"},{data:"estadocomite",name:"estadocomite"},{data:"observaciones",name:"observaciones"},{data:"details",name:"details",orderable:!1}],initComplete:function(){this.api().columns().every(function(){var e=this,a=document.createElement("input");$(a).appendTo($(e.footer()).empty()).on("change",function(){e.search($(this).val(),!1,!1,!0).draw()})})}})}),$(document).ready(function(){$("#empresasDeTecnoparque_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,ajax:{url:"/empresa/datatableEmpresasDeTecnoparque",type:"get"},columns:[{data:"nit",name:"nit"},{data:"nombre_empresa",name:"nombre_empresa"},{data:"sector_empresa",name:"sector_empresa"},{data:"details",name:"details",orderable:!1}]})}),$(document).on("submit","form#formRegisterCompany",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");$.ajax({type:a.attr("method"),url:o,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),printErroresFormulario(e),"error"==e.state&&0==e.url&&Swal.fire({title:"La empresa no se ha registrado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"success"==e.state&&0!=e.url&&(Swal.fire({title:"Registro Exitoso",text:e.message,type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.url},1e3))}})}),$(document).on("submit","form#formEditCompany",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");$.ajax({type:a.attr("method"),url:o,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),printErroresFormulario(e),"error_form"!=e.state&&Swal.fire({title:e.title,html:e.msg,type:e.type,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"update"==e.state&&setTimeout(function(){window.location.href=e.url},1500)}})}),$(document).on("submit","form#formEditCompanyHq",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");$.ajax({type:a.attr("method"),url:o,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),printErroresFormulario(e),"error_form"!=e.state&&Swal.fire({title:e.title,html:e.msg,type:e.type,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"update"==e.state&&setTimeout(function(){window.location.href=e.url},1500)}})}),$(document).on("submit","form#formAddCompanyHq",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");$.ajax({type:a.attr("method"),url:o,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),printErroresFormulario(e),"error_form"!=e.state&&Swal.fire({title:e.title,html:e.msg,type:e.type,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"store"==e.state&&setTimeout(function(){window.location.href=e.url},1500)}})}),$(document).on("submit","form#formEditResponsable",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");$.ajax({type:a.attr("method"),url:o,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),printErroresFormulario(e),"error_form"!=e.state&&Swal.fire({title:e.title,html:e.msg,type:e.type,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"update"==e.state&&setTimeout(function(){window.location.href=e.url},1500)}})}),$(document).on("submit","form#formSearchEmpresas",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault(),$("#empresas_encontradas").empty();let a=$("#txtnit_search").val();if(new RegExp("^[0-9]{9,13}$").test(a)){var t=$(this),o=new FormData($(this)[0]),n=t.attr("action");$.ajax({type:t.attr("method"),url:n,data:o,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){0==e.empresas.length?$("#empresas_encontradas").append('\n                        <div class="row">\n                            <ul class="collection with-header">\n                                <li class="collection-header"><h5>No se encontraron empresas</h5></li>\n                            </ul>\n                        </div>\n                    '):"search"==e.state&&($("#empresas_encontradas").append('<div class="row">'),$.each(e.empresas,function(a,t){let o=e.urls[a];$("#empresas_encontradas").append('\n                                <ul class="collection">\n                                    <li class="collection-item"><h5>'+t.nit+" - "+t.nombre+'</h5></li>\n                                    <li class="collection-item"><a href='+o+">Ver detalles</a></li>\n                                </ul>\n                            ")}),$("#empresas_encontradas").append("</div>")),$('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1)}})}else Swal.fire("Estás ingresando mal los datos!","Por favor ingrese un nit válido entre 6 y 13 dígitos (no se permiten puntos ni código de verificación)","error"),$('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1)}),$(document).ready(function(){$("#grupoDeInvestigacionTecnoparque_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:"/grupo/datatableGruposInvestigacionDeTecnoparque",type:"get"},columns:[{data:"codigo_grupo",name:"codigo_grupo"},{data:"nombre",name:"nombre"},{data:"ciudad",name:"ciudad"},{data:"tipo_grupo",name:"tipo_grupo"},{data:"institucion",name:"institucion"},{data:"clasificacioncolciencias",name:"clasificacioncolciencias"},{data:"details",name:"details",orderable:!1},{data:"contacts",name:"contacts",orderable:!1},{data:"edit",name:"edit",orderable:!1}]})}),$("#grupoDeInvestigacionTecnoparque_tableNoGestor").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:"/grupo/datatableGruposInvestigacionDeTecnoparque",type:"get"},columns:[{data:"codigo_grupo",name:"codigo_grupo"},{data:"nombre",name:"nombre"},{data:"ciudad",name:"ciudad"},{data:"tipo_grupo",name:"tipo_grupo"},{data:"institucion",name:"institucion"},{data:"clasificacioncolciencias",name:"clasificacioncolciencias"},{data:"details",name:"details",orderable:!1}]});var grupoInvestigacionIndex={consultarDetallesDeUnGrupoInvestigacion:function(e){$.ajax({dataType:"json",type:"get",url:"/grupo/ajaxDetallesDeUnGrupoInvestigacion/"+e}).done(function(e){if($("#modalDetalleDeUnGrupoDeInvestigacion_titulo").empty(),$("#modalDetalleDeUnGrupoDeInvestigacion_detalle_empresa").empty(),null==e)swal("Ups!!","Ha ocurrido un error","warning");else{let a="Interno";0==e.detalles.tipogrupo&&(a="Externo"),$("#modalDetalleDeUnGrupoDeInvestigacion_titulo").append("<span class='cyan-text text-darken-3'>Datos del Grupo de Investigación </span><br>"),$("#modalDetalleDeUnGrupoDeInvestigacion_detalle_empresa").append('<div class=\'row\'><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Código del Grupo de Investigacion: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.codigo_grupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nombre del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.entidad.nombre+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Correo del Grupo de Investigacion: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.entidad.email_entidad+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Ciudad del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.entidad.ciudad.nombre+" - "+e.detalles.entidad.ciudad.departamento.nombre+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Tipo de Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Institución que avala el grupo de investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.institucion+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Clasificación Colciencias del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.clasificacioncolciencias.nombre+"</span></div></div>"),$("#detalleDeUnGrupoDeInvestigacion").openModal()}})}};$(document).on("submit","form#formSearchUser",function(e){e.preventDefault(),$("#response-alert").empty();let a=$("#txttype_search").val(),t=$("#txtsearch_user").val(),o=new RegExp("^[0-9]{6,11}$");if(""==a)Swal.fire("Error","Por favor selecciona una opción","error");else if(1!=a||null!=t&&""!=t&&o.test(t))if(2!=a||null!=t&&""!=t&&/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t)){var n=$(this);let e=new FormData($(this)[0]);var i=n.attr("action");$.ajax({type:n.attr("method"),url:i,data:e,dataType:"json",cache:!1,dataType:"json",contentType:!1,processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),$("#response-alert").empty(),e.fail&&Swal.fire({title:"Registro Erróneo",html:"Estas ingresando mal los datos. "+errores,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),202==e.status?1==a?$("#response-alert").append('\n                            <div class="mailbox-list">\n                                <ul>\n                                    <li>\n                                        <a class="mail-active">\n                                            <h4 class="center-align">no se encontraron resultados</h4>\n                                            <a class="grey-text text-darken-3 green accent-1 center-align" href="'+e.url+'">Registrar nuevo usuario</a>\n                                        </a>\n                                    </li>\n                                </ul>\n                            </div>\n                        '):$("#response-alert").append('\n                            <div class="mailbox-list">\n                                <ul>\n                                    <li>\n                                        <a class="mail-active">\n                                            <h4 class="center-align">no se encontraron resultados</h4>\n                                            <a target="_blank" class="grey-text text-darken-3 green accent-1 center-align" href="'+e.url+'">Registrar nuevo usuario</a>\n                                        </a>\n                                    </li>\n                                </ul>\n                            </div>\n                        '):200==e.status&&$("#response-alert").append('\n                    <div class="mailbox-list">\n                        <ul>\n                            <li >\n                                <a href="'+e.url+'" class="mail-active">\n\n                                    <h5 class="mail-author">'+e.user.documento+" - "+e.user.nombres+" "+e.user.apellidos+'</h5>\n                                    <h4 class="mail-title">'+e.roles+'</h4>\n                                    <p class="hide-on-small-and-down mail-text">Miembro desde '+userSearch.userCreated(e.user.created_at)+'</p>\n                                    <div class="position-top-right p f-12 mail-date"> Acceso al sistema: '+userSearch.state(e.user.estado)+"</div>\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                    ")}})}else Swal.fire("Error","Por favor ingrese un correo electrónico válido","error");else Swal.fire("Error","Por favor ingrese un número de documento válido","error")});var userSearch={state:function(e){return e?"Si":"No"},userCreated:function(e){return null==e?"no registra":moment(e).format("LL")},changetextLabel:function(){let e=$("#txttype_search").val();$("#txtsearch_user").val(""),1==e?$("label[for='txtsearch_user']").text("Número de documento"):2==e&&$("label[for='txtsearch_user']").text("Correo Electrónico")}},user={getCiudadExpedicion:function(){let e;e=$("#txtdepartamentoexpedicion").val(),$.ajax({dataType:"json",type:"get",url:"/usuario/getciudad/"+e}).done(function(e){$("#txtciudadexpedicion").empty(),$.each(e.ciudades,function(e,a){$("#txtciudadexpedicion").append('<option  value="'+a.id+'">'+a.nombre+"</option>")}),$("#txtciudadexpedicion").material_select()})},getOtraEsp:function(e){let a=$(e).val();$("#txteps option:selected").text();42==a?$(".otraeps").removeAttr("style"):$(".otraeps").attr("style","display:none")},getCiudad:function(){let e;e=$("#txtdepartamento").val(),$.ajax({dataType:"json",type:"get",url:"/usuario/getciudad/"+e}).done(function(e){$("#txtciudad").empty(),$("#txtciudad").append('<option value="">Seleccione la Ciudad</option>'),$.each(e.ciudades,function(e,a){$("#txtciudad").append('<option  value="'+a.id+'">'+a.nombre+"</option>")}),$("#txtciudad").material_select()})},getGradoDiscapacidad(e){1==$(e).val()?$(".gradodiscapacidad").removeAttr("style"):$(".gradodiscapacidad").attr("style","display:none")}};$(document).ready(function(){$("#txtocupaciones").select2({language:"es",isMultiple:!0}),estudios.getOtraOcupacion()});var estudios={getOtraOcupacion:function(e){$("#otraocupacion").hide();$(e).val();let a=$("#txtocupaciones option:selected").text().match(/[A-Z][a-z]+/g);$("#otraocupacion").hide(),null!=a&&a.includes("Otra")&&$("#otraocupacion").show()}};$(document).ready(function(){tipoTalento.getSelectTipoTalento()});var tipoTalento={getSelectTipoTalento:function(e){let a=$(e).val();$("#txttipotalento option:selected").text();1==a||2==a?tipoTalento.showAprendizSena():3==a?tipoTalento.showEgresadoSena():4==a?tipoTalento.showInstructorSena():5==a?tipoTalento.showFuncionarioSena():6==a?tipoTalento.showPropietarioEmpresa():7==a?tipoTalento.showEmprendedor():8==a?tipoTalento.showUniversitario():9==a?tipoTalento.showFuncionarioEmpresa():tipoTalento.ShowSelectTipoTalento()},showAprendizSena:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideEgresadoSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hidePropietarioEmpresa(),tipoTalento.hideEmprendedor(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),$(".aprendizSena").css("display","block"),$(".aprendizSena").show()},showEgresadoSena:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hidePropietarioEmpresa(),tipoTalento.hideEmprendedor(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),$(".egresadoSena").show()},showInstructorSena:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hidePropietarioEmpresa(),tipoTalento.hideEmprendedor(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),$(".instructorSena").css("display","block")},showFuncionarioSena:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hidePropietarioEmpresa(),tipoTalento.hideEmprendedor(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),$(".funcionarioSena").css("display","block")},showPropietarioEmpresa:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),$(".otherUser").empty(),$(".otherUser").append('<div class="valign-wrapper" >\n            <h5> Seleccionaste Propietario empresa</h5>\n        </div>')},showEmprendedor:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),$(".otherUser").empty(),$(".otherUser").append('<div class="valign-wrapper" >\n            <h5> Seleccionaste Emprendedor</h5>\n        </div>')},showUniversitario:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hidePropietarioEmpresa(),tipoTalento.hideEmprendedor(),tipoTalento.hideFuncionarioEmpresa(),$(".universitario").css("display","block")},showFuncionarioEmpresa:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hidePropietarioEmpresa(),tipoTalento.hideUniversitario(),tipoTalento.hideEmprendedor(),$(".funcionarioEmpresa").css("display","block")},hideAprendizSena:function(){$(".aprendizSena").hide()},hideEgresadoSena:function(){$(".egresadoSena").hide()},hideInstructorSena:function(){$(".instructorSena").css("display","none")},hideFuncionarioSena:function(){$(".funcionarioSena").css("display","none")},hideSelectTipoTalento:function(){$(".selecttipotalento").css("display","none")},hidePropietarioEmpresa:function(){$(".otherUser").css("display","none")},hideUniversitario:function(){$(".universitario").css("display","none")},hideFuncionarioEmpresa:function(){$(".funcionarioEmpresa").css("display","none")},hideEmprendedor:function(){$(".otherUser").css("display","none")},ShowSelectTipoTalento:function(){tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideEmprendedor(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),tipoTalento.hideFuncionarioSena(),tipoTalento.hideInstructorSena(),tipoTalento.hidePropietarioEmpresa(),$(".selecttipotalento").css("display","block")},getCentroFormacionAprendiz:function(){let e=$("#txtregional_aprendiz").val();$.ajax({dataType:"json",type:"get",url:"/centro-formacion/getcentrosregional/"+e}).done(function(e){$("#txtcentroformacion_aprendiz").empty(),$("#txtcentroformacion_aprendiz").append('<option value="">Seleccione el centro de formación</option>'),$.each(e.centros,function(e,a){$("#txtcentroformacion_aprendiz").append('<option  value="'+e+'">'+a+"</option>"),$("#txtcentroformacion_aprendiz").material_select()})})},getCentroFormacionEgresadoSena:function(){let e=$("#txtregional_egresado").val();$.ajax({dataType:"json",type:"get",url:"/centro-formacion/getcentrosregional/"+e}).done(function(e){$("#txtcentroformacion_egresado").empty(),$("#txtcentroformacion_egresado").append('<option value="">Seleccione el centro de formación</option>'),$.each(e.centros,function(e,a){$("#txtcentroformacion_egresado").append('<option  value="'+e+'">'+a+"</option>"),$("#txtcentroformacion_egresado").material_select()})})},getCentroFormacionFuncionarioSena:function(){let e=$("#txtregional_funcionarioSena").val();$.ajax({dataType:"json",type:"get",url:"/centro-formacion/getcentrosregional/"+e}).done(function(e){$("#txtcentroformacion_funcionarioSena").empty(),$("#txtcentroformacion_funcionarioSena").append('<option value="">Seleccione el centro de formación</option>'),$.each(e.centros,function(e,a){$("#txtcentroformacion_funcionarioSena").append('<option  value="'+e+'">'+a+"</option>"),$("#txtcentroformacion_funcionarioSena").material_select()})})},getCentroFormacionInstructorSena:function(){let e=$("#txtregional_instructorSena").val();$.ajax({dataType:"json",type:"get",url:"/centro-formacion/getcentrosregional/"+e}).done(function(e){$("#txtcentroformacion_instructorSena").empty(),$("#txtcentroformacion_instructorSena").append('<option value="">Seleccione el centro de formación</option>'),$.each(e.centros,function(e,a){$("#txtcentroformacion_instructorSena").append('<option  value="'+e+'">'+a+"</option>"),$("#txtcentroformacion_instructorSena").material_select()})})}};$(document).on("submit","form#formRegisterUser",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");$.ajax({type:a.attr("method"),url:o,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){if($('button[type="submit"]').prop("disabled",!1),$(".error").hide(),e.fail){for(control in e.errors)$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();createUser.printErroresFormulario(e)}"error"==e.state&&0==e.url&&Swal.fire({title:"El Usuario no se ha registrado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"success"==e.state&&0!=e.url&&(Swal.fire({title:"Registro Exitoso",text:"El Usuario "+e.user.nombres+" "+e.user.apellidos+"  ha sido creado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok",footer:'<p class="red-text">Hemos enviado un correo electrónico al  usuario '+e.user.nombres+" "+e.user.apellidos+" con las credenciales de ingreso a la plataforma.</p>"}),setTimeout(function(){window.location.href=e.url},1e3))}})});var createUser={printErroresFormulario:function(e){if("error_form"==e.state){let a="";for(control in e.errors)a+=" </br><b> - "+e.errors[control]+" </b> ",$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();Swal.fire({title:"Advertencia!",html:"Estas ingresando mal los datos."+a,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}}};$(document).on("submit","form#formEditUser",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");$.ajax({type:a.attr("method"),url:o,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){if($('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),e.fail){for(control in e.errors)$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();EditUser.printErroresFormulario(e)}"error"==e.state&&(Swal.fire({title:"La cuenta del usuario no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.url},1e3)),"success"==e.state&&(Swal.fire({title:"Modifciación Exitosa",text:"La cuenta del usuario ha sido modificada satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.url},1e3))}})});var EditUser={printErroresFormulario:function(e){if("error_form"==e.state){let a="";for(control in e.errors)a+=" </br><b> - "+e.errors[control]+" </b> ",$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();Swal.fire({title:"Advertencia!",html:"Estas ingresando mal los datos."+a,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}}};$(document).on("submit","form#FormConfirmUser",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");$.ajax({type:a.attr("method"),url:o,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){if($('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),e.fail){for(control in e.errors)$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();EditUser.printErroresFormulario(e)}"error"==e.state&&0==e.url&&Swal.fire({title:"El Usuario no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"success"==e.state&&0!=e.url&&(Swal.fire({title:"Modifciación Exitosa",text:"El Usuario "+e.user.nombres+" "+e.user.apellidos+"  ha sido modificado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.url},1e3))},error:function(e,a,t){alert("Error: "+t)}})});var changeNode={printErroresFormulario:function(e){if("error_form"==e.state){let a="";for(control in e.errors)a+=" </br><b> - "+e.errors[control]+" </b> ",$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();Swal.fire({title:"Advertencia!",html:"Estas ingresando mal los datos."+a,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}}};$(document).on("submit","form#FormChangeNodo",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");$.ajax({type:a.attr("method"),url:o,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){if($('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),e.fail){for(control in e.errors)$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();changeNode.printErroresFormulario(e)}"error"==e.state&&0==e.url&&Swal.fire({title:"El Usuario no se ha modificado, por favor inténtalo de nuevo",text:"Recuerde que si lo elimina no lo podrá recuperar.",type:"warning",text:e.message,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"ok",cancelButtonText:"Ver actividades sin finalzar"}).then(a=>{if(a.value);else if(a.dismiss===Swal.DismissReason.cancel){let a="";$.each(e.activities,function(e,t){a+="</br><b> "+e+" - "+t+" </b> "}),Swal.fire({title:"actividades sin finalzar",html:a,type:"info",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}}),"success"==e.state&&0!=e.url&&(Swal.fire({title:"Modifciación Exitosa",text:"El Usuario "+e.user.nombres+" "+e.user.apellidos+"  ha sido modificado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.url},1e3))},error:function(e,a,t){alert("Error: "+t)}})}),$(document).ready(function(){let e=$("#filter_rol").val(),a=$("#filter_nodo").val(),t=$("#filter_state").val(),o=$("#filter_year").val();$("#users_data_table").dataTable().fnDestroy(),""==a&&null==a||""==e&&null==e||""==t||""==o?""!=a&&null!=a&&null!=a||""!=e&&null!=e&&null!=e||""==t||""!=o&&null!=o&&null!=o?$("#users_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():UserIndex.fillDatatatablesUsers(a=null,e=null,t,o=null):UserIndex.fillDatatatablesUsers(a,e,t,o),$("#mytalento_data_table").dataTable().fnDestroy(),""==a&&null==a||""==e&&null==e||""==t||""==o?""!=a&&null!=a&&null!=a||""!=e&&null!=e&&null!=e||""==t||""!=o&&null!=o&&null!=o?$("#mytalento_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():UserIndex.fillDatatatablesTalentos(a=null,e=null,t,o=null):UserIndex.fillDatatatablesTalentos(a,e,t,o)});var UserIndex={showInputs(){"Talento"==$("#filter_rol").val()?($("#divyear").show(),$('#filter_year>option[value="all"]').attr("selected","selected")):($("#divyear").hide(),$('#filter_year>option[value="all"]').attr("selected","selected"))},fillDatatatablesUsers(e,a,t,o){$("#users_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,order:[[1,"desc"]],ajax:{url:"/usuario",type:"get",data:{filter_nodo:e,filter_role:a,filter_state:t,filter_year:o}},columns:[{data:"tipodocumento",name:"tipodocumento"},{data:"documento",name:"documento"},{data:"nombrecompleto",name:"nombrecompleto"},{data:"email",name:"email"},{data:"celular",name:"celular"},{data:"roles",name:"roles"},{data:"login",name:"login"},{data:"state",name:"state"},{data:"detail",name:"detail",orderable:!1}]})},fillDatatatablesTalentos(e,a,t,o){$("#mytalento_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,order:[[1,"desc"]],ajax:{url:"/usuario/mistalentos",type:"get",data:{filter_nodo:e,filter_role:a,filter_state:t,filter_year:o}},columns:[{data:"tipodocumento",name:"tipodocumento"},{data:"documento",name:"documento"},{data:"nombrecompleto",name:"nombrecompleto"},{data:"email",name:"email"},{data:"celular",name:"celular"},{data:"roles",name:"roles"},{data:"login",name:"login"},{data:"state",name:"state"},{data:"detail",name:"detail",orderable:!1}]})}};$("#filter_user").click(function(){let e=$("#filter_rol").val(),a=$("#filter_nodo").val(),t=$("#filter_state").val(),o=$("#filter_year").val();$("#users_data_table").dataTable().fnDestroy(),""==a&&null==a||""==e||""==t||""==o?""!=a&&null!=a&&null!=a||""==e||""==t||""==o?$("#users_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():UserIndex.fillDatatatablesUsers(a=null,e,t,o):UserIndex.fillDatatatablesUsers(a,e,t,o)}),$("#filter_talentos").click(function(){let e=$("#filter_rol").val(),a=$("#filter_nodo").val(),t=$("#filter_state").val(),o=$("#filter_year").val();$("#mytalento_data_table").dataTable().fnDestroy(),""==a&&null==a||""==e||""==t||""==o?""!=a&&null!=a&&null!=a||""==e||""==t||""==o?$("#mytalento_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():UserIndex.fillDatatatablesTalentos(a=null,e,t,o):UserIndex.fillDatatatablesTalentos(a,e,t,o)}),$("#download_users").click(function(){let e=$("#filter_rol").val();var a={filter_nodo:$("#filter_nodo").val(),filter_role:e,filter_state:$("#filter_state").val(),filter_year:$("#filter_year").val()},t="/usuario/export?"+$.param(a);window.location=t}),$(document).on("submit","form#formEditProfile",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");$.ajax({type:a.attr("method"),url:o,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){if($('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),e.fail){for(control in e.errors)$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();EditProfileUser.printErroresFormulario(e)}"error"==e.state&&(Swal.fire({title:"Tu perfil no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.url},1e3)),"success"==e.state&&(Swal.fire({title:"Modifciación Exitosa",text:"Tu perfil ha sido actualizado exitosamente.",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.url},1e3))}})});var EditProfileUser={printErroresFormulario:function(e){if("error_form"==e.state){let a="";for(control in e.errors)a+=" </br><b> - "+e.errors[control]+" </b> ",$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();Swal.fire({title:"Advertencia!",html:"Estas ingresando mal los datos."+a,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}}},roleUserSession={setRoleSession:function(e){$(e).val();let a=$("#change-role option:selected").val();$.ajax({dataType:"json",type:"POST",data:{role:a,_token:$('meta[name="csrf-token"]').attr("content")},url:"/cambiar-role"}).done(function(e){null!=e.role&&(location.href=e.url)})}};function consultarArticulacionesDelGestor(e){$("#articulacionesGestor_table").dataTable().fnDestroy(),$("#articulacionesGestor_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],lengthChange:!1,ajax:{url:"/articulacion/datatableArticulacionesDelGestor/0/"+e,data:function(e){e.codigo_articulacion=$("#codigo_articulacion_GestorTable").val(),e.gestor=$("#nombre_GestorAdministradorTable").val(),e.nombre=$("#nombre_GestorTable").val(),e.fase=$("#fase_GestorTable").val(),e.search=$('input[type="search"]').val()}},columns:[{data:"codigo_articulacion",name:"codigo_articulacion"},{data:"nombre",name:"nombre"},{data:"nombre_fase",name:"nombre_fase"},{width:"8%",data:"info",name:"info",orderable:!1},{data:"proceso",name:"proceso",orderable:!1}]})}function consultarGruposInvestigacion_FaseInicio_Articulaciones(){$("#gruposInvestigacion_articulacion_table").dataTable().fnDestroy(),$("#gruposInvestigacion_articulacion_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:"/grupo/datatableGruposInvestigacionDeTecnoparque",type:"get"},select:!0,columns:[{data:"codigo_grupo",name:"codigo_grupo"},{data:"nombre",name:"nombre"},{width:"20%",data:"add_articulacion",name:"add_articulacion",orderable:!1}]}),$("#gruposDeInvestigacion_ArticulacionInicio_modal").openModal()}function addGrupoArticulacion(e){$.ajax({dataType:"json",type:"get",url:"/grupo/ajaxDetallesDeUnGrupoInvestigacion/"+e}).done(function(e){$("#txtgrupoInvestigacion").val(e.detalles.codigo_grupo+" - "+e.detalles.entidad.nombre),$("label[for='txtgrupoInvestigacion']").addClass("active"),$("#txtgrupo_id").val(e.detalles.id),Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,type:"success",title:"El código del grupo de investigación con el que se realizará la articulación es: "+e.detalles.codigo_grupo}),$("#gruposDeInvestigacion_ArticulacionInicio_modal").closeModal()})}function consultarTalentosDeTecnoparque_Articulacion_FaseInicio_table(e,a){$(e).dataTable().fnDestroy(),$(e).DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:"/usuario/talento/getTalentosDeTecnoparque/",type:"get"},columns:[{data:"documento",name:"documento"},{data:"talento",name:"talento"},{data:a,name:a,orderable:!1}]})}function ajaxSendFormArticulacion(e,a,t,o){$.ajax({type:e.attr("method"),url:t,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),"create"==o?mensajesArticulacionCreate(e):mensajesArticulacionUpdate(e)},error:function(e,a,t){alert("Error: "+t)}})}function mensajesArticulacionCreate(e){"registro"==e.state&&(Swal.fire({title:"Registro Exitoso",text:"La articulación ha sido registrada satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/articulacion")},1e3)),"no_registro"==e.state&&Swal.fire({title:"La articulación no se ha registrado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function mensajesArticulacionUpdate(e){"update"==e.state&&(Swal.fire({title:"Modificación Exitosa",text:"La articulación ha sido modificada satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/articulacion")},1e3)),"no_update"==e.state&&Swal.fire({title:"La articulación no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function talentoYaSeEncuentraAsociado_Articulacion(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"El talento ya se encuentra asociado a la articulación!"})}function talentoSeAsocioALaArticulacion(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"El talento se ha asociado a la articulación!"})}function prepararFilaEnLaTablaDeTalentos_Articulacion(e){let a=e.talento.id;return'<tr class="selected" id=talentoAsociadoALaArticulacion'+a+'><td><input type="radio" class="with-gap" name="radioTalentoLider" id="radioButton'+a+'" value="'+a+'" /><label for ="radioButton'+a+'"></label></td><td><input type="hidden" name="talentos[]" value="'+a+'">'+e.talento.documento+" - "+e.talento.talento+'</td><td><a class="waves-effect red lighten-3 btn" onclick="eliminarTalentoDeArticulacion_FaseInicio('+a+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function pintarTalentoEnTabla_Fase_Inicio_Articulacion(e){$.ajax({dataType:"json",type:"get",url:"/usuario/talento/consultarTalentoPorId/"+e}).done(function(e){let a=prepararFilaEnLaTablaDeTalentos_Articulacion(e);$("#detalleTalentosDeUnaArticulacion_Create").append(a),talentoSeAsocioALaArticulacion()})}function noRepeat_Articulacion(e){let a=e,t=!0,o=document.getElementsByName("talentos[]");for(x=0;x<o.length;x++)if(o[x].value==a){t=!1;break}return t}function eliminarTalentoDeArticulacion_FaseInicio(e){$("#talentoAsociadoALaArticulacion"+e).remove()}function addTalentoArticulacion(e){0==noRepeat_Articulacion(e)?talentoYaSeEncuentraAsociado_Articulacion():pintarTalentoEnTabla_Fase_Inicio_Articulacion(e)}function ajaxSendFormArticulacion_FaseCierre(e,a,t){$.ajax({type:e.attr("method"),url:t,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),mensajesArticulacionCierre(e)},error:function(e,a,t){alert("Error: "+t)}})}function mensajesArticulacionCierre(e){"update"==e.state&&(Swal.fire({title:"Modificación Exitosa!",text:"La articulación ha sido modificado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/articulacion")},1e3)),"no_update"==e.state&&Swal.fire({title:"La articulación no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function preguntaReversarArticulacion(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de reversar esta articulación a la fase de inicio?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&document.frmReversarFaseArticulacion.submit()})}function verDetalleDeLaEntidadAsocidadALaArticulacion(e){$.ajax({dataType:"json",type:"get",url:"/articulacion/consultarEntidadDeLaArticulacion/"+e}).done(function(e){$("#detalleDeUnaArticulacion_titulo").empty(),$("#detalleArticulacion_body").empty(),null==e.detalles?Swal.fire("Ups!!","Ha ocurrido un error","error"):"Empresa"==e.articulacion.tipo_articulacion?($("#detalleDeUnaArticulacion_titulo").append("<span class='cyan-text text-darken-3'>Datos de la Empresa </span><br>"),$("#detalleArticulacion_body").append('<div class=\'row\'><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nit de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.nit+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nombre de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.nombre_empresa+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Dirección de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.direccion+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Ciudad de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.ciudad+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Email de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.email_entidad+"</span></div></div>"),$("#detalleArticulacion_modal").openModal()):"Grupo de Investigación"==e.articulacion.tipo_articulacion?($("#detalleDeUnaArticulacion_titulo").append("<span class='cyan-text text-darken-3'>Datos del Grupo de Investigación </span><br>"),$("#detalleArticulacion_body").append('<div class=\'row\'><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Código del Grupo de Investigacion: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.codigo_grupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nombre del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.nombre_grupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Correo del Grupo de Investigacion: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.correo_grupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Ciudad del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.ciudad+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Tipo de Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.tipogrupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Institución que avala el grupo de investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.institucion+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Clasificación Colciencias del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.nombre_clasificacion+"</span></div></div>"),$("#detalleArticulacion_modal").openModal()):($("#talentosDeUnaArticulacion_titulo").empty(),$("#talentosDeUnaArticulacion_table").empty(),$("#talentosDeUnaArticulacion_titulo").append("<span class='cyan-text text-darken-3'>Datos de los Talentos </span><br>"),$.each(e.detalles,function(e,a){let t="Autor";1==a.talento_lider&&(t="Talento Líder"),$("#talentosDeUnaArticulacion_table").append("<tr><td>"+t+"</td><td>"+a.talento+"</td></tr>")}),$("#talentosDeUnaArticulacion_modal").openModal())})}function eliminarArticulacionPorId_event(e,a){Swal.fire({title:"¿Desea eliminar la articulación?",text:"Al hacer esto, todo lo relacionado con esta articulación será eliminado de la base de datos, eso incluye usos de infraestructura y los archivos subidos al servidor!",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",cancelButtonText:"No",confirmButtonText:"Sí, eliminar!"}).then(a=>{a.value&&eliminarArticulacionPorId_moment(e)})}function eliminarArticulacionPorId_moment(e){$.ajax({dataType:"json",type:"get",url:"/articulacion/eliminarArticulacion/"+e,success:function(e){e.retorno?(Swal.fire("Eliminación Exitosa!","La articulación se ha eliminado completamente!","success"),location.href="/articulacion"):Swal.fire("Eliminación Errónea!","La articulación no se ha eliminado!","error")},error:function(e,a,t){alert("Error: "+t)}})}function consultarIntervencionesEmpresaDelGestor(e){$("#IntervencionGestor_table").dataTable().fnDestroy(),$("#IntervencionGestor_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:"/intervencion/datatableIntervencionEmpresaDelGestor/0/"+e,data:function(e){e.codigo_articulacion=$("#codigo_articulacion_GestorTable").val(),e.nombre=$("#nombre_GestorTable").val(),e.estado=$("#estado_GestorTable").val(),e.search=$('input[type="search"]').val()}},columns:[{data:"codigo_articulacion",name:"codigo_articulacion"},{data:"nombre",name:"nombre"},{data:"estado",name:"estado"},{data:"details",name:"details",orderable:!1},{data:"entregables",name:"entregables",orderable:!1},{data:"edit",name:"edit",orderable:!1}]})}function detallesDeUnaIntervencion(e){$.ajax({dataType:"json",type:"get",url:"/intervencion/ajaxDetallesDeUnaArticulacion/"+e}).done(function(a){$("#articulacionDetalle_titulo").empty(),$("#detalleArticulacion").empty(),null==a.detalles?Swal.fire("Ups!!","Ha ocurrido un error","error"):($("#articulacionDetalle_titulo").append("<div class='valign-wrapper left material-icons'><a href='/excel/excelDeUnaArticulacion/"+e+"'><img class='btn btn-flat' src='https://img.icons8.com/color/48/000000/ms-excel.png'></a></div><span class='teal-text text-darken-3'>Código de la Intervención: </span><b>"+a.detalles.codigo_articulacion+"</b>"),$("#detalleArticulacion").append('<div class="row"><div class="col s12 m6 l6"><span class="teal-text text-darken-3">Nombre de la Articulación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.detalles.nombre+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="teal-text text-darken-3">Gestor a cargo: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.detalles.gestor+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="teal-text text-darken-3">Fecha de Inicio: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.detalles.fecha_inicio+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="teal-text text-darken-3">Estado de la Articulación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.detalles.estado+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="teal-text text-darken-3">Tipo de Articulación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.detalles.tipoArticulacion+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="teal-text text-darken-3">Entregables: </span></div><div class="col s12 m6 l6"><span class="black-text"><a onclick="verDetallesDeLosEntregablesDeUnaIntervencionEmpresa('+a.detalles.id+')" class="btn btn-small teal darken-3">Pulse aquí para ver los entregables</a></span></div></div><div class="divider"></div>'),$("#articulacionDetalle").openModal())})}function verDetalleDeLaEntidadAsocidadALaArticulacion(e){$.ajax({dataType:"json",type:"get",url:"/articulacion/consultarEntidadDeLaArticulacion/"+e}).done(function(e){$("#detalleDeUnaArticulacion_titulo").empty(),$("#detalleArticulacion_body").empty(),null==e.detalles?Swal.fire("Ups!!","Ha ocurrido un error","error"):"Empresa"==e.articulacion.tipo_articulacion?($("#detalleDeUnaArticulacion_titulo").append("<span class='cyan-text text-darken-3'>Datos de la Empresa </span><br>"),$("#detalleArticulacion_body").append('<div class=\'row\'><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nit de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.nit+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nombre de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.nombre_empresa+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Dirección de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.direccion+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Ciudad de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.ciudad+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Email de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.email_entidad+"</span></div></div>"),$("#detalleArticulacion_modal").openModal()):"Grupo de Investigación"==e.articulacion.tipo_articulacion?($("#detalleDeUnaArticulacion_titulo").append("<span class='cyan-text text-darken-3'>Datos del Grupo de Investigación </span><br>"),$("#detalleArticulacion_body").append('<div class=\'row\'><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Código del Grupo de Investigacion: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.codigo_grupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nombre del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.nombre_grupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Correo del Grupo de Investigacion: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.correo_grupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Ciudad del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.ciudad+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Tipo de Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.tipogrupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Institución que avala el grupo de investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.institucion+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Clasificación Colciencias del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.nombre_clasificacion+"</span></div></div>"),$("#detalleArticulacion_modal").openModal()):($("#talentosDeUnaArticulacion_titulo").empty(),$("#talentosDeUnaArticulacion_table").empty(),$("#talentosDeUnaArticulacion_titulo").append("<span class='cyan-text text-darken-3'>Datos de los Talentos </span><br>"),$.each(e.detalles,function(e,a){let t="Autor";1==a.talento_lider&&(t="Talento Líder"),$("#talentosDeUnaArticulacion_table").append("<tr><td>"+t+"</td><td>"+a.talento+"</td></tr>")}),$("#talentosDeUnaArticulacion_modal").openModal())})}function eliminarIntervencionEmpresaPorId_event(e,a){Swal.fire({title:"¿Desea eliminar la Intervención a Empresa?",text:"Al hacer esto, todo lo relacionado con esta Intervención a Empresa será eliminado de la base de datos, eso incluye usos de infraestructura y los archivos subidos al servidor!",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",cancelButtonText:"No",confirmButtonText:"Sí, eliminar!"}).then(a=>{a.value&&eliminarIntervencionEmpresaPorId_moment(e)})}function eliminarIntervencionEmpresaPorId_moment(e){$.ajax({dataType:"json",type:"get",url:"/intervencion/eliminarArticulacion/"+e,success:function(e){e.retorno?(Swal.fire("Eliminación Exitosa!","La Intervención a Empresa se ha eliminado completamente!","success"),location.href="/intervencion"):Swal.fire("Eliminación Errónea!","La Intervención a Empresa no se ha eliminado!","error")},error:function(e,a,t){alert("Error: "+t)}})}function consultarProyectosDeTalentos(){$("#tblProyectoDelTalento").dataTable().fnDestroy(),$("#tblProyectoDelTalento").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],lengthChange:!1,ajax:{url:"/proyecto/datatableProyectosDelTalento/",data:function(e){e.codigo_proyecto=$(".codigo_proyecto").val(),e.nombre=$(".nombre").val(),e.nombre_fase=$(".nombre_fase").val(),e.search=$('input[type="search"]').val()}},columns:[{width:"15%",data:"codigo_proyecto",name:"codigo_proyecto"},{data:"nombre_gestor",name:"nombre_gestor"},{data:"nombre",name:"nombre"},{data:"nombre_fase",name:"nombre_fase"},{width:"8%",data:"info",name:"info",orderable:!1},{width:"8%",data:"proceso",name:"proceso",orderable:!1}]})}function verTalentosDeUnProyecto(e){$.ajax({dataType:"json",type:"get",url:"/proyecto/ajaxConsultarTalentosDeUnProyecto/"+e}).done(function(e){$("#talentosAsociadosAUnProyecto_table").empty(),0!=e.talentos.length?($("#talentosAsociadosAUnProyecto_titulo").empty(),$("#talentosAsociadosAUnProyecto_titulo").append("<span class='cyan-text text-darken-3'>Código de Proyecto: </span>"+e.proyecto),$.each(e.talentos,function(e,a){let t="",o=a.celular;"Talento Líder"==a.rol&&(t='<i class="material-icons green-text left">face</i>'),null==a.celular&&(o=""),$("#talentosAsociadosAUnProyecto_table").append("<tr><td>"+t+" "+a.rol+"</td><td>"+a.talento+"</td><td>"+a.email+"</td><td>"+o+"</td></tr>")}),$("#talentosAsociadosAUnProyecto_modal").openModal()):Swal.fire({title:"Ups!!",text:"No se encontraron talentos asociados a este proyecto!",type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})})}function consultarProyectosDelGestorPorAnho(){let e=$("#anho_proyectoPorAnhoGestorNodo").val();$("#tblproyectosGestorPorAnho").dataTable().fnDestroy(),$("#tblproyectosGestorPorAnho").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],lengthChange:!1,ajax:{url:"/proyecto/datatableProyectosDelGestorPorAnho/0/"+e,data:function(e){e.codigo_proyecto=$(".codigo_proyecto").val(),e.nombre=$(".nombre").val(),e.nombre_fase=$(".nombre_fase").val(),e.search=$('input[type="search"]').val()}},columns:[{width:"15%",data:"codigo_proyecto",name:"codigo_proyecto"},{data:"nombre",name:"nombre"},{data:"nombre_fase",name:"nombre_fase"},{width:"8%",data:"info",name:"info",orderable:!1},{width:"8%",data:"proceso",name:"proceso",orderable:!1}]})}function preguntaReversar(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de reversar este proyecto a la fase de Inicio?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&document.frmReversarFase.submit()})}function preguntaReversarPlaneacion(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de reversar este proyecto a la fase de Planeación?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&document.frmReversarFasePlaneacion.submit()})}function preguntaReversarEjecucion(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de reversar este proyecto a la fase de Ejecución?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&document.frmReversarFaseEjecucion.submit()})}function consultarProyectosDelNodoPorAnho(){let e=$("#anho_proyectoPorNodoYAnho").val();$("#tblproyectosDelNodoPorAnho").dataTable().fnDestroy(),$("#tblproyectosDelNodoPorAnho").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],lengthChange:!1,ajax:{url:"/proyecto/datatableProyectosDelNodoPorAnho/0/"+e,data:function(e){e.codigo_proyecto=$("#codigo_proyecto_tblProyectosDelNodoPorAnho").val(),e.gestor=$("#gestor_tblProyectosDelNodoPorAnho").val(),e.nombre=$("#nombre_tblProyectosDelNodoPorAnho").val(),e.sublinea_nombre=$("#sublinea_nombre_tblProyectosDelNodoPorAnho").val(),e.nombre_fase=$("#fase_nombre_tblProyectosDelNodoPorAnho").val(),e.search=$('input[type="search"]').val()}},columns:[{width:"15%",data:"codigo_proyecto",name:"codigo_proyecto"},{data:"gestor",name:"gestor"},{data:"nombre",name:"nombre"},{data:"sublinea_nombre",name:"sublinea_nombre"},{data:"nombre_fase",name:"nombre_fase"},{width:"8%",data:"info",name:"info",orderable:!1},{width:"6%",data:"proceso",name:"proceso",orderable:!1}]})}function eliminarProyectoPorId_event(e,a){Swal.fire({title:"¿Desea eliminar el Proyecto?",text:"Al hacer esto, todo lo relacionado con este proyecto será eliminado de la base de datos, eso incluye usos de infraestructura y los archivos subidos al servidor!",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",cancelButtonText:"No",confirmButtonText:"Sí, eliminar!"}).then(a=>{a.value&&eliminarProyectoPorId_moment(e)})}function eliminarProyectoPorId_moment(e){$.ajax({dataType:"json",type:"get",url:"/proyecto/eliminarProyecto/"+e,success:function(e){e.retorno?(Swal.fire("Eliminación Exitosa!","El proyecto se ha eliminado completamente!","success"),location.href="/proyecto"):Swal.fire("Eliminación Errónea!","El proyecto no se ha eliminado!","error")},error:function(e,a,t){alert("Error: "+t)}})}$(document).ready(function(){$("#sublineas_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:"/sublineas",type:"get"},columns:[{data:"nombre",name:"nombre"},{data:"linea",name:"linea"},{data:"edit",name:"edit",orderable:!1}]})}),$("#codigo_articulacion_GestorTable").keyup(function(){$("#articulacionesGestor_table").DataTable().draw()}),$("#nombre_GestorTable").keyup(function(){$("#articulacionesGestor_table").DataTable().draw()}),$("#fase_GestorTable").keyup(function(){$("#articulacionesGestor_table").DataTable().draw()}),$(document).on("submit","form#frmArticulaciones_FaseInicio_Update",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");ajaxSendFormArticulacion(a,t,o,"update")}),$(document).on("submit","form#frmArticulacion_FaseInicio",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");ajaxSendFormArticulacion(a,t,o,"create")}),$(document).on("submit","form#frmArticulaciones_FaseCierre_Update",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");ajaxSendFormArticulacion_FaseCierre(a,t,o)}),$("#codigo_articulacion_GestorTable").keyup(function(){$("#IntervencionGestor_table").DataTable().draw()}),$("#nombre_GestorTable").keyup(function(){$("#IntervencionGestor_table").DataTable().draw()}),$("#estado_GestorTable").keyup(function(){$("#IntervencionGestor_table").DataTable().draw()}),$(document).ready(function(){consultarProyectosDelGestorPorAnho(),consultarProyectosDelNodoPorAnho()}),$(".codigo_proyecto").keyup(function(){$("#tblproyectosGestorPorAnho").DataTable().draw()}),$(".nombre").keyup(function(){$("#tblproyectosGestorPorAnho").DataTable().draw()}),$(".nombre_fase").keyup(function(){$("#tblproyectosGestorPorAnho").DataTable().draw()}),$("#codigo_proyecto_tblProyectosDelNodoPorAnho").keyup(function(){$("#tblproyectosDelNodoPorAnho").DataTable().draw()}),$("#gestor_tblProyectosDelNodoPorAnho").keyup(function(){$("#tblproyectosDelNodoPorAnho").DataTable().draw()}),$("#nombre_tblProyectosDelNodoPorAnho").keyup(function(){$("#tblproyectosDelNodoPorAnho").DataTable().draw()}),$("#sublinea_nombre_tblProyectosDelNodoPorAnho").keyup(function(){$("#tblproyectosDelNodoPorAnho").DataTable().draw()}),$("#fase_nombre_tblProyectosDelNodoPorAnho").keyup(function(){$("#tblproyectosDelNodoPorAnho").DataTable().draw()});var infoActividad={infoDetailActivityModal:function(e){"string"==typeof e&&$.ajax({dataType:"json",type:"get",url:"/actividad/detalle/"+e}).done(function(e){$("#actividad_titulo").empty(),$("#detalleActividad").empty(),$("#actividad_titulo").append("<span class='cyan-text text-darken-3'>"+e.data.actividad.codigo_actividad+" - "+e.data.actividad.nombre+" </span><br>"),null!==e.data.actividad.articulacion_proyecto.proyecto?infoActividad.openIsProyect(e):null!==e.data.actividad.articulacion_proyecto.articulacion&&infoActividad.openIsArticulacion(e),$("#info_actividad_modal").openModal()})},openIsProyect:function(e){$("#detalleActividad").append(`\n            <table class="striped centered">\n                <TR>\n                    <TH width="25%">Código Proyecto</TH>\n                    <TD width="25%">${infoActividad.showInfoNull(e.data.actividad.codigo_actividad)}</TD>\n                    <TH width="25%" >Nombre Proyecto</TH>\n                    <TD width="25%" COLSPAN=3>${infoActividad.showInfoNull(e.data.actividad.nombre)}</TD>\n                </TR>\n                <TR>\n                    <TH width="25%">Gestor</TH>\n                    <TD width="25%">${infoActividad.showInfoNull(e.data.actividad.gestor.user.documento)} - ${e.data.actividad.gestor.user.nombres} ${e.data.actividad.gestor.user.apellidos}</TD>\n                    <TH width="25%">Correo Electrónico</TH>\n                    <TD width="25%" COLSPAN=3>${infoActividad.showInfoNull(e.data.actividad.gestor.user.email)}</TD>\n                </TR>\n            </table>\n            <div class="right">\n                <small>\n                    <b>Cantidad de usos de infraestructura:  </b>\n                    ${infoActividad.showInfoNull(e.data.total_usos)}\n                </small>\n            </div>\n            <div class="divider mailbox-divider"></div>\n            <div class="center">\n                <span class="mailbox-title">\n                    <i class="material-icons">group</i>\n                    Talentos que participan en el proyecto y dueño(s) de la propiedad intelectual.\n                </span>\n            </div>\n            <div class="divider mailbox-divider"></div>\n                <div class="row">\n                <div class="col s12 m12 l12">\n                        <div class="card-panel blue lighten-5">\n                            <h5 class="center">Talentos que participan en el proyecto</h5>\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th style="width: 10%">Talento Interlocutor</th>\n                                        <th style="width: 40%">Talento</th>\n                                        <th style="width: 20%">Correo</th>\n                                        <th style="width: 15%">Telefono</th>\n                                        <th style="width: 15%">Celular</th>\n                                    </tr>\n                                </thead>\n                                <tbody id="detalleTalentos">\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="card-panel green lighten-5 col s12 m12 l12">\n                        <h5 class="center">Dueño(s) de la propiedad intelectual</h5>\n                        <div class="row">\n                            <div class="col s12 m4 l4">\n                                <div class="card-panel">\n                                    <ul class="collection with-header">\n                                        <li class="collection-header"><h5>Empresas</h5></li>\n                                        <div id="detalleEmpresas"></div>\n                                    </ul>\n                                </div>\n                            </div>\n                            <div class="col s12 m4 l4">\n                                <div class="card-panel">\n                                    <ul class="collection with-header">\n                                        <li class="collection-header"><h5>Personas (Talentos)</h5></li>\n                                        <div id="detallePropiedadTalentos"></div>\n                                    </ul>\n                                </div>\n                            </div>\n                            <div class="col s12 m4 l4">\n                                <div class="card-panel">\n                                    <ul class="collection with-header">\n                                        <li class="collection-header"><h5>Grupos de Investigación</h5></li>\n                                        <div id="detallePropiedadGrupo"></div>\n\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>`),infoActividad.showTalentos(e.data.actividad.articulacion_proyecto.talentos),infoActividad.showPropiedadIntelectualEmpresas(e.data.actividad.articulacion_proyecto.proyecto.sedes),infoActividad.showPropiedadIntelectualTalentos(e.data.actividad.articulacion_proyecto.proyecto.users_propietarios),infoActividad.showPropiedadIntelectualGrupo(e.data.actividad.articulacion_proyecto.proyecto.gruposinvestigacion)},openIsArticulacion:function(e){$("#detalleActividad").append(`\n            <table class="striped centered">\n                <TR>\n                    <TH width="25%">Código Articulación</TH>\n                    <TD width="25%">${infoActividad.showInfoNull(e.data.actividad.codigo_actividad)}</TD>\n                    <TH width="25%" >Nombre de Articulación</TH>\n                    <TD width="25%" COLSPAN=3>${infoActividad.showInfoNull(e.data.actividad.nombre)}</TD>\n                </TR>\n                <TR>\n                    <TH width="25%">Gestor</TH>\n                    <TD width="25%">${infoActividad.showInfoNull(e.data.actividad.gestor.user.documento)} - ${e.data.actividad.gestor.user.nombres} ${e.data.actividad.gestor.user.apellidos}</TD>\n                    <TH width="25%">Correo Electrónico</TH>\n                    <TD width="25%" COLSPAN=3>${infoActividad.showInfoNull(e.data.actividad.gestor.user.email)}</TD>\n                </TR>\n            </table>\n            <div class="right">\n                <small>\n                    <b>Cantidad de usos de infraestructura:  </b>\n                    ${infoActividad.showInfoNull(e.data.total_usos)}\n                </small>\n            </div>\n            <div class="divider mailbox-divider"></div>\n            <div class="center">\n                <span class="mailbox-title">\n                    <i class="material-icons">group</i>\n                    Talentos que participan en la articulación.\n                </span>\n            </div>\n            <div class="divider mailbox-divider"></div>\n                <div class="row">\n                <div class="col s12 m12 l12">\n                        <div class="card-panel blue lighten-5">\n                            <h5 class="center">Talentos que participan en la Articulación</h5>\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th style="width: 10%">Talento Interlocutor</th>\n                                        <th style="width: 40%">Talento</th>\n                                        <th style="width: 20%">Correo</th>\n                                        <th style="width: 15%">Telefono</th>\n                                        <th style="width: 15%">Celular</th>\n                                    </tr>\n                                </thead>\n                                <tbody id="detalleTalentos">\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>`),infoActividad.showTalentos(e.data.actividad.articulacion_proyecto.talentos)},showDateActivity:function(e){return null===e||""===e?"El proceso no se ha cerrado":e},showInfoNull:function(e){return null===e||""===e?"No se encontraron resultados":e},validateDataIsTRL:function(e){return 0==e?"TRL 6":"TRL 7 - TRL 8"},validateDataIsBoolean:function(e){return 0==e?"NO":"SI"},dataPerteneceEconomiaNaranja:function(e){return 0==e.economia_naranja?"NO":1==e.economia_naranja?" SI ("+e.tipo_economianaranja+")":""},dataDirigidoDiscapacitados:function(e){return 0==e.dirigido_discapacitados?"NO":1==e.dirigido_discapacitados?"SI ("+e.tipo_discapacitados+")":""},dataArticuladaCTI:function(e){return 0==e.art_cti?"NO":1==e.art_cti?" SI ("+e.nom_act_cti+")":""},showTalentos:function(e){let a="";a=e.length>0?e.map(function(e){return`<tr class="selected">\n                            <td> ${infoActividad.validateDataIsBoolean(e.pivot.talento_lider)}</td>\n                            <td>${infoActividad.showInfoNull(e.user.documento)} - ${infoActividad.showInfoNull(e.user.nombres)} ${infoActividad.showInfoNull(e.user.apellidos)}</td>\n                            <td>${infoActividad.showInfoNull(e.user.email)}</td>\n                            <td>${infoActividad.showInfoNull(e.user.telefono)}</td>\n                            <td>${infoActividad.showInfoNull(e.user.celular)}</td>\n                        </tr>`}):'<tr class="selected">\n                        <td COLSPAN=4>No se encontraron resultados</td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                    </tr>',document.getElementById("detalleTalentos").innerHTML=a},showPropiedadIntelectualEmpresas:function(e){let a="";a=e.length>0?e.map(function(e){return`\n                        <li class="collection-item">\n                        ${infoActividad.showInfoNull(e.empresa.nit)} - ${infoActividad.showInfoNull(e.empresa.nombre)} (${infoActividad.showInfoNull(e.nombre_sede)})\n                        </li>`}):'<li class="collection-item">\n                    No se han encontrado empresas dueña(s) de la propiedad intelectual.\n                </li>',document.getElementById("detalleEmpresas").innerHTML=a},showPropiedadIntelectualTalentos:function(e){let a="";a=e.length>0?e.map(function(e){return`<li class="collection-item">\n                        ${infoActividad.showInfoNull(e.documento)} - ${infoActividad.showInfoNull(e.nombres)} ${infoActividad.showInfoNull(e.apellidos)}\n                        </li>`}):'<li class="collection-item">\n                    No se han encontrado talento(s) dueño(s) de la propiedad intelectual.\n                </li>',document.getElementById("detallePropiedadTalentos").innerHTML=a},showPropiedadIntelectualGrupo:function(e){let a="";a=e.length>0?e.map(function(e){return`<li class="collection-item">\n                        ${infoActividad.showInfoNull(e.codigo_grupo)} - ${infoActividad.showInfoNull(e.entidad.nombre)}\n                        </li>`}):'<li class="collection-item">\n            No se han encontrado grupo(s) de investigación dueño(s) de la propiedad intelectual.\n                </li>',document.getElementById("detallePropiedadGrupo").innerHTML=a}};function ajaxSendFormProyecto(e,a,t,o){$.ajax({type:e.attr("method"),url:t,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),"create"==o?mensajesProyectoCreate(e):mensajesProyectoUpdate(e)},error:function(e,a,t){alert("Error: "+t)}})}function mensajesProyectoCreate(e){"registro"==e.state&&(Swal.fire({title:"Registro Exitoso",text:"El proyecto ha sido registrado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/proyecto")},1e3)),"no_registro"==e.state&&Swal.fire({title:"El proyecto no se ha registrado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function mensajesProyectoUpdate(e){"update"==e.state&&(Swal.fire({title:"Modificación Exitosa",text:"El proyecto ha sido registrado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/proyecto")},1e3)),"no_update"==e.state&&Swal.fire({title:"El proyecto no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function talentoYaSeEncuentraAsociado(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"El talento ya se encuentra asociado al proyecto!"})}function usuarioYaSeEncuentraAsociado_Propietario(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"El usuario ya se encuentra asociado como dueño de la propiedad intelectual!"})}function empresaYaSeEncuentraAsociado_Propietario(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"Esta empresa/sede ya se encuentra asociada como dueño de la propiedad intelectual!"})}function talentoSeAsocioAlProyecto(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"El talento se ha asociado al proyecto!"})}function empresaSeAsocioAlProyecto_Propietario(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"La sede se ha asociado como dueño de la propiedad intelectual!"})}function grupoSeAsocioAlProyecto_Propietario(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"El grupo de investigación se ha asociado como dueño de la propiedad intelectual!"})}function ideaProyectoAsociadaConExito(e,a){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"La siguiente idea se ha asociado al proyecto: "+e+" - "+a})}function prepararFilaEnLaTablaDeTalentos(e,a){let t=null;a&&(t="checked");let o=e.talento.id;return'<tr class="selected" id=talentoAsociadoAProyecto'+o+'><td><input type="radio" '+t+' class="with-gap" name="radioTalentoLider" id="radioButton'+o+'" value="'+o+'" /><label for ="radioButton'+o+'"></label></td><td><input type="hidden" name="talentos[]" value="'+o+'">'+e.talento.documento+" - "+e.talento.talento+'</td><td><a class="waves-effect red lighten-3 btn" onclick="eliminarTalentoDeProyecto_FaseInicio('+o+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function prepararFilaEnLaTablaDePropietarios_Users(e){let a=e.user.id;return'<tr class="selected" id=propietarioAsociadoAlProyecto_Persona'+a+'><td><input type="hidden" name="propietarios_user[]" value="'+a+'">'+e.user.documento+" - "+e.user.nombres+" "+e.user.apellidos+'</td><td><a class="waves-effect red lighten-3 btn" onclick="eliminarPropietarioDeUnProyecto_FaseInicio_Persona('+a+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function prepararFilaEnLaTablaDePropietarios_Empresa(e){let a=e.sede.id;return'<tr class="selected" id=propietarioAsociadoAlProyecto_Empresa'+a+'><td><input type="hidden" name="propietarios_sedes[]" value="'+a+'">'+e.sede.empresa.nit+" - "+e.sede.empresa.nombre+" ("+e.sede.nombre_sede+')</td><td><a class="waves-effect red lighten-3 btn" onclick="eliminarPropietarioDeUnProyecto_FaseInicio_Empresa('+a+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function prepararFilaEnLaTablaDePropietarios_Grupos(e){let a=e.detalles.id;return'<tr class="selected" id=propietarioAsociadoAlProyecto_Grupo'+a+'><td><input type="hidden" name="propietarios_grupos[]" value="'+a+'">'+e.detalles.codigo_grupo+" - "+e.detalles.entidad.nombre+'</td><td><a class="waves-effect red lighten-3 btn" onclick="eliminarPropietarioDeUnProyecto_FaseInicio_Grupo('+a+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function pintarTalentoEnTabla_Fase_Inicio(e,a){$.ajax({dataType:"json",type:"get",url:"/usuario/talento/consultarTalentoPorId/"+e}).done(function(e){let t=prepararFilaEnLaTablaDeTalentos(e,a);$("#detalleTalentosDeUnProyecto_Create").append(t),talentoSeAsocioAlProyecto()})}function pintarPropietarioEnTabla_Fase_Inicio_PropiedadIntelectual(e){$.ajax({dataType:"json",type:"get",url:"/usuario/consultarUserPorId/"+e}).done(function(e){let a=prepararFilaEnLaTablaDePropietarios_Users(e);$("#propiedadIntelectual_Personas").append(a),talentoSeAsocioAlProyecto()})}function pintarPropietarioEnTabla_Fase_Inicio_PropiedadIntelectual_Sede(e){$.ajax({dataType:"json",type:"get",url:"/empresa/ajaxDetalleDeUnaSede/"+e,success:function(e){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"La sede "+e.sede.nombre_sede+" se asoció a la idea de proyecto!"});let a=prepararFilaEnLaTablaDePropietarios_Empresa(e);$("#propiedadIntelectual_Empresas").append(a),empresaSeAsocioAlProyecto_Propietario()},error:function(e,a,t){alert("Error: "+t)}})}function pintarPropietarioEnTabla_Fase_Inicio_PropiedadIntelectual_Grupo(e){$.ajax({dataType:"json",type:"get",url:"/grupo/ajaxDetallesDeUnGrupoInvestigacion/"+e}).done(function(e){let a=prepararFilaEnLaTablaDePropietarios_Grupos(e);$("#propiedadIntelectual_Grupos").append(a),grupoSeAsocioAlProyecto_Propietario()})}function noRepeat(e){let a=e,t=!0,o=document.getElementsByName("talentos[]");for(x=0;x<o.length;x++)if(o[x].value==a){t=!1;break}return t}function noRepeat_Propiedad(e){let a=e,t=!0,o=document.getElementsByName("propietarios_user[]");for(x=0;x<o.length;x++)if(o[x].value==a){t=!1;break}return t}function noRepeat_Sede(e){let a=e,t=!0,o=document.getElementsByName("propietarios_sedes[]");for(x=0;x<o.length;x++)if(o[x].value==a){t=!1;break}return t}function noRepeat_Grupo(e){let a=e,t=!0,o=document.getElementsByName("propietarios_grupos[]");for(x=0;x<o.length;x++)if(o[x].value==a){t=!1;break}return t}function eliminarTalentoDeProyecto_FaseInicio(e){$("#talentoAsociadoAProyecto"+e).remove()}function eliminarPropietarioDeUnProyecto_FaseInicio_Persona(e){$("#propietarioAsociadoAlProyecto_Persona"+e).remove()}function eliminarPropietarioDeUnProyecto_FaseInicio_Empresa(e){$("#propietarioAsociadoAlProyecto_Empresa"+e).remove()}function eliminarPropietarioDeUnProyecto_FaseInicio_Grupo(e){$("#propietarioAsociadoAlProyecto_Grupo"+e).remove()}function addTalentoProyecto(e,a){0==noRepeat(e)?talentoYaSeEncuentraAsociado():pintarTalentoEnTabla_Fase_Inicio(e,a)}function addPersonaPropiedad(e){0==noRepeat_Propiedad(e)?usuarioYaSeEncuentraAsociado_Propietario():pintarPropietarioEnTabla_Fase_Inicio_PropiedadIntelectual(e)}function prepararSedesEmpresa(e){let a="";return e.forEach(e=>{a+='<li class="collection-item">\n        '+e.nombre_sede+" - "+e.direccion+" "+e.ciudad.nombre+" ("+e.ciudad.departamento.nombre+')\n        <a href="#!" class="secondary-content" onclick="addSedePropietaria('+e.id+')">Asociar esta sede de la empresa al proyecto</a></div>\n      </li>'}),a}function addEntidadEmpresa(e){$("#sedesPropietarias_Empresas_detalles").empty(),$.ajax({dataType:"json",type:"get",url:"/empresa/ajaxDetallesDeUnaEmpresa/"+e+"/id",success:function(e){let a=prepararSedesEmpresa(e.empresa.sedes);$("#sedesPropietarias_Empresas_detalles").append(a),$("#sedesPropietarias_Empresas_modal").openModal()},error:function(e,a,t){alert("Error: "+t)}})}function addSedePropietaria(e){0==noRepeat_Sede(e)?empresaYaSeEncuentraAsociado_Propietario():pintarPropietarioEnTabla_Fase_Inicio_PropiedadIntelectual_Sede(e)}function addGrupoPropietario(e){0==noRepeat_Grupo(e)?empresaYaSeEncuentraAsociado_Propietario():pintarPropietarioEnTabla_Fase_Inicio_PropiedadIntelectual_Grupo(e)}function dumpAggregateValuesIntoTables(){$("#detalleTalentosDeUnProyecto_Create").empty(),$("#propiedadIntelectual_Personas").empty(),$("#propiedadIntelectual_Empresas").empty(),$("#propiedadIntelectual_Grupos").empty()}function addValueToFields(e,a,t){$("#txtnombreIdeaProyecto_Proyecto").val(a+" - "+e),$("#txtnombre").val(e),$("label[for='txtnombreIdeaProyecto_Proyecto']").addClass("active"),$("label[for='txtnombre']").addClass("active"),$("#txtobjetivo").val(t.objetivo),$("#txtobjetivo").trigger("autoresize"),$("label[for='txtobjetivo']").addClass("active"),$("#txtalcance_proyecto").val(t.alcance),$("#txtalcance_proyecto").trigger("autoresize"),$("label[for='txtalcance_proyecto']").addClass("active")}function asociarIdeaDeProyectoAProyecto(e,a,t){$("#txtidea_id").val(e),$.ajax({dataType:"json",type:"get",url:"/idea/show/"+e}).done(function(e){let o=e.data.idea;(idea=!0)&&(console.log(e),dumpAggregateValuesIntoTables(),addValueToFields(a,t,o),ideaProyectoAsociadaConExito(t,a),null!=e.data.talento&&(addTalentoProyecto(e.data.talento.id,!0),addPersonaPropiedad(e.data.talento.user.id)),null!=e.data.sede&&addSedePropietaria(e.data.sede.id),$("#ideasDeProyectoConEmprendedores_modal").closeModal())}).fail(function(e,a,t){errorAjax(e,a,t)})}function consultarIdeasDeProyectoEmprendedores_Proyecto_FaseInicio(){$("#ideasDeProyectoConEmprendedores_proyecto_table").dataTable().fnDestroy(),$("#ideasDeProyectoConEmprendedores_proyecto_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:"/proyecto/datatableIdeasConEmprendedores",type:"get"},select:!0,columns:[{data:"codigo_idea",name:"codigo_idea"},{data:"nombre_proyecto",name:"nombre_proyecto"},{data:"nombres_contacto",name:"nombres_contacto"},{width:"20%",data:"checkbox",name:"checkbox",orderable:!1}]}),$("#ideasDeProyectoConEmprendedores_modal").openModal({dismissible:!1})}function consultarEmpresasDeTecnoparque_Proyecto_FaseInicio_table(){$("#posiblesPropietarios_Empresas_table").dataTable().fnDestroy(),$("#posiblesPropietarios_Empresas_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:"/empresa/datatableEmpresasDeTecnoparque",type:"get"},columns:[{data:"nit",name:"nit"},{data:"nombre_empresa",name:"nombre_empresa"},{data:"add_propietario",name:"add_propietario",orderable:!1}]}),$("#posiblesPropietarios_Empresas_modal").openModal()}function consultarGruposDeTecnoparque_Proyecto_FaseInicio_table(){$("#posiblesPropietarios_Grupos_table").dataTable().fnDestroy(),$("#posiblesPropietarios_Grupos_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:"/grupo/datatableGruposInvestigacionDeTecnoparque",type:"get"},columns:[{data:"codigo_grupo",name:"codigo_grupo"},{data:"nombre",name:"nombre"},{data:"add_propietario",name:"add_propietario",orderable:!1}]}),$("#posiblesPropietarios_Grupos_modal").openModal()}function consultarTalentosDeTecnoparque_Proyecto_FaseInicio_table(e,a){$(e).dataTable().fnDestroy(),$(e).DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:"/usuario/talento/getTalentosDeTecnoparque/",type:"get"},columns:[{data:"documento",name:"documento"},{data:"talento",name:"talento"},{data:a,name:a,orderable:!1}]}),"#posiblesPropietarios_Personas_table"==e&&$("#posiblesPropietarios_Personas_modal").openModal()}function selectAreaConocimiento_Proyecto_FaseInicio(){let e=$("#txtareaconocimiento_id").val();"Otro"==$("#txtareaconocimiento_id [value='"+e+"']").text()?divOtroAreaConocmiento.show():divOtroAreaConocmiento.hide()}function showInput_EconomiaNaranja(){$("#txteconomia_naranja").is(":checked")?divEconomiaNaranja.show():divEconomiaNaranja.hide()}function showInput_Discapacidad(){$("#txtdirigido_discapacitados").is(":checked")?divDiscapacidad.show():divDiscapacidad.hide()}function showInput_ActorCTi(){$("#txtarti_cti").is(":checked")?divNombreActorCTi.show():divNombreActorCTi.hide()}function errorAjax(e,a,t){0===e.status?alert("Not connect: Verify Network."):404==e.status?alert("Requested page not found [404]"):500==e.status?alert("Internal Server Error [500]."):"parsererror"===a?alert("Requested JSON parse failed."):"timeout"===a?alert("Time out error."):"abort"===a?alert("Ajax request aborted."):alert("Uncaught Error: "+e.responseText)}function ajaxSendFormProyecto_FaseCierre(e,a,t){$.ajax({type:e.attr("method"),url:t,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),mensajesProyectoCierre(e)},error:function(e,a,t){alert("Error: "+t)}})}function printErroresFormulario(e){if("error_form"==e.state){let a="";for(control in e.errors)a+=" </br><b> - "+e.errors[control]+" </b> ",$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();Swal.fire({title:"Advertencia!",html:"Estas ingresando mal los datos."+a,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}}function mensajesProyectoCierre(e){"update"==e.state&&(Swal.fire({title:"Modificación Exitosa!",text:"El proyecto ha sido modificado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/proyecto")},1e3)),"no_update"==e.state&&Swal.fire({title:"El proyecto no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function actiarFechaFinDeLaEdt(){$("#txtestado").is(":checked")?divFechaCierreEdt.show():divFechaCierreEdt.hide()}function noRepeat(e){let a=e,t=!0,o=document.getElementsByName("entidades[]");for(x=0;x<o.length;x++)if(o[x].value==a){t=!1;break}return t}function addEmpresaAEdt(e){0==noRepeat(e)?Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"La empresa ya se encuentra asociada a la edt!"}):$.ajax({dataType:"json",type:"get",url:"/empresa/ajaxConsultarEmpresaPorIdEntidad/"+e}).done(function(e){let a=e.detalles.entidad_id,t='<tr class="selected" id=entidadAsociadaAEdt'+a+'><td><input type="hidden" name="entidades[]" value="'+a+'">'+e.detalles.nit+"</td><td>"+e.detalles.nombre+'</td><td><a class="waves-effect red lighten-3 btn" onclick="eliminarEntidadAsociadaAEdt('+a+');"><i class="material-icons">delete_sweep</i></a></td></tr>';$("#detalleEntidadesAsociadasAEdt").append(t),Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"La empresa se ha asociado a la edt!"})})}function eliminarEntidadAsociadaAEdt(e){$("#entidadAsociadaAEdt"+e).remove(),Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"Se ha removido la empresa de la edt!"})}function consultarEdtsDeUnGestor(e){let a=$("#txtanho_edts_Gestor").val();$("#edtPorGestor_table").dataTable().fnDestroy(),$("#edtPorGestor_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:"/edt/consultarEdtsDeUnGestor/"+e+"/"+a,type:"get"},columns:[{width:"10%",data:"codigo_edt",name:"codigo_edt"},{width:"15%",data:"nombre",name:"nombre"},{width:"15%",data:"gestor",name:"gestor"},{width:"6%",data:"area_conocimiento",name:"area_conocimiento"},{width:"6%",data:"tipo_edt",name:"tipo_edt"},{data:"fecha_inicio",name:"fecha_inicio"},{data:"estado",name:"estado"},{width:"6%",data:"business",name:"business",orderable:!1},{width:"6%",data:"details",name:"details",orderable:!1},{width:"6%",data:"edit",name:"edit",orderable:!1},{width:"6%",data:"entregables",name:"entregables",orderable:!1}]})}function eliminarEdtPorId_event(e,a){Swal.fire({title:"¿Desea eliminar la edt?",text:"Al hacer esto, todo lo relacionado con esta edt será eliminado de la base de datos, eso incluye usos de infraestructura y los archivos subidos al servidor!",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",cancelButtonText:"No",confirmButtonText:"Sí, eliminar!"}).then(a=>{a.value&&eliminarEdtPorId_moment(e)})}function eliminarEdtPorId_moment(e){$.ajax({dataType:"json",type:"get",url:"/edt/eliminarEdt/"+e,success:function(e){e.retorno?(Swal.fire("Eliminación Exitosa!","La edt se ha eliminado completamente!","success"),location.href="/edt"):Swal.fire("Eliminación Errónea!","La edt no se ha eliminado!","error")},error:function(e,a,t){alert("Error: "+t)}})}function datatableEdtsPorNodo(e){let a=$("#txtanho_edts_Nodo").val();$("#edtPorNodo_table").dataTable().fnDestroy(),$("#edtPorNodo_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:"/edt/consultarEdtsDeUnNodo/"+e+"/"+a,type:"get"},columns:[{width:"10%",data:"codigo_edt",name:"codigo_edt"},{width:"15%",data:"nombre",name:"nombre"},{width:"15%",data:"gestor",name:"gestor"},{width:"6%",data:"area_conocimiento",name:"area_conocimiento"},{width:"6%",data:"tipo_edt",name:"tipo_edt"},{width:"8%",data:"fecha_inicio",name:"fecha_inicio"},{width:"8%",data:"estado",name:"estado"},{width:"5%",data:"business",name:"business",orderable:!1},{width:"5%",data:"details",name:"details",orderable:!1},{width:"5%",data:"entregables",name:"entregables",orderable:!1},{width:"5%",data:"edit",name:"edit",orderable:!1},{width:"5%",data:"delete",name:"delete",orderable:!1}]})}function verEntidadesDeUnaEdt(e){$.ajax({dataType:"json",type:"get",url:"/edt/consultarDetallesDeUnaEdt/"+e+"/1",success:function(e){$("#entidadesEdt_table").empty(),0!=e.entidades.length?($("#entidadesEdt_titulo").empty(),$("#entidadesEdt_titulo").append("<span class='cyan-text text-darken-3'>Código de la Edt: </span>"+e.edt.codigo_edt),$.each(e.entidades,function(e,a){$("#entidadesEdt_table").append("<tr><td>"+a.nit+"</td><td>"+a.nombre+"</td></tr>")}),$("#entidadesEdt_modal").openModal()):Swal.fire({title:"Ups!!",text:"No se encontraron empresas asociadas a esta Edt!",type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})},error:function(e,a,t){alert("Error: "+t)}})}function detallesDeUnaEdt(e){$.ajax({dataType:"json",type:"get",url:"/edt/consultarDetallesDeUnaEdt/"+e+"/0",success:function(a){$("#detalleEdt_titulo").empty(),$("#detalleEdt_detalle").empty();let t="";t="Inactiva"==a.edt.estado?a.edt.fecha_cierre:"La Edt aún se encuentra activa!",$("#detalleEdt_titulo").append("<div class='valign-wrapper left material-icons'><a href='/excel/excelDeUnaEdt/"+e+"'><img class='btn btn-flat' src='https://img.icons8.com/color/48/000000/ms-excel.png'></a></div><span class='cyan-text text-darken-3'>Código de la Edt: </span>"+a.edt.codigo_edt),$("#detalleEdt_detalle").append('<div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Código de la Edt: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.edt.codigo_edt+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nombre de la Edt: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.edt.nombre+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Área de Conocimiento: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.edt.areaconocimiento+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Tipo de Edt: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.edt.tipoedt+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Fecha de Inicio: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.edt.fecha_inicio+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Fecha de Cierre: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m12 l12"><h6 class="cyan-text text-darken-3 center">Asistentes</h6></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Empleados: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.edt.empleados+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Instructores: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.edt.instructores+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Aprendices: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.edt.aprendices+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Público: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.edt.publico+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Observaciones: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a.edt.observaciones+'</span></div></div><div class="divider"></div>'),$("#detalleEdt_modal").openModal()},error:function(e,a,t){alert("Error: "+t)}})}$(document).ready(function(){divOtroAreaConocmiento=$("#otroAreaConocimiento_content"),divEconomiaNaranja=$("#economiaNaranja_content"),divDiscapacidad=$("#discapacidad_content"),divNombreActorCTi=$("#nombreActorCTi_content"),divOtroAreaConocmiento.hide(),divEconomiaNaranja.hide(),divDiscapacidad.hide(),divNombreActorCTi.hide()}),$(document).on("submit","form#frmProyectos_FaseInicio",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");ajaxSendFormProyecto(a,t,o,"create")}),$(document).on("submit","form#frmProyectos_FaseInicio_Update",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");ajaxSendFormProyecto(a,t,o,"update")}),$(document).on("submit","form#frmProyectos_FaseCierre_Update",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");ajaxSendFormProyecto_FaseCierre(a,t,o)}),$(document).ready(function(){$("#empresasDeTecnoparque_modEdt_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthMenu:[[5,25,50,-1],[5,25,50,"All"]],processing:!0,serverSide:!0,ajax:{url:"/empresa/datatableEmpresasDeTecnoparque",type:"get"},deferRender:!0,columns:[{data:"nit",name:"nit"},{data:"nombre_empresa",name:"nombre_empresa"},{data:"add_empresa_a_edt",name:"add_empresa_a_edt"}]})}),divFechaCierreEdt=$("#divFechaCierreEdt"),divFechaCierreEdt.hide(),$(document).ready(function(){consultarEdtsDeUnGestor(0)}),$(document).ready(function(){datatableEdtsPorNodo(0)}),$(document).ready(function(){let e=$("#filter_nodo_art").val(),a=$("#filter_year_art").val(),t=$("#filter_phase").val(),o=$("#filter_tipo_articulacion").val(),n=$("#filter_alcance_articulacion").val();""!=e&&null!=e||""==a||""==t||""==o||""!=n&&null!=n?""==e&&null==e||""==a||""==t||""==o||""==n&&null==n?$("#articulaciones_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():articulacion_pbt.fill_datatatables_articulacion(e,a,t,o,n):articulacion_pbt.fill_datatatables_articulacion(e=null,a=null,t=null,o=null,n=null)}),$("#filter_articulacion").click(function(){let e=$("#filter_nodo_art").val(),a=$("#filter_year_art").val(),t=$("#filter_phase").val(),o=$("#filter_tipo_articulacion").val(),n=$("#filter_alcance_articulacion").val();$("#articulaciones_data_table").dataTable().fnDestroy(),""!=e&&null!=e||""==a||""==t||""==o||""!=n&&null!=n?""==e&&null==e||""==a||""==t||""==o||""==n&&null==n?$("#articulaciones_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():articulacion_pbt.fill_datatatables_articulacion(e,a,t,o,n):articulacion_pbt.fill_datatatables_articulacion(e=null,a,t,o,n=null)});var articulacion_pbt={fill_datatatables_articulacion:function(e=null,a=null,t=null,o=null,n=null){$("#articulaciones_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!1,serverSide:!1,order:[[5,"desc"]],ajax:{url:"/articulaciones/datatable_filtros",type:"get",data:{filter_nodo_art:e,filter_year_art:a,filter_phase:t,filter_tipo_articulacion:o,filter_alcance_articulacion:n}},columns:[{data:"nodo",name:"nodo"},{data:"codigo_articulacion",name:"codigo_articulacion"},{data:"nombre_articulacion",name:"nombre_articulacion"},{data:"articulador",name:"articulador"},{data:"fase",name:"fase"},{data:"starDate",name:"starDate"},{data:"show",name:"show",orderable:!1}]})}};function preguntaReversarArticulacion(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de reversar esta articulación a la fase de Inicio?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&document.frmReversarFase.submit()})}function ajaxSendFormArticulacionFaseCierre(e,a,t){$.ajax({type:e.attr("method"),url:t,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){console.log(e),$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),mensajesArticulacionCierre(e)},error:function(e,a,t){alert("Error: "+t)}})}function printErroresFormulario(e){if("error_form"==e.state){let a="";for(control in e.errors)a+=" </br><b> - "+e.errors[control]+" </b> ",$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();Swal.fire({title:"Advertencia!",html:"Estas ingresando mal los datos."+a,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}}function mensajesArticulacionCierre(e){"update"==e.state&&(Swal.fire({title:"Modificación Exitosa!",text:"La articulación ha sido modificado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/articulaciones/"+e.data.id)},1e3)),"no_update"==e.state&&Swal.fire({title:"La articulación no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function ajaxSendFormArticulacion(e,a,t,o,n){$.ajax({type:e.attr("method"),url:t,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),filter_project.messageArticulacion(e,o,n)},error:function(e,a,t){alert("Error: "+t)}})}$("#download_archive_art").click(function(){var e={filter_nodo:$("#filter_nodo_art").val(),filter_year:$("#filter_year_art").val(),filter_phase:$("#filter_phase").val(),filter_tipo_articulacion:$("#filter_tipo_articulacion").val(),filter_alcance_articulacion:$("#filter_alcance_articulacion").val()},a="/articulaciones/export?"+$.param(e);window.location=a}),$(document).on("submit","form#frmArticulacionpbt_FaseInicio",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");ajaxSendFormArticulacion(a,t,o,"registrada","Registro exitoso")}),$(document).on("submit","form#frmUpdateArticulacion_FaseInicio",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");ajaxSendFormArticulacion(a,t,o,"actualizado","Modificación Exitosa")}),$(document).on("submit","form#frmUpdateArticulacionMiembros",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");ajaxSendFormArticulacion(a,t,o,"actualizado","Modificación Exitosa")}),$(document).on("submit","form#frmArticulacionFaseCierre",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),t=new FormData($(this)[0]),o=a.attr("action");ajaxSendFormArticulacionFaseCierre(a,t,o)}),$("#filter_code_project").click(function(){let e=$("#filter_code").val();(""!=e||null!=e||e.length>0)&&filter_project.fill_code_project(e)}),$("#filter_project_advanced").click(function(){let e=$("#filter_year_pro").val();filter_project.queryProyectosFaseInicioTable(e)}),$("#filter_project_modal").click(function(){let e=$("#filter_year_pro").val();filter_project.queryProyectosFaseInicioTable(e)}),$("#search_talent").click(function(){let e=$("#txtsearch_user").val();e.length>0?filter_project.searchUser(e):(filter_project.emptyResult("result-talents"),filter_project.notFound("result-talents"))}),$("#filter_talents_advanced").click(function(){filter_project.queryTalentos()});var filter_project={fill_code_project:function(e=null){filter_project.emptyResult("alert-response"),filter_project.emptyResult("collection-response"),filter_project.emptyResult("alert-response-talents"),filter_project.emptyResult("txtnombre_articulacion"),e.length>0?$.ajax({dataType:"json",type:"get",url:"/actividades/filter-code/"+e}).done(function(e){if(200==e.data.status_code){let a=e.data.proyecto.articulacion_proyecto.actividad,t=e.data;$("#txtnombre_articulacion").val(a.nombre),$("label[for='txtnombre_articulacion']").addClass("active"),$(".alert-response").append('\n                    <div class="row">\n                        <div class="col s12 m12 l12">\n                            <div class="card card-transparent">\n                                <div class="card-content">\n                                    <span class="card-title p-h-lg p f-12"> '+a.codigo_actividad+" - "+a.nombre+'</span>\n                                    <div class="position-top-right p f-12 mail-date hide-on-med-and-down"> Fecha cierre: '+filter_project.formatDate(a.fecha_cierre)+"</div>\n                                    <p>"+a.objetivo_general+'</p>\n                                    <input type="hidden" name="txtpbt" value="'+e.data.proyecto.id+'"/>\n                                </div>\n                                <div class="card-action">\n                                <a class="orange-text text-darken-1" target="_blank" href="/proyecto/detalle/'+t.proyecto.id+'">Ver más</a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    '),$(".collection-response").append('\n                    <li class="collection-item dismissable">\n                        <a target="_blank" href="/proyecto/detalle/'+t.proyecto.id+'" class="secondary-content orange-text"><i class="material-icons">link</i></a>\n                        <span class="title">PBT</span>\n                        <p>'+a.codigo_actividad+"<br>\n                            "+a.nombre+'\n                        </p>\n                    </li>\n                    <li class="collection-item dismissable">\n                        <a  onclick="detallesIdeaPorId('+t.proyecto.idea.id+')" class="secondary-content orange-text" >\n                        \n                            <i class="material-icons">link</i>\n                        </a>\n                        <span class="title">Idea:</span>\n                        \n                        <p>'+t.proyecto.idea.codigo_idea+"<br>\n                        "+t.proyecto.idea.nombre_proyecto+"\n                        </p>\n                        \n                    </li>\n                    "),0!=t.proyecto.articulacion_proyecto.talentos.length?$.each(t.proyecto.articulacion_proyecto.talentos,function(e,a){$(".alert-response-talents").append('<div class="row card-talent'+a.user.id+'">\n                                    <div class="col s12 m12 l12">\n                                        <div class="card bs-dark">\n                                            <div class="card-content">\n                                                <span class="card-title p-h-lg"> '+a.user.documento+" - "+a.user.nombres+" "+a.user.apellidos+'</span>\n                                                <input type="hidden" name="talentos[]" value="'+a.id+'"/>\n                                                <div class="p-h-lg">\n                                                    <input type="radio" checked class="with-gap" name="txttalento_interlocutor" id="radioInterlocutor'+a.id+'" value="'+a.id+'" /><label for ="radioInterlocutor'+a.id+'">Talento Interlocutor</label>\n                                                </div>\n                                                <div class="position-top-right p f-12 mail-date hide-on-med-and-down">  Acceso al sistema: '+userSearch.state(a.user.estado)+'</div>\n                                                <p class="hide-on-med-and-down"> Miembro desde '+filter_project.formatDate(a.user.created_at)+'</p>\n                                            </div>\n                                            <div class="card-action">\n                                                <a target="_blank"  class="waves-effect waves-red btn-flat m-b-xs orange-text" href="/usuario/usuarios/'+a.user.documento+'"><i class="material-icons left"> link</i>Ver más</a>\n                                                <a onclick="filter_project.deleteTalent( '+a.user.id+');" class="waves-effect waves-red btn-flat m-b-xs red-text"><i class="material-icons left"> delete_sweep</i>Eliminar</a>\n                                            </div>\n                                        </div>   \n                                    </div>\n                                </div>')}):filter_project.notFound("alert-response-talents")}else filter_project.notFound("alert-response"),filter_project.notFound("alert-response-talents"),$(".collection-response").append('\n                        <li class="collection-item dismissable">\n                            <span class="title">Sin resultados</span>                          \n                        </li>\n                    ')}):(filter_project.notFound("alert-response"),filter_project.notFound("alert-response-talents"),$(".collection-response").append('\n                <li class="collection-item dismissable">\n                    <span class="title">Sin resultados</span>                          \n                </li>\n            '))},deleteTalent:function(e){$(".card-talent"+e).remove(),Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"Talento eliminado."})},queryProyectosFaseInicioTable:function(e=null){$("#datatable_projects_finalizados").dataTable().fnDestroy(),$("#datatable_projects_finalizados").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:"/proyecto/datatableproyectosfinalizados",type:"get",data:{filter_year_pro:e}},columns:[{data:"codigo_proyecto",name:"codigo_proyecto"},{data:"nombre",name:"nombre"},{data:"fase",name:"fase"},{data:"add_proyecto",name:"add_proyecto",orderable:!1}]}),$("#filter_project_advanced_modal").openModal()},queryTalentos:function(){$("#datatable_talents_art").dataTable().fnDestroy(),$("#datatable_talents_art").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:"/usuario/talento/getTalentosDeTecnoparque/",type:"get"},columns:[{data:"documento",name:"documento"},{data:"talento",name:"talento"},{data:"add_articulacion_pbt",name:"add_articulacion_pbt",orderable:!1}]}),$("#filter_talents_advanced_modal").openModal()},addProjectToArticulacion:function(e){filter_project.fill_code_project(e),filter_project.emptyResult("result-talents"),$("#filter_project_advanced_modal").closeModal()},searchUser:function(e){$(".result-talents").empty(),null==e&&null==e||$.ajax({dataType:"json",type:"get",url:"/usuarios/filtro-talento/"+e}).done(function(e){if(200==e.data.status_code){let a=e.data.user;$(".result-talents").append('<div class="row">\n                        <div class="col s12 m12 l12">\n                            <div class="card card-transparent">\n                                <div class="card-content">\n                                    <span class="card-title p f-12 "> '+a.documento+" - "+a.nombres+" "+a.apellidos+'</span>\n                                    <p class="position-top-right p f-12 mail-date hide-on-med-and-down"> Acceso al sistema: '+userSearch.state(a.estado)+'</p>\n                                    <div class="mailbox-text p f-12 hide-on-med-and-down">\n                                                Miembro desde '+filter_project.formatDate(a.created_at)+'\n                                        </div>\n                                </div>\n                                <div class="card-action">\n                                <a onclick="filter_project.addTalentArticulacionPbt( '+a.talento.id+');" class="orange-text">Agregar</a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>')}else filter_project.notFound("result-talents")})},formatDate:function(e){return null==e?"no registra":moment(e).format("LL")},notFound:function(e){if(null!=e)return $("."+e).append('<div class="row">\n                <div class="col s12 m12 l12">\n                    <div class="card card-transparent">\n                        <div class="card-content">\n                            <div class="search-result">\n                                <p class="search-result-description">No se encontraron resultados</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>')},emptyResult:function(e){null!=e&&$("."+e).empty()},addTalentArticulacionPbt:function(e){0==filter_project.noRepeat(e)?filter_project.talentAssociated():(filter_project.emptyResult("talent-empty"),filter_project.printTalentoInTable(e)),$("#filter_talents_advanced_modal").closeModal()},noRepeat:function(e){let a=e,t=!0,o=document.getElementsByName("talentos[]");for(x=0;x<o.length;x++)if(o[x].value==a){t=!1;break}return t},talentAssociated:function(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"El talento ya se encuentra asociado a la articulación!"})},printTalentoInTable:function(e){$.ajax({dataType:"json",type:"get",url:"/usuario/talento/consultarTalentoPorId/"+e}).done(function(e){let a=filter_project.prepareTableRowTalent(e);$(".alert-response-talents").append(a)})},prepareTableRowTalent:function(e){let a=e;return'<div class="row card-talent'+a.talento.id+'">\n                        <div class="col s12 m12 l12">\n                            <div class="card">\n                                <div class="card-content">\n                                    <span class="card-title"> '+a.talento.documento+" - "+a.talento.talento+'</span>\n                                    <input type="hidden" name="talentos[]" value="'+a.talento.id+'"/>\n                                    <input type="radio" checked class="with-gap" name="txttalento_interlocutor" id="radioInterlocutor'+a.talento.id+'" value="'+a.talento.id+'" /><label for ="radioInterlocutor'+a.talento.id+'">Talento Interlocutor</label>\n                                </div>\n                                <div class="card-action">\n                                    <a target="_blank"  class="waves-effect waves-red btn-flat m-b-xs orange-text" href="/usuario/usuarios/'+a.talento.documento+'"><i class="material-icons left"> link</i>Ver más</a>\n                                    <a onclick="filter_project.deleteTalent( '+a.talento.id+');" class="waves-effect waves-red btn-flat m-b-xs red-text"><i class="material-icons left"> delete_sweep</i>Eliminar</a>\n                                </div>\n                            </div>   \n                        </div>\n                    </div>'},messageArticulacion:function(e,a,t){201==e.status_code&&(Swal.fire({title:t,text:"La articulación ha sido "+a+" satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace(e.url)},1e3)),404==e.state&&Swal.fire({title:"La articulación no se ha "+a+", por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}};$(document).ready(function(){$("#costoadministrativo_dinamizador_table1").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,retrieve:!0,processing:!0,ajax:{url:"/costos-administrativos",type:"get"},columns:[{data:"entidad",name:"entidad",width:"30%"},{data:"costoadministrativo",name:"costoadministrativo",width:"30%"},{data:"valor",name:"valor",width:"15%"},{data:"costosadministrativospordia",name:"costosadministrativospordia",width:"15%"},{data:"costosadministrativosporhora",name:"costosadministrativosporhora",width:"15%"},{data:"edit",name:"edit",orderable:!1,width:"8%"}],footerCallback:function(e,a,t,o,n){var i=this.api(),r=function(e){return"string"==typeof e?1*e.replace(/[\$,]/g,""):"number"==typeof e?e:0};totalCostosHora=i.column(4).data().reduce(function(e,a){return r(e)+r(a)},0),totalCostosDia=i.column(3).data().reduce(function(e,a){return r(e)+r(a)},0),totalCostosMes=i.column(2).data().reduce(function(e,a){return r(e)+r(a)},0),pageTotalCostosHora=i.column(4,{page:"current"}).data().reduce(function(e,a){return r(e)+r(a)},0),pageTotalCostosDia=i.column(3,{page:"current"}).data().reduce(function(e,a){return r(e)+r(a)},0),pageTotalCostosMes=i.column(2,{page:"current"}).data().reduce(function(e,a){return r(e)+r(a)},0),$(i.column(4).footer()).html("$ "+pageTotalCostosHora+" ( $"+totalCostosHora+" total)"),$(i.column(3).footer()).html("$ "+pageTotalCostosDia+" ( $"+totalCostosDia+" total)"),$(i.column(2).footer()).html("$ "+pageTotalCostosMes+" ( $"+totalCostosMes+" total)")}})}),$(document).ready(function(){$("#costoadministrativo_dinamizador_table1").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,retrieve:!0,processing:!0,ajax:{url:"/costos-administrativos",type:"get"},columns:[{data:"entidad",name:"entidad",width:"30%"},{data:"costoadministrativo",name:"costoadministrativo",width:"30%"},{data:"valor",name:"valor",width:"15%"},{data:"costosadministrativospordia",name:"costosadministrativospordia",width:"15%"},{data:"costosadministrativosporhora",name:"costosadministrativosporhora",width:"15%"},{data:"edit",name:"edit",orderable:!1,width:"8%"}],footerCallback:function(e,a,t,o,n){var i=this.api(),r=function(e){return"string"==typeof e?1*e.replace(/[\$,]/g,""):"number"==typeof e?e:0};totalCostosHora=i.column(4).data().reduce(function(e,a){return r(e)+r(a)},0),totalCostosDia=i.column(3).data().reduce(function(e,a){return r(e)+r(a)},0),totalCostosMes=i.column(2).data().reduce(function(e,a){return r(e)+r(a)},0),pageTotalCostosHora=i.column(4,{page:"current"}).data().reduce(function(e,a){return r(e)+r(a)},0),pageTotalCostosDia=i.column(3,{page:"current"}).data().reduce(function(e,a){return r(e)+r(a)},0),pageTotalCostosMes=i.column(2,{page:"current"}).data().reduce(function(e,a){return r(e)+r(a)},0),$(i.column(4).footer()).html("$ "+pageTotalCostosHora+" ( $"+totalCostosHora+" total)"),$(i.column(3).footer()).html("$ "+pageTotalCostosDia+" ( $"+totalCostosDia+" total)"),$(i.column(2).footer()).html("$ "+pageTotalCostosMes+" ( $"+totalCostosMes+" total)")}})}),$(document).ready(function(){let e=$("#filter_nodo").val(),a=$("#filter_state").val();$("#equipo_data_table").dataTable().fnDestroy(),""!=e||null!=e?equipo.fillDatatatablesEquipos(e,a):""!=e&&null!=e&&null!=e||""!=a&&null!=a&&null!=a?$("#equipo_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():equipo.fillDatatatablesEquipos(e=null,a=null),$("#equipo_actions_data_table").dataTable().fnDestroy(),""!=e||null!=e?equipo.fillDatatatablesEquiposActions(e,a):""!=e&&null!=e&&null!=e||""!=a&&null!=a&&null!=a?$("#equipo_actions_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():equipo.fillDatatatablesEquiposActions(e=null,a=null)});var equipo={fillDatatatablesEquipos(e,a){$("#equipo_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},order:[[1,"desc"]],processing:!0,serverSide:!0,lengthChange:!1,fixedHeader:{header:!0,footer:!0},pagingType:"full_numbers",ajax:{url:"/equipos",type:"get",data:{filter_nodo:e,filter_state:a}},columns:[{data:"nombrelinea",name:"nombrelinea",width:"30%"},{data:"nombre",name:"nombre",width:"30%"},{data:"referencia",name:"referencia",width:"15%"},{data:"marca",name:"marca",width:"15%"},{data:"costo_adquisicion",name:"costo_adquisicion",width:"15%"},{data:"vida_util",name:"vida_util",width:"15%"},{data:"horas_uso_anio",name:"horas_uso_anio",width:"15%"},{data:"anio_compra",name:"anio_compra",width:"15%"},{data:"anio_fin_depreciacion",name:"anio_fin_depreciacion",width:"15%"},{data:"depreciacion_por_anio",name:"depreciacion_por_anio",width:"15%"},{data:"state",name:"state",width:"15%"}]})},fillDatatatablesEquiposActions(e,a){$("#equipo_actions_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},order:[[1,"desc"]],processing:!0,serverSide:!0,lengthChange:!1,fixedHeader:{header:!0,footer:!0},pagingType:"full_numbers",ajax:{url:"/equipos",type:"get",data:{filter_nodo:e,filter_state:a}},columns:[{data:"nombrelinea",name:"nombrelinea",width:"30%"},{data:"nombre",name:"nombre",width:"30%"},{data:"referencia",name:"referencia",width:"15%"},{data:"marca",name:"marca",width:"15%"},{data:"costo_adquisicion",name:"costo_adquisicion",width:"15%"},{data:"vida_util",name:"vida_util",width:"15%"},{data:"state",name:"state",width:"15%"},{data:"detail",name:"detail",width:"15%"},{data:"edit",name:"edit",width:"15%",orderable:!1},{data:"changeState",name:"changeState",width:"15%",orderable:!1},{data:"delete",name:"delete",width:"15%",orderable:!1}]})},detail(e){$.ajax({dataType:"json",type:"get",url:`/equipos/${e}`}).done(function(e){if($("#titulo").empty(),$("#detalle_equipo").empty(),404==e.statusCode)swal("Ups!!!","No se encontraron resultados","error");else{let a=e.data.equipo;$("#titulo").append("<span class='cyan-text text-darken-3'>Nombre de Equipo: </span>"+a.nombre),$("#detalle_equipo").append(`\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Linea Tecnológica: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">${a.lineatecnologica.abreviatura} - ${a.lineatecnologica.nombre}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Referencia: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">${a.referencia}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Marca: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">${a.marca}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Costo Adquisición: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">$ ${a.costo_adquisicion}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Año de compra: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">${a.anio_compra}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Vida Util: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">${a.vida_util}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Año de depreciación: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">${e.data.aniodepreciacion}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Valor depreciación por año: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">$ ${e.data.depreciacion}</span>\n                        </div>\n                    </div>\n                    `),$(".modal-equipo").openModal()}})},deleteEquipo:function(e){Swal.fire({title:"¿Estas seguro de eliminar este equipo?",text:"Recuerde que si lo elimina no lo podrá recuperar.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"si, elminar equipo",cancelButtonText:"No, cancelar"}).then(a=>{if(a.value){let a=$("meta[name='csrf-token']").attr("content");$.ajax({url:`/equipos/${e}`,type:"DELETE",data:{id:e,_token:a},success:function(e){200==e.statusCode?(Swal.fire("Eliminado!","El equipo ha sido eliminado satisfactoriamente.","success"),location.href=e.route):226==e.statusCode&&Swal.fire("No se puede elimnar!",e.message,"error")},error:function(e,a,t){alert("Error: "+t)}})}else a.dismiss===Swal.DismissReason.cancel&&swalWithBootstrapButtons.fire("Cancelado","Tu equipo está a salvo","error")})},changeState:function(e){Swal.fire({title:"¿Estas seguro de cambiar el estado a  este equipo?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"si, cambiar estado",cancelButtonText:"No, cancelar"}).then(a=>{a.value?$.ajax({url:`/equipos/cambiar-estado/${e}`,type:"GET",success:function(e){200==e.statusCode?(Swal.fire("Estado cambiado!","El equipo ha cambiado de estado.","success"),location.href=e.route):Swal.fire("No se puede cambiar estado!",e.message,"error")},error:function(e,a,t){alert("Error: "+t)}}):a.dismiss===Swal.DismissReason.cancel&&swalWithBootstrapButtons.fire("Cancelado","Tu equipo está a salvo","error")})}};$("#filter_equipo").click(function(){let e=$("#filter_nodo").val(),a=$("#filter_state").val();$("#equipo_data_table").dataTable().fnDestroy(),""!=e||null!=e?equipo.fillDatatatablesEquipos(e,a):""!=e&&null!=e&&null!=e||""!=a&&null!=a&&null!=a?$("#equipo_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():equipo.fillDatatatablesEquipos(e=null,a=null),$("#equipo_actions_data_table").dataTable().fnDestroy(),""!=e||null!=e?equipo.fillDatatatablesEquiposActions(e,a):""!=e&&null!=e&&null!=e||""!=a&&null!=a&&null!=a?$("#equipo_actions_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():equipo.fillDatatatablesEquiposActions(e=null,a=null)}),$("#download_equipos").click(function(){var e={filter_nodo:$("#filter_nodo").val(),filter_state:$("#filter_state").val()},a="/equipos/export?"+$.param(e);window.location=a}),$(document).ready(function(){$("#mantenimientosequipos_administrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},pagingType:"full_numbers",lengthChange:!1})});var selectMantenimientosEquiposPorNodo={selectMantenimientosEquipoForNodo:function(){let e=$("#selectnodo").val();$("#mantenimientosequipos_administrador_table").dataTable().fnDestroy(),""!=e?$("#mantenimientosequipos_administrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,retrieve:!0,lengthChange:!1,fixedHeader:{header:!0,footer:!0},pagingType:"full_numbers",ajax:{url:"/mantenimientos/getmantenimientosequipospornodo/"+e,type:"get"},columns:[{data:"lineatecnologica",name:"lineatecnologica",width:"30%"},{data:"equipo",name:"equipo",width:"30%"},{data:"ultimo_anio_mantenimiento",name:"ultimo_anio_mantenimiento",width:"15%"},{data:"valor_mantenimiento",name:"valor_mantenimiento",width:"15%"},{data:"detail",name:"detail",width:"15%"}]}):$("#mantenimientosequipos_administrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,pagingType:"full_numbers"}).clear().draw()}};$(document).ready(function(){$("#mantenimientosequipos_dinamizador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,retrieve:!0,processing:!0,serverSide:!0,ajax:{url:"/mantenimientos",type:"get"},columns:[{data:"lineatecnologica",name:"lineatecnologica",width:"30%"},{data:"equipo",name:"equipo",width:"30%"},{data:"ultimo_anio_mantenimiento",name:"ultimo_anio_mantenimiento",width:"15%"},{data:"valor_mantenimiento",name:"valor_mantenimiento",width:"15%"},{data:"detail",name:"detail",width:"15%"},{data:"edit",name:"edit",orderable:!1,width:"8%"}]})}),$(document).ready(function(){$("#mantenimientosequipos_gestor_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,retrieve:!0,processing:!0,serverSide:!0,ajax:{url:"/mantenimientos",type:"get"},columns:[{data:"lineatecnologica",name:"lineatecnologica",width:"30%"},{data:"equipo",name:"equipo",width:"30%"},{data:"ultimo_anio_mantenimiento",name:"ultimo_anio_mantenimiento",width:"15%"},{data:"valor_mantenimiento",name:"valor_mantenimiento",width:"15%"},{data:"detail",name:"detail",width:"15%"}]})}),$(document).ready(function(){$("#materiales_administrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},pagingType:"full_numbers",lengthChange:!1})});var selectMaterialesPorNodo={selectMaterialesForNodo:function(){let e=$("#selectnodo").val();$("#materiales_administrador_table").dataTable().fnDestroy(),""!=e?$("#materiales_administrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,retrieve:!0,lengthChange:!1,fixedHeader:{header:!0,footer:!0},pagingType:"full_numbers",ajax:{url:"/materiales/getmaterialespornodo/"+e,type:"get"},columns:[{data:"fecha",name:"fecha",width:"20%"},{data:"nombrelinea",name:"nombrelinea",width:"30%"},{data:"codigo_material",name:"codigo_material",width:"30%"},{data:"nombre",name:"nombre",width:"30%"},{data:"presentacion",name:"presentacion",width:"15%"},{data:"medida",name:"medida",width:"15%"},{data:"cantidad",name:"cantidad",width:"15%"},{data:"valor_unitario",name:"valor_unitario",width:"15%"},{data:"valor_compra",name:"valor_compra",width:"15%"},{data:"detail",name:"detail",width:"15%"}]}):$("#materiales_administrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,pagingType:"full_numbers"}).clear().draw()}};function getSelectMaterialMedida(){let e=$("#txtmedida option:selected").text(),a=$("#txtmedida").val();$("#txtcantidad").prop("disabled",!0),$("label[for='txtcantidad']").empty(),""!=a?($("#txtcantidad").prop("disabled",!1),$("#txtcantidad").val(""),$("label[for='txtcantidad']").text("Tamaño presentacion o venta/paquete en "+e)):($("#txtcantidad").prop("disabled",!0),$("label[for='txtcantidad']").text("Tamaño presentacion o venta/paquete"))}$(document).ready(function(){$("#materiales_dinamizador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,retrieve:!0,processing:!0,serverSide:!0,ajax:{url:"/materiales",type:"get"},columns:[{data:"fecha",name:"fecha",width:"20%"},{data:"nombrelinea",name:"nombrelinea",width:"30%"},{data:"codigo_material",name:"codigo_material",width:"30%"},{data:"nombre",name:"nombre",width:"30%"},{data:"presentacion",name:"presentacion",width:"15%"},{data:"medida",name:"medida",width:"15%"},{data:"cantidad",name:"cantidad",width:"15%"},{data:"valor_unitario",name:"valor_unitario",width:"15%"},{data:"valor_compra",name:"valor_compra",width:"15%"},{data:"detail",name:"detail",width:"15%"}]})}),$(document).ready(function(){$("#materiales_gestor_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,retrieve:!0,processing:!0,serverSide:!0,ajax:{url:"/materiales",type:"get"},columns:[{data:"fecha",name:"fecha",width:"20%"},{data:"codigo_material",name:"codigo_material",width:"30%"},{data:"nombre",name:"nombre",width:"30%"},{data:"presentacion",name:"presentacion",width:"15%"},{data:"medida",name:"medida",width:"15%"},{data:"cantidad",name:"cantidad",width:"15%"},{data:"valor_unitario",name:"valor_unitario",width:"15%"},{data:"valor_compra",name:"valor_compra",width:"15%"},{data:"detail",name:"detail",width:"15%"}]})});var materialFormacion={destroyMaterial:function(e){Swal.fire({title:"¿Estas seguro de eliminar este material de formación?",text:"Recuerde que si lo elimina no lo podrá recuperar.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"si, elminar material",cancelButtonText:"No, cancelar"}).then(a=>{if(a.value){let a=$("meta[name='csrf-token']").attr("content");$.ajax({url:"/materiales/"+e,type:"DELETE",data:{id:e,_token:a},success:function(e){200==e.status?(Swal.fire("Eliminado!","El material de formación ha sido eliminado satisfactoriamente.","success"),location.href=e.route):226==e.status&&Swal.fire("No se puede elimnar!",e.message,"error")},error:function(e,a,t){alert("Error: "+t)}})}else a.dismiss===Swal.DismissReason.cancel&&swalWithBootstrapButtons.fire("Cancelado","Tu material de formación está a salvo","error")})}};$(document).ready(function(){$("#costoadministrativo_administrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},pagingType:"full_numbers"})});var selectCostoAdministrativoNodo={selectCostoAdministrativoForNodo:function(){let e=$("#selectnodo").val();$("#costoadministrativo_administrador_table").dataTable().fnDestroy(),""!=e?$("#costoadministrativo_administrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,lengthChange:!1,order:[[1,"asc"]],fixedHeader:{header:!0,footer:!0},pagingType:"full_numbers",ajax:{url:"/costos-administrativos/costoadministrativo/"+e,type:"get"},columns:[{data:"entidad",name:"entidad",width:"30%"},{data:"costoadministrativo",name:"costoadministrativo",width:"30%"},{data:"valor",name:"valor",width:"15%"},{data:"costosadministrativospordia",name:"costosadministrativospordia",width:"15%"},{data:"costosadministrativosporhora",name:"costosadministrativosporhora",width:"15%"}],footerCallback:function(e,a,t,o,n){var i=this.api(),r=function(e){return"string"==typeof e?1*e.replace(/[\$,]/g,""):"number"==typeof e?e:0};totalCostosHora=i.column(4).data().reduce(function(e,a){return r(e)+r(a)},0),totalCostosDia=i.column(3).data().reduce(function(e,a){return r(e)+r(a)},0),totalCostosMes=i.column(2).data().reduce(function(e,a){return r(e)+r(a)},0),pageTotalCostosHora=i.column(4,{page:"current"}).data().reduce(function(e,a){return r(e)+r(a)},0),pageTotalCostosDia=i.column(3,{page:"current"}).data().reduce(function(e,a){return r(e)+r(a)},0),pageTotalCostosMes=i.column(2,{page:"current"}).data().reduce(function(e,a){return r(e)+r(a)},0),$(i.column(4).footer()).html("$ "+pageTotalCostosHora+" ( $"+totalCostosHora+" total)"),$(i.column(3).footer()).html("$ "+pageTotalCostosDia+" ( $"+totalCostosDia+" total)"),$(i.column(2).footer()).html("$ "+pageTotalCostosMes+" ( $"+totalCostosMes+" total)")}}):$("#costoadministrativo_administrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,pagingType:"full_numbers"}).clear().draw()}};$(document).ready(function(){usoinfraestructuraIndex.queryActivitiesByAnio();let e=$("#filter_nodo").val(),a=$("#filter_year").val(),t=$("#filter_gestor").val(),o=$("#filter_actividad").val();$("#usoinfraestructa_data_table").dataTable().fnDestroy(),""==e&&null==e||""==a&&null==a||""==t&&null==t||""==o&&null==o?""!=e&&null!=e&&null!=e||""!=a&&null!=a&&null!=a||""!=t&&null!=t&&null!=t||""!=o&&null!=o&&null!=o?$("#usoinfraestructa_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():usoinfraestructuraIndex.fillDatatatablesUsosInfraestructura(e=null,a=null,t=null,o=null):usoinfraestructuraIndex.fillDatatatablesUsosInfraestructura(e,a,t,o)});var usoinfraestructuraIndex={fillDatatatablesUsosInfraestructura:function(e,a,t,o){$("#usoinfraestructa_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,order:[[2,"desc"]],ajax:{url:"/usoinfraestructura",type:"get",data:{filter_nodo:e,filter_year:a,filter_gestor:t,filter_actividad:o}},columns:[{data:"fecha",name:"fecha",width:"10%"},{data:"gestorEncargado",name:"gestorEncargado",width:"20%"},{data:"actividad",name:"actividad",width:"45%"},{data:"fase",name:"fase",width:"10%"},{data:"asesoria_directa",name:"asesoria_directa",width:"5%"},{data:"asesoria_indirecta",name:"asesoria_indirecta",width:"5%"},{data:"detail",name:"detail",width:"5%",orderable:!1}]})},queryGestoresByNodo:function(){let e=$("#filter_nodo").val();null==e||""==e||"all"==e||null==e?($("#filter_gestor").empty(),$("#filter_gestor").append('<option value="" selected>Seleccione un Gestor</option>')):$.ajax({type:"GET",url:"/usuario/usuarios/gestores/nodo/"+e,contentType:!1,dataType:"json",processData:!1,success:function(e){$("#filter_gestor").empty(),$("#filter_gestor").append('<option value="all">todos</option>'),$.each(e.gestores,function(e,a){$("#filter_gestor").append('<option  value="'+e+'">'+a+"</option>")}),$("#filter_gestor").material_select()},error:function(e,a,t){alert("Error: "+t)}})},queryActivitiesByAnio:function(){let e=$("#filter_year").val();null==e||""==e||null==e?($("#filter_actividad").empty(),$("#filter_actividad").append('<option value="">Seleccione un año</option>')):$.ajax({type:"GET",url:"/usoinfraestructura/actividades/"+e,contentType:!1,dataType:"json",processData:!1,success:function(e){$("#filter_actividad").empty(),$("#filter_actividad").append('<option value="all">Todas</option>'),$.each(e.actividades,function(e,a){$("#filter_actividad").append('<option  value="'+e+'">'+a+"</option>")}),$("#filter_actividad").material_select()},error:function(e,a,t){alert("Error: "+t)}})},destroyUsoInfraestructura:function(e){Swal.fire({title:"¿Estas seguro de eliminar este uso de infraestructura?",text:"Recuerde que si lo elimina no lo podrá recuperar.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"si, eliminar uso",cancelButtonText:"No, cancelar"}).then(a=>{if(a.value){let a=$("meta[name='csrf-token']").attr("content");$.ajax({url:"/usoinfraestructura/"+e,type:"DELETE",data:{id:e,_token:a},success:function(e){"success"==e.usoinfraestructura&&(Swal.fire("Eliminado!","Su uso de infraestructura ha sido eliminado satisfactoriamente.","success"),location.href=e.route)},error:function(e,a,t){alert("Error: "+t)}})}else a.dismiss===Swal.DismissReason.cancel&&swalWithBootstrapButtons.fire("Cancelado","Tu uso de infraestructura está a salvo","error")})}};function datatableVisitantesPorNodo_Ingreso(){$("#visitantesRedTecnoparque_table").dataTable().fnDestroy(),$("#visitantesRedTecnoparque_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:"/visitante/consultarVisitantesRedTecnoparque",type:"get"},columns:[{width:"15%",data:"documento",name:"documento"},{data:"tipo_documento",name:"tipo_documento"},{data:"tipo_visitante",name:"tipo_visitante"},{data:"visitante",name:"visitante"},{data:"email",name:"email"},{data:"contacto",name:"contacto"},{width:"8%",data:"edit",name:"edit",orderable:!1}]})}function datatableVisitantesPorNodo_DinamizadorAdministrador(){$("#visitantesRedTecnoparque_table").dataTable().fnDestroy(),$("#visitantesRedTecnoparque_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:"/visitante/consultarVisitantesRedTecnoparque",type:"get"},columns:[{width:"15%",data:"documento",name:"documento"},{data:"tipo_documento",name:"tipo_documento"},{data:"tipo_visitante",name:"tipo_visitante"},{data:"visitante",name:"visitante"},{data:"email",name:"email"},{data:"contacto",name:"contacto"}]})}function consultarIngresosDeUnNodo(e){$("#ingresosDeUnNodo_table").dataTable().fnDestroy(),$("#ingresosDeUnNodo_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:"/ingreso/consultarIngresosDeUnNodoTecnoparque/"+e,type:"get"},columns:[{width:"15%",data:"fecha_ingreso",name:"fecha_ingreso"},{width:"15%",data:"hora_salida",name:"hora_salida"},{data:"visitante",name:"visitante"},{data:"servicio",name:"servicio"},{data:"descripcion",name:"descripcion"},{width:"8%",data:"edit",name:"edit",orderable:!1}]})}function consultarVisitanteTecnoparque(){let e=$("#txtdocumento").val();""==e?Swal.fire({title:"Advertencia!",text:"Digite un número de documento!",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}):$.ajax({dataType:"json",type:"get",url:"/visitante/consultarVisitantePorDocumento/"+e,success:function(e){null==e.visitante?(divVisitanteRegistrado.hide(),divRegistrarVisitante.show()):($("#nombrePersona").val(e.visitante.visitante),$("#tipoPersona").val(e.visitante.tipovisitante),$("#contactoReg").val(e.visitante.contacto),$("#correoReg").val(e.visitante.email),divRegistrarVisitante.hide(),divVisitanteRegistrado.show())},error:function(e,a,t){alert("Error: "+t)}})}function consultarDetallesDeUnaCharlaInformativa(e){$.ajax({dataType:"json",type:"get",url:"/charla/consultarDetallesDeUnaCharlaInformativa/"+e,success:function(e){$("#modalDetalleDeUnaCharlaInformativa_titulo").empty(),$("#modalDetalleDeUnaCharlaInformativa_detalle_charla").empty(),$("#modalDetalleDeUnaCharlaInformativa_titulo").append("<span class='cyan-text text-darken-3'>Datos de la Charla Informativa </span><br>"),$("#modalDetalleDeUnaCharlaInformativa_detalle_charla").append('<div class=\'row\'><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Código de la Charla Informativa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.codigo_charla+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Fecha de la Charla Informativa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.fecha+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Encargado de la Charla Informativa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.encargado+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Número de Asistentens: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.nro_asistentes+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Observaciones: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.observacion+'</span></div></div><div class="divider"></div><h5 class="center">Evidencias</h5><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Programación de la Charla (Pantallazo del Envío de Correos): </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.programacion+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Evidencias Fotográficas: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.evidencia_fotografica+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Listado de Asistencia: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.listado_asistentes+'</span></div></div><div class="divider"></div>'),$("#detalleDeUnaCharlaInformativa_modal").openModal()},error:function(e,a,t){alert("Error: "+t)}})}$("#filter_usoinfraestructura").click(function(){let e=$("#filter_nodo").val(),a=$("#filter_year").val(),t=$("#filter_gestor").val(),o=$("#filter_actividad").val();$("#usoinfraestructa_data_table").dataTable().fnDestroy(),""==e&&null==e||""==a&&null==a||""==t&&null==t||""==o&&null==o?""!=e&&null!=e&&null!=e||""!=a&&null!=a&&null!=a||""!=t&&null!=t&&null!=t||""!=o&&null!=o&&null!=o?$("#usoinfraestructa_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():usoinfraestructuraIndex.fillDatatatablesUsosInfraestructura(e=null,a=null,t=null,o=null):usoinfraestructuraIndex.fillDatatatablesUsosInfraestructura(e,a,t,o)}),$("#download_usoinfraestructura").click(function(){var e={filter_nodo:$("#filter_nodo").val(),filter_year:$("#filter_year").val(),filter_gestor:$("#filter_gestor").val(),filter_actividad:$("#filter_actividad").val()},a="/usoinfraestructura/export?"+$.param(e);window.location=a}),$(document).ready(function(){});var ano=(new Date).getFullYear(),graficosId={grafico1:"graficoArticulacionesPorGestorYNodoPorFecha_stacked",grafico2:"graficoArticulacionesPorGestorYFecha_stacked",grafico3:"graficoArticulacionesPorLineaYFecha_stacked",grafico4:"graficoArticulacionesPorNodoYAnho_variablepie"},graficosEdtId={grafico1:"graficosEdtsPorGestorNodoYFecha_stacked",grafico2:"graficosEdtsPorGestorYFecha_stacked",grafico3:"graficoEdtsPorLineaYFecha_stacked",grafico4:"graficoEdtsPorNodoYAnho_variablepie"},graficosProyectoId={grafico1:"graficosProyectoPorMesYNodo_combinate",grafico2:"graficosProyectoConEmpresaPorMesYNodo_combinate",grafico3:"graficoProyectosPorTipoNodoYFecha_column",grafico4:"graficoProyectosFinalizadosPorNodoYAnho_column",grafico5:"graficoProyectosFinalizadosPorTipoNodoYFecha_column"};function alertaNodoNoValido(){Swal.fire("Advertencia!","Seleccione un nodo","warning")}function alertaGestorNoValido(){Swal.fire("Advertencia!","Seleccione un gestor(a)","warning")}function alertaLineaNoValido(){Swal.fire("Advertencia!","Seleccione una Línea Tecnológica","warning")}function alertaFechasNoValidas(){Swal.fire("Advertencia!","Seleccione fechas válidas!","warning")}function generarExcelGrafico3Edt(e){let a=0,t=$("#txtlinea_id_edtGrafico3").val(),o=$("#txtfecha_inicio_GraficoEdt3").val(),n=$("#txtfecha_fin_GraficoEdt3").val();1==e&&(a=$("#txtnodo_id").val()),""===a?alertaNodoNoValido():""===t?alertaLineaNoValido():location.href="/excel/excelEdtsFinalizadasPorLineaNodoYFecha/"+a+"/"+t+"/"+o+"/"+n}function generarExcelGrafico2Edt(e){let a=0;0==e&&(a=$("#txtgestor_id_edtGrafico2").val());let t=$("#txtfecha_inicio_edtGrafico2").val(),o=$("#txtfecha_fin_edtGrafico2").val();""===a?alertaGestorNoValido():location.href="/excel/excelEdtsFinalizadasPorGestorYFecha/"+a+"/"+t+"/"+o}function generarExcelGrafico1Edt(e){let a=0,t=$("#txtfecha_inicio_edtGrafico1").val(),o=$("#txtfecha_fin_edtGrafico1").val();1==e&&(a=$("#txtnodo_id").val()),""===a?alertaNodoNoValido():location.href="/excel/excelEdtsFinalizadasPorFechaYNodo/"+a+"/"+t+"/"+o}function generarExcelGrafico1Articulacion(e){let a=0,t=$("#txtfecha_inicio_Grafico1").val(),o=$("#txtfecha_fin_Grafico1").val();1==e&&(a=$("#txtnodo_id").val()),""===a?alertaNodoNoValido():location.href="/excel/excelArticulacionFinalizadasPorFechaYNodo/"+a+"/"+t+"/"+o}function generarExcelGrafico3Articulacion(e){let a=0,t=$("#txtlinea_tecnologica").val(),o=$("#txtfecha_inicio_Grafico1").val(),n=$("#txtfecha_fin_Grafico1").val();1==e&&(a=$("#txtnodo_id").val()),""===a?alertaNodoNoValido():""===t?alertaLineaNoValido():location.href="/excel/excelArticulacionFinalizadasPorFechaNodoYLinea/"+a+"/"+t+"/"+o+"/"+n}function generarExcelGrafico2Articulacion(){let e=$("#txtgestor_id").val(),a=$("#txtfecha_inicio_Grafico2").val(),t=$("#txtfecha_fin_Grafico2").val();""===e?alertaGestorNoValido():location.href="/excel/excelArticulacionFinalizadasPorGestorYFecha/"+e+"/"+a+"/"+t}function generarExcelGrafico4Articulacion(e){let a=0,t=$("#txtanho_Grafico4").val();1==e&&(a=$("#txtnodo_id").val()),""===a?alertaNodoNoValido():location.href="/excel/excelArticulacionFinalizadasPorNodoYAnho/"+a+"/"+t}function generarExcelGrafico1Proyecto(e){let a=0,t=$("#txtanho_GraficoProyecto1").val();1==e&&(a=$("#txtnodo_excelGrafico1Proyecto").val()),location.href="/excel/excelProyectosInscritosPorAnho/"+a+"/"+t}function generarExcelGrafico2Proyecto(e){let a=0,t=$("#txtanho_GraficoProyecto2").val();1==e&&(a=$("#txtnodo_excelGrafico2Proyecto").val()),location.href="/excel/excelProyectosInscritosConEmpresasPorAnho/"+a+"/"+t}function graficosProyectosPromedioCantidadesMeses(e,a){let t=e.proyectos.cantidades.length,o={cantidades:[],meses:[],promedios:[]};for(let a=0;a<t;a++)o.cantidades.push(e.proyectos.cantidades[a]);for(let a=0;a<t;a++)o.meses.push(e.proyectos.meses[a]);for(let a=0;a<t;a++)o.promedios.push(e.proyectos.promedios[a]);Highcharts.chart(a,{title:{text:"Proyectos Inscritos"},yAxis:{title:{text:"Cantidad/Promedio"}},xAxis:{categories:o.meses,title:{text:"Meses"}},series:[{type:"column",name:"Proyectos Inscritos",data:o.cantidades},{type:"spline",name:"Proyectos Inscritos",data:o.cantidades,dataLabels:{enabled:!0},marker:{lineWidth:2,lineColor:"#008981",fillColor:"#008981"}}]})}function graficosProyectosAgrupados(e,a,t){let o=e.proyectos.cantidades.length,n={cantidades:[],labels:[]};for(let a=0;a<o;a++)n.cantidades.push(e.proyectos.cantidades[a]);for(let a=0;a<o;a++)n.labels.push(e.proyectos.labels[a]);Highcharts.chart(a,{title:{text:"Proyectos Inscritos"},yAxis:{title:{text:"Cantidad"}},xAxis:{categories:n.labels,title:{text:t}},series:[{type:"column",name:"Proyectos Inscritos",data:n.cantidades},{type:"spline",name:"Proyectos Inscritos",data:n.cantidades,dataLabels:{enabled:!0},marker:{lineWidth:2,lineColor:"#008981",fillColor:"#008981"}}]})}function consultarProyectosFinalizadosPorTipoNodoYFecha_column(e){let a=0,t=$("#txtfecha_inicio_GraficoProyecto5").val(),o=$("#txtfecha_fin_GraficoProyecto5").val();1==e&&(a=$("#txtnodo_id").val()),t>o?alertaFechasNoValidas():$.ajax({dataType:"json",type:"get",url:"/grafico/consultarProyectosFinalizadosPorTipoNodoYFecha/"+a+"/"+t+"/"+o,success:function(e){graficosProyectosAgrupados(e,graficosProyectoId.grafico5,"Tipo de Proyecto")},error:function(e,a,t){alert("Error: "+t)}})}function consultarProyectosInscritosPorTipoNodoYFecha_column(e){let a=0,t=$("#txtfecha_inicio_GraficoProyecto3").val(),o=$("#txtfecha_fin_GraficoProyecto3").val();1==e&&(a=$("#txtnodo_id").val()),$.ajax({dataType:"json",type:"get",url:"/grafico/consultarProyectosInscritosPorTipoNodoYFecha/"+a+"/"+t+"/"+o,success:function(e){graficosProyectosAgrupados(e,graficosProyectoId.grafico3,"Tipo de Proyecto")},error:function(e,a,t){alert("Error: "+t)}})}function consultarProyectosFinalizadosPorAnho_combinate(e){id=0;let a=$("#txtanho_GraficoProyecto4").val();1==e&&(id=$("#txtnodo_id").val()),$.ajax({dataType:"json",type:"get",url:"/grafico/consultarProyectosFinalzadosPorAnho/"+id+"/"+a,success:function(e){graficosProyectosPromedioCantidadesMeses(e,graficosProyectoId.grafico4)},error:function(e,a,t){alert("Error: "+t)}})}function consultarProyectosInscritosConEmpresasPorAnho_combinate(e,a){id=0,1==e&&(id=$("#txtnodo_proyectoGrafico1")),$.ajax({dataType:"json",type:"get",url:"/grafico/consultarProyectosInscritosConEmpresasPorAnho/"+id+"/"+a,success:function(e){graficosProyectosPromedioCantidadesMeses(e,graficosProyectoId.grafico2)},error:function(e,a,t){alert("Error: "+t)}})}function consultarProyectosInscritosPorAnho_combinate(e,a){id=0,1==e&&(id=$("#txtnodo_proyectoGrafico1")),$.ajax({dataType:"json",type:"get",url:"/grafico/consultarProyectosInscritosPorAnho/"+id+"/"+a,success:function(e){graficosProyectosPromedioCantidadesMeses(e,graficosProyectoId.grafico1)},error:function(e,a,t){alert("Error: "+t)}})}function consultarEdtsDelNodoPorAnho_variablepie(e){let a=$("#txtanho_GraficoEdt4").val(),t=0;1==e&&(t=$("#txtnodo_id").val()),""===t?Swal.fire("Advertencia!","Seleccione un nodo","warning"):$.ajax({dataType:"json",type:"get",url:"/grafico/consultarEdtsPorNodoYAnho/"+t+"/"+a,success:function(e){Highcharts.chart(graficosEdtId.grafico4,{chart:{type:"variablepie"},title:{text:"Tipos de Edt's."},plotOptions:{variablepie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.y:.0f}",connectorColor:"silver"}}},tooltip:{headerFormat:"",pointFormat:'<span style="color:{point.color}">●</span> <b> {point.name}</b><br/>Cantidad: <b>{point.y}</b><br/>'},series:[{minPointSize:10,innerSize:"20%",zMin:0,name:"",data:[{name:"Tipo 1",y:e.consulta.tipo1,z:15},{name:"Tipo 2",y:e.consulta.tipo2,z:15},{name:"Tipo 3",y:e.consulta.tipo3,z:15}]}]})},error:function(e,a,t){alert("Error: "+t)}})}function consultarEdtsPorLineaYFecha_stacked(e){let a=0;1==e&&(a=$("#txtnodo_id").val());let t=$("#txtfecha_inicio_GraficoEdt3").val(),o=$("#txtfecha_fin_GraficoEdt3").val(),n=$("#txtlinea_id_edtGrafico3").val();""==n?Swal.fire("Advertencia!","Selecciona una Línea Tecnológica!","warning"):t>o?Swal.fire("Advertencia!","Selecciona fecha válidas!","warning"):$.ajax({dataType:"json",type:"get",url:"/grafico/consultarEdtsPorLineaYFecha/"+n+"/"+a+"/"+t+"/"+o,success:function(e){Highcharts.chart(graficosEdtId.grafico3,{chart:{type:"column"},title:{text:"Tipos de Edt's"},xAxis:{categories:["Tipo 1","Tipo 2","Tipo 3"],title:{text:"Tipos de Edt's"}},yAxis:{min:0,title:{text:"Número de Edt's"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:[{name:e.consulta.lineatecnologica,data:[e.consulta.tipo1,e.consulta.tipo2,e.consulta.tipo3]}]})},error:function(e,a,t){alert("Error: "+t)}})}function consultarEdtsPorGestorYFecha_stacked(e){let a=0;1==e&&(a=$("#txtnodo_id").val());let t=$("#txtfecha_inicio_edtGrafico2").val(),o=$("#txtfecha_fin_edtGrafico2").val(),n=$("#txtgestor_id_edtGrafico2").val();""==n?Swal.fire("Advertencia!","Selecciona un Gestor!","warning"):t>o?Swal.fire("Advertencia!","Selecciona fecha válidas!","warning"):$.ajax({dataType:"json",type:"get",url:"/grafico/consultarEdtsPorGestorYFecha/"+n+"/"+a+"/"+t+"/"+o,success:function(e){Highcharts.chart(graficosEdtId.grafico2,{chart:{type:"column"},title:{text:"Tipos de Edt's"},xAxis:{categories:["Tipo 1","Tipo 2","Tipo 3"],title:{text:"Tipos de Edt's"}},yAxis:{min:0,title:{text:"Número de Edt's"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:[{name:e.consulta.gestor,data:[e.consulta.tipo1,e.consulta.tipo2,e.consulta.tipo3]}]})},error:function(e,a,t){alert("Error: "+t)}})}function consultarEdtsPorNodoGestorYFecha_stacked(e){let a=$("#txtfecha_inicio_edtGrafico1").val(),t=$("#txtfecha_fin_edtGrafico1").val(),o=0;1==e&&(o=$("#txtnodo_id").val()),a>t?Swal.fire("Advertencia!","Selecciona fecha válidas!","warning"):$.ajax({dataType:"json",type:"get",url:"/grafico/consultarEdtsPorNodoGestorYFecha/"+o+"/"+a+"/"+t,success:function(e){for(var o=e.consulta.length,n={gestores:[],tipo1Array:[],tipo2Array:[],tipo3Array:[]},i=0;i<o;i++)null!=e.consulta[i].gestor&&n.gestores.push(e.consulta[i].gestor);for(i=0;i<o;i++)null!=e.consulta[i].tipos1&&n.tipo1Array.push(e.consulta[i].tipos1);for(i=0;i<o;i++)null!=e.consulta[i].tipos2&&n.tipo2Array.push(e.consulta[i].tipos2);for(i=0;i<o;i++)null!=e.consulta[i].tipos3&&n.tipo3Array.push(e.consulta[i].tipos3);var r=[];for(i=0;i<o;i++){let e='{"name": "'+n.gestores[i]+'", "data": ['+n.tipo1Array[i]+", "+n.tipo2Array[i]+", "+n.tipo3Array[i]+"]}";e=JSON.parse(e),r.push(e)}Highcharts.chart(graficosEdtId.grafico1,{chart:{type:"column"},title:{text:"Edt's entre "+a+" y "+t},xAxis:{categories:["Tipo 1","Tipo 2","Tipo 3"],title:{text:"Tipos de Edt's"}},yAxis:{min:0,title:{text:"Número de Edts's"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:r})},error:function(e,a,t){alert("Error: "+t)}})}function consultarTiposDeArticulacionesDelAnho_variablepie(e){let a=$("#txtanho_Grafico4").val(),t=0;1==e&&(t=$("#txtnodo_id").val()),""===t?Swal.fire("Advertencia!","Seleccione un nodo","warning"):$.ajax({dataType:"json",type:"get",url:"/grafico/consultarArticulacionesPorNodoYAnho/"+t+"/"+a,success:function(e){Highcharts.chart(graficosId.grafico4,{chart:{type:"variablepie"},title:{text:"Tipos de Articulación."},plotOptions:{variablepie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.y:.0f}",connectorColor:"silver"}}},tooltip:{headerFormat:"",pointFormat:'<span style="color:{point.color}">●</span> <b> {point.name}</b><br/>Cantidad: <b>{point.y}</b><br/>'},series:[{minPointSize:10,innerSize:"20%",zMin:0,name:"",data:[{name:"Grupos de Investigación",y:e.consulta.grupos,z:15},{name:"Empresas",y:e.consulta.empresas,z:15},{name:"Emprendedores",y:e.consulta.emprendedores,z:15}]}]})},error:function(e,a,t){alert("Error: "+t)}})}function articulacionesGrafico1Ajax(e,a,t){$.ajax({dataType:"json",type:"get",url:"/grafico/consultarArticulacionesPorNodo/"+e+"/"+a+"/"+t,success:function(e){for(var o=e.consulta.length,n={gestores:[],gruposArray:[],empresasArray:[],emprendedoresArray:[]},i=0;i<o;i++)null!=e.consulta[i].gestor&&n.gestores.push(e.consulta[i].gestor);for(i=0;i<o;i++)null!=e.consulta[i].grupos&&n.gruposArray.push(e.consulta[i].grupos);for(i=0;i<o;i++)null!=e.consulta[i].empresas&&n.empresasArray.push(e.consulta[i].empresas);for(i=0;i<o;i++)null!=e.consulta[i].emprendedores&&n.emprendedoresArray.push(e.consulta[i].emprendedores);var r=[];for(i=0;i<o;i++){let e='{"name": "'+n.gestores[i]+'", "data": ['+n.gruposArray[i]+", "+n.empresasArray[i]+", "+n.emprendedoresArray[i]+"]}";e=JSON.parse(e),r.push(e)}Highcharts.chart(graficosId.grafico1,{chart:{type:"column"},title:{text:"Articulaciones entre "+a+" y "+t},xAxis:{categories:["Grupos de Investigación","Empresas","Emprendedores"],title:{text:"Tipos de Articulaciones"}},yAxis:{min:0,title:{text:"Número de Articulaciones"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:r})},error:function(e,a,t){alert("Error: "+t)}})}function consultaArticulacionesDelGestorPorNodoYFecha_stacked(e){articulacionesGrafico1Ajax(e,$("#txtfecha_inicio_Grafico1").val(),$("#txtfecha_fin_Grafico1").val())}function consultaArticulacionesDelGestorPorNodoYFecha_stackedAdministrador(){let e=$("#txtnodo_id").val();if(""==e)Swal.fire("Advertencia!","Seleccione un Nodo!","warning");else{articulacionesGrafico1Ajax(e,$("#txtfecha_inicio_Grafico1").val(),$("#txtfecha_fin_Grafico1").val())}}function consultarArticulacionesDeUnGestorPorFecha_stacked(){let e=$("#txtfecha_inicio_Grafico2").val(),a=$("#txtfecha_fin_Grafico2").val(),t=$("#txtgestor_id").val();""==t?Swal.fire("Advertencia!","Selecciona un Gestor!","warning"):e>a?Swal.fire("Advertencia!","Selecciona fecha válidas!","warning"):$.ajax({dataType:"json",type:"get",url:"/grafico/consultarArticulacionesPorGestorYFecha/"+t+"/"+e+"/"+a,success:function(e){Highcharts.chart(graficosId.grafico2,{chart:{type:"column"},title:{text:"Articulaciones"},xAxis:{categories:["Grupos de Investigación","Empresas","Emprendedores"],title:{text:"Tipos de Articulaciones"}},yAxis:{min:0,title:{text:"Número de Articulaciones"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:[{name:e.consulta.gestor,data:[e.consulta.grupos,e.consulta.empresas,e.consulta.emprendedores]}]})},error:function(e,a,t){alert("Error: "+t)}})}function consultarArticulacionesDeUnaLineaDelNodoPorFechas_stacked(e){let a="";a=0==e?0:$("#txtnodo_id").val();let t=$("#txtlinea_tecnologica").val();if(""==t)Swal.fire("Advertencia!","Selecciona una Línea Tecnológica!","warning");else{let e=$("#txtfecha_inicio_Grafico3").val(),o=$("#txtfecha_fin_Grafico3").val();e>o?Swal.fire("Advertencia!","Debes seleccionar fecha válidas!","warning"):$.ajax({dataType:"json",type:"get",url:"/grafico/consultarCantidadDeArticulacionesPorTipoDeUnaLineaTecnologicaYFecha/"+a+"/"+t+"/"+e+"/"+o,error:function(e,a,t){alert("Error: "+t)},success:function(e){Highcharts.chart(graficosId.grafico3,{chart:{type:"column"},title:{text:"Articulaciones"},xAxis:{categories:["Grupos de Investigación","Empresas","Emprendedores"],title:{text:"Tipos de Articulaciones"}},yAxis:{min:0,title:{text:"Número de Articulaciones"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:[{name:e.consulta.lineatecnologica,data:[e.consulta.grupos,e.consulta.empresas,e.consulta.emprendedores]}]})}})}}var graficosSeguimiento={gestor:"graficoSeguimientoPorGestorDeUnNodo_column",nodo:"graficoSeguimientoDeUnNodo_column",nodo_fases:"graficoSeguimientoDeUnNodoFases_column",gestor_fases:"graficoSeguimientoPorGestorFases_column"};function alertaLineaNoValido(){Swal.fire("Advertencia!","Seleccione una Línea Tecnológica","warning")}function alertaGestorNoValido(){Swal.fire("Advertencia!","Seleccione un Gestor","warning")}function alertaFechasNoValidas(){Swal.fire("Advertencia!","Seleccione fechas válidas","warning")}function alertaNodoNoValido(){Swal.fire("Advertencia!","Seleccione un nodo","warning")}function consultarSeguimientoDeUnGestor(e){let a=0,t=$("#txtfecha_inicio_Gestor").val(),o=$("#txtfecha_fin_Gestor").val();1==e&&(a=$("#txtgestor_id").val()),""===a?alertaGestorNoValido():t>o?alertaFechasNoValidas():$.ajax({dataType:"json",type:"get",url:"/seguimiento/seguimientoDeUnGestor/"+a+"/"+t+"/"+o,success:function(e){graficoSeguimiento(e,graficosSeguimiento.gestor)},error:function(e,a,t){alert("Error: "+t)}})}function consultarSeguimientoDeUnGestorFase(e){let a=0;1==e&&(a=$("#txtgestor_id_actual").val()),""===a?alertaGestorNoValido():$.ajax({dataType:"json",type:"get",url:"/seguimiento/seguimientoDeUnGestorFases/"+a,success:function(e){graficoSeguimientoFases(e,graficosSeguimiento.gestor_fases)},error:function(e,a,t){alert("Error: "+t)}})}function consultarSeguimientoDeUnNodo(e){let a=0,t=$("#txtfecha_inicio_Nodo").val(),o=$("#txtfecha_fin_Nodo").val();1==e&&(a=$("#txtnodo_id").val()),""===a?alertaNodoNoValido():t>o?alertaFechasNoValidas():$.ajax({dataType:"json",type:"get",url:"/seguimiento/seguimientoDeUnNodo/"+a+"/"+t+"/"+o,success:function(e){graficoSeguimiento(e,graficosSeguimiento.nodo)},error:function(e,a,t){alert("Error: "+t)}})}function consultarSeguimientoDeUnNodoFases(e){let a=0;1==e&&(a=$("#txtnodo_id").val()),""===a?alertaNodoNoValido():$.ajax({dataType:"json",type:"get",url:"/seguimiento/seguimientoDeUnNodoFases/"+a,success:function(e){graficoSeguimientoFases(e,graficosSeguimiento.nodo_fases)},error:function(e,a,t){alert("Error: "+t)}})}function graficoSeguimiento(e,a){Highcharts.chart(a,{chart:{type:"column"},title:{text:"Seguimiento"},yAxis:{title:{text:"Cantidad"}},xAxis:{type:"category"},legend:{enabled:!1},tooltip:{headerFormat:'<span style="font-size:11px">Cantidad</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>{point.y}</b><br/>'},series:[{colorByPoint:!0,dataLabels:{enabled:!0},data:[{name:"Proyectos Inscritos",y:e.datos.Inscritos},{name:"TRL 6 esperados",y:e.datos.Esperado6},{name:"TRL 7 - 8 esperados",y:e.datos.Esperado7_8},{name:"Proyectos Cerrados",y:e.datos.Cerrados},{name:"TRL 6 obtenidos",y:e.datos.Obtenido6},{name:"TRL 7 obtenidos",y:e.datos.Obtenido7_8},{name:"TRL 8 obtenidos",y:e.datos.Obtenido8},{name:"Articulaciones con G.I Inscritas",y:e.datos.ArticulacionesInscritas},{name:"Articulaciones con G.I Cerradas",y:e.datos.ArticulacionesCerradas}]}]})}function graficoSeguimientoFases(e,a){Highcharts.chart(a,{chart:{type:"column"},title:{text:"Seguimiento (Fases)"},yAxis:{title:{text:"Cantidad"}},xAxis:{type:"category"},legend:{enabled:!1},tooltip:{headerFormat:'<span style="font-size:11px">Cantidad</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>{point.y}</b><br/>'},series:[{colorByPoint:!0,dataLabels:{enabled:!0},data:[{name:"Proyectos en inicio",y:e.datos.ProyectosInicio},{name:"Proyectos en planeación",y:e.datos.ProyectosPlaneacion},{name:"Proyectos en ejecución",y:e.datos.ProyectosEjecucion},{name:"Proyectos en cierre",y:e.datos.ProyectosCierre},{name:"Proyectos finalizados",y:e.datos.ProyectosFinalizado},{name:"Proyectos suspendidos",y:e.datos.ProyectosSuspendido}]}]})}var graficosCostos={actividad:"costosDeUnProyecto_column",proyectos:"costosDeProyectos_column",proyectos_ipe:"costosDeProyectos_ipe_column"};function setValueInput(e,a){$("#txtcosto_asesorias"+a).val(formatMoney(e.costosAsesorias)),$("label[for='txtcosto_asesorias"+a+"']").addClass("active",!0),$("#txtcostos_equipos"+a).val(formatMoney(e.costosEquipos)),$("label[for='txtcostos_equipos"+a+"']").addClass("active",!0),$("#txtcostos_materiales"+a).val(formatMoney(e.costosMateriales)),$("label[for='txtcostos_materiales"+a+"']").addClass("active",!0),$("#txtcostos_administrativos"+a).val(formatMoney(e.costosAdministrativos)),$("label[for='txtcostos_administrativos"+a+"']").addClass("active",!0),$("#txtcosto_total"+a).val(formatMoney(e.costosTotales)),$("label[for='txtcosto_total"+a+"']").addClass("active",!0),$("#txthoras_asesoria"+a).val(e.horasAsesorias),$("label[for='txthoras_asesoria"+a+"']").addClass("active",!0),$("#txthoras_uso"+a).val(e.horasEquipos),$("label[for='txthoras_uso"+a+"']").addClass("active",!0)}function consultarCostosDeProyectos(e,a){let t,o,n,i=0,r=[],s="";if(1==a?(s="_proyectos",t=$("input[name='estado']:checked").val(),o=$("#txtfecha_inicio_costosProyectos").val(),n=$("#txtfecha_fin_costosProyectos").val(),$("input[name='tipoProyecto[]']:checked").each(function(e,a){r.push($(this).val())})):(s="_proyectos_ipe",t=$("input[name='estado_ipe']:checked").val(),o=$("#txtfecha_inicio_costosProyectos_ipe").val(),n=$("#txtfecha_fin_costosProyectos_ipe").val(),$("input[name='tipoProyecto_ipe[]']:checked").each(function(e,a){r.push($(this).val())})),1==e&&(i=$("#txtnodo_id").val()),""===i)Swal.fire("Advertencia!","Seleccione un nodo","warning");else if(0==r.length)Swal.fire("Advertencia!","Seleccione por lo menos un tipo de proyecto","warning");else if(null==t)Swal.fire("Advertencia!","Seleccione un estado de proyecto","warning");else if(o>n)Swal.fire("Advertencia!","Seleccione fecha válidas","warning");else{let e=JSON.stringify(r);$.ajax({dataType:"json",type:"get",url:"/costos/costosDeProyectos/"+i+"/"+e+"/"+t+"/"+o+"/"+n+"/"+a,success:function(e){setValueInput(e,s),graficoCostos(e,1==a?graficosCostos.proyectos:graficosCostos.proyectos_ipe,"Proyectos")},error:function(e,a,t){alert("Error: "+t)}})}}function consultarCostoDeUnaActividad(){let e=$("#txtactividad_id").val();""===e?Swal.fire("Advertencia!","Seleccione una actividad","warning"):$.ajax({dataType:"json",type:"get",url:"/costos/costosDeUnaActividad/"+e,success:function(e){let a="_actividad";setValueInput(e,a),$("#txtgestor"+a).val(e.gestorActividad),$("label[for='txtgestor"+a+"']").addClass("active",!0),$("#txtlinea"+a).val(e.lineaActividad),$("label[for='txtlinea"+a+"']").addClass("active",!0),graficoCostos(e,graficosCostos.actividad,e.codigoActividad)},error:function(e,a,t){alert("Error: "+t)}})}function graficoCostos(e,a,t){Highcharts.chart(a,{exporting:{allowHTML:!0,chartOptions:{chart:{height:600,marginTop:110,events:{load:function(){this.renderer.image("http://drive.google.com/uc?export=view&id=1qLb9tjGI1hEnmEzQ6mPzxqv1zjMtxdMw",80,20,200,47).add(),this.renderer.image("http://drive.google.com/uc?export=view&id=1QLkYJuTk4JaT9nqHF7Rw6eF5p0G3or4C",290,20,200,47).add(),this.update({credits:{text:"Generado: "+Highcharts.dateFormat("%Y-%m-%d %H:%M:%S",Date.now())}})}}},legend:{y:-220},title:{align:"center",y:90}}},chart:{type:"column"},title:{text:"Costos - "+t},yAxis:{title:{text:"$ Pesos"},labels:{format:"$ {value}"}},xAxis:{type:"category"},legend:{enabled:!1,floating:!0},tooltip:{headerFormat:'<span style="font-size:11px">Costos</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>$ {point.y}</b><br/>'},plotOptions:{series:{dataLabels:{enabled:!0},animationLimit:1e3}},series:[{colorByPoint:!0,data:[{name:"Costos de Asesorias",y:e.costosAsesorias},{name:"Costos de Equipos",y:e.costosEquipos},{name:"Costos de Materiales",y:e.costosMateriales},{name:"Costos Administrativos",y:e.costosAdministrativos},{name:"Total de Costos",y:e.costosTotales}]}]})}function consultarPublicacionesOtros(){$("#tblnovedades_Otros").dataTable().fnDestroy(),$("#tblnovedades_Otros").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:"/publicacion/datatablePublicaciones",type:"get"},columns:[{width:"15%",data:"fecha_inicio",name:"fecha_inicio"},{data:"titulo",name:"titulo"},{width:"8%",data:"detalle",name:"detalle",orderable:!1}]})}function consultarPublicacionesDesarrollador(){$("#tblnovedades_Desarrollador").dataTable().fnDestroy(),$("#tblnovedades_Desarrollador").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:"/publicacion/datatablePublicaciones",type:"get"},columns:[{width:"15%",data:"codigo_publicacion",name:"codigo_publicacion"},{data:"fecha_inicio",name:"fecha_inicio"},{data:"titulo",name:"titulo"},{data:"role",name:"role"},{width:"8%",data:"detalle",name:"detalle",orderable:!1},{width:"8%",data:"edit",name:"edit",orderable:!1},{width:"8%",data:"update",name:"update",orderable:!1}]})}$(document).ready(function(){consultarPublicacionesOtros(),consultarPublicacionesDesarrollador()}),$("#txtcontenido").summernote({lang:"es-ES",height:300}),$("#txtfecha_inicio").bootstrapMaterialDatePicker({time:!1,date:!0,shortTime:!0,format:"YYYY-MM-DD",language:"es",weekStart:1,cancelText:"Cancelar",okText:"Guardar"}),$("#txtfecha_fin").bootstrapMaterialDatePicker({time:!1,date:!0,shortTime:!0,format:"YYYY-MM-DD",language:"es",weekStart:1,cancelText:"Cancelar",okText:"Guardar"});
