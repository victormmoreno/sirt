function inhabilitarFuncionarios(e,t){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de inhabilitar los funcionarios de este nodo?",text:"Al hacerlo estás bloqueando el acceso al sistema de todos los funcionarios de este nodo, luego los deberás volver a inhabilitar desde el menú de usuarios.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, inhabilitar funcionarios!"}).then(e=>{e.value&&(location.href=t)})}function detallesIdeasDelEntrenamiento(e){$.ajax({dataType:"json",type:"get",url:host_url+"/taller/"+e,data:{identrenamiento:e}}).done(function(e){$("#ideasEntrenamiento").empty(),null!=e&&($("#fechasEntrenamiento").empty(),$("#fechasEntrenamiento").append("<span class='cyan-text text-darken-3'>Fecha del taller de fortalecimiento: </span>"+e[0].fecha_sesion1+"<br>"),$.each(e,function(e,t){$("#ideasEntrenamiento").append("<tr><td>"+t.codigo_idea+" - "+t.nombre_proyecto+"</td><td>"+t.confirmacion+"</td><td>"+t.asistencia1+"</td></tr>")}),$("#modalIdeasEntrenamiento").openModal())})}function consultarEntrenamientosPorNodo(e){$("#entrenamientosPorNodo_table").dataTable().fnDestroy(),$("#entrenamientosPorNodo_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:host_url+"/taller/consultarEntrenamientosPorNodo/"+e,type:"get",data:{filter_nodo:$("#filter_nodo").val()}},columns:[{title:"Código del taller",data:"codigo_entrenamiento",name:"codigo_entrenamiento"},{data:"fecha_sesion1",name:"fecha_sesion1"},{width:"8%",data:"details",name:"details",orderable:!1},{width:"8%",data:"evidencias",name:"evidencias",orderable:!1}]})}function ajaxSendFormEntrenamiento(e,t,a,o){$.ajax({type:e.attr("method"),url:a,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),mensajesEntrenamientoCreate(e)},error:function(e,t,a){alert("Error: "+a)}})}function mensajesEntrenamientoCreate(e){"error_form"!=e.state&&Swal.fire({title:e.title,html:e.msg,type:e.type,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"registro"==e.state&&setTimeout(function(){window.location.href=e.url},1500),"update"==e.state&&setTimeout(function(){window.location.href=e.url},1500)}function noRepeatIdeasTaller(e){let t=e,a=!0,o=document.getElementsByName("ideas_taller[]");for(x=0;x<o.length;x++)if(o[x].value==t){a=!1;break}return a}function getValorConfirmacion(){return $("#txtconfirmacion").is(":checked")?1:0}function getValorAsistencia(){return $("#txtasistencia").is(":checked")?1:0}function addIdeaToEntrenamiento(){let e=$("#txtidea_taller").val(),t=getValorConfirmacion(),a=getValorAsistencia();0==e?Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,type:"error",title:"Estás ingresando mal los datos"}):0==noRepeatIdeasTaller(e)?Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"La idea de proyecto ya se encuentra asociada al taller!"}):pintarIdeaEnLaTablaTaller(e,t,a)}function pintarIdeaEnLaTablaTaller(e,t,a){$.ajax({dataType:"json",type:"get",url:host_url+"/idea/detallesIdea/"+e}).done(function(e){let o=prepararFilaEnLaTablaDeIdeasTaller(e,t,a);$("#tblIdeasEntrenamientoForm").append(o),Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,type:"success",title:"La idea de proyecto se asoció con éxito al taller"}),reiniciarCamposTaller()})}function reiniciarCamposTaller(){$("#txtidea_taller").val("0"),$("#txtidea_taller").select2()}function prepararFilaEnLaTablaDeIdeasTaller(e,t,a){let o=e.detalles.id;return'<tr class="selected" id=ideaAsociadaTaller'+o+'><td><input type="hidden" name="ideas_taller[]" value="'+o+'">'+e.detalles.codigo_idea+" - "+e.detalles.nombre_proyecto+'</td><td><input type="hidden" name="confirmaciones[]" value="'+t+'">'+getYesOrNot(t)+'</td><td><input type="hidden" name="asistencias[]" value="'+a+'">'+getYesOrNot(a)+'</td><td><a class="waves-effect bg-danger white-text btn" onclick="eliminarIdeaDelTaller('+o+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function eliminarIdeaDelTaller(e){$("#ideaAsociadaTaller"+e).remove()}function getYesOrNot(e){return 0==e?"No":"Si"}$(document).ready(function(){$("#linea_administrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,ajax:{url:host_url+"/lineas"},columns:[{data:"abreviatura",name:"abreviatura"},{data:"nombre",name:"nombre"},{data:"show",name:"show",orderable:!1},{data:"action",name:"action",orderable:!1}]})}),$(document).ready(function(){$("#linea_dinamizador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,ajax:{url:host_url+"/lineas"},columns:[{data:"abreviatura",name:"abreviatura"},{data:"nombre",name:"nombre"},{data:"action",name:"action",orderable:!1}]})}),$(document).ready(function(){$("#nodos_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,lengthChange:!0,responsive:!0,bSort:!1,dom:"Bfrtip",buttons:[{extend:"csv",text:"exportar csv",exportOptions:{columns:":visible"}},{extend:"excel",exportOptions:{columns:":visible"}},{extend:"pdf",exportOptions:{columns:":visible"}}],ajax:{url:host_url+"/nodo"},columns:[{data:"centro",name:"centro"},{data:"nodos",name:"nodos"},{data:"direccion",name:"direccion"},{data:"ubicacion",name:"ubicacion"},{data:"detail",name:"detail",orderable:!1}]})}),$.fn.pageMe=function(e){var t=$.extend({activeColor:"blue",perPage:10,showPrevNext:!1,nextText:"",prevText:"",hidePageNumbers:!1},e),a=this.find("tbody"),o=t.perPage,n=a.children(),i=$(".pager");void 0!==t.childSelector&&(n=a.find(t.childSelector)),void 0!==t.pagerSelector&&(i=$(t.pagerSelector));var r=n.size(),s=Math.ceil(r/o);i.data("curr",0),t.showPrevNext&&$('<li><a href="#" class="prev_link" title="'+t.prevText+'"><i class="material-icons">chevron_left</i></a></li>').appendTo(i);for(var l=0;s>l&&0==t.hidePageNumbers;)$('<li class="waves-effect"><a href="#" class="page_link">'+(l+1)+"</a></li>").appendTo(i),l++;function c(e){var a=e*o,r=a+o;n.css("display","none").slice(a,r).show(),e>=1?i.find(".prev_link").show():i.find(".prev_link").hide(),e<s-1?i.find(".next_link").show():i.find(".next_link").hide(),i.data("curr",e),i.children().removeClass("active "+t.activeColor),i.children().eq(e+1).addClass("active "+t.activeColor)}t.showPrevNext&&$('<li><a href="#" class="next_link"  title="'+t.nextText+'"><i class="material-icons">chevron_right</i></a></li>').appendTo(i),i.find(".page_link:first").addClass("active"),i.find(".prev_link").hide(),s<=1&&i.find(".next_link").hide(),i.children().eq(1).addClass("active "+t.activeColor),n.hide(),n.slice(0,o).show(),i.find("li .page_link").click(function(){return c($(this).html().valueOf()-1),!1}),i.find("li .prev_link").click(function(){return c(parseInt(i.data("curr"))-1),!1}),i.find("li .next_link").click(function(){return goToPage=parseInt(i.data("curr"))+1,c(goToPage),!1})},$(document).ready(function(){$("#txtfecha_sesion1").bootstrapMaterialDatePicker({time:!1,date:!0,shortTime:!0,format:"YYYY-MM-DD",language:"es",weekStart:1,cancelText:"Cancelar",okText:"Guardar"}).on("change",function(e,t){$("#txtsegundasesion").bootstrapMaterialDatePicker("setMinDate",t)})}),$(document).on("submit","form#formEntrenamientosCreate",function(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de guardar esta información?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, guardar"}).then(t=>{if(t.value){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),o=new FormData($(this)[0]),n=a.attr("action");ajaxSendFormEntrenamiento(a,o,n,"create")}})}),$(document).ready(function(){let e=$("#filter_nodo").val(),t=$("#filter_year_ideas").val(),a=$("#filter_state").val(),o=$("#filter_vieneconvocatoria").val(),n=$("#filter_convocatoria").val();consultarIdeasDelTalento(),""!=e&&null!=e||""==t||""==a||""==o||""!=n&&null!=n?""==e&&null==e||""==t||""==a||""==o||""==n&&null==n?$("#ideas_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():idea.fill_datatatables_ideas(e,t,a,o,n):idea.fill_datatatables_ideas(e=null,t,a,o,n=null)}),$("#filter_idea").click(function(){let e=$("#filter_nodo").val(),t=$("#filter_year_ideas").val(),a=$("#filter_state").val(),o=$("#filter_vieneconvocatoria").val(),n=$("#filter_convocatoria").val();$("#ideas_data_table").dataTable().fnDestroy(),""!=e&&null!=e||""==t||""==a||""==o||""!=n&&null!=n?""==e&&null==e||""==t||""==a||""==o||""==n&&null==n?($("#ideas_data_action_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},pageLength:20,lengthChange:!1}).clear().draw(),$("#ideas_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw()):idea.fill_datatatables_ideas(e,t,a,o,n):idea.fill_datatatables_ideas(e=null,t,a,o,n=null)}),$("#download_excel").click(function(){var e={filter_nodo:$("#filter_nodo").val(),filter_year:$("#filter_year_ideas").val(),filter_state:$("#filter_state").val(),filter_vieneConvocatoria:$("#filter_vieneconvocatoria").val(),filter_convocatoria:$("#filter_convocatoria").val()},t=host_url+"/idea/export?"+$.param(e);window.location=t});var idea={fill_datatatables_ideas:function(e=null,t="",a="",o="",n=null){$("#ideas_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,pageLength:20,order:[[1,"desc"]],ajax:{url:host_url+"/idea/datatable_filtros",type:"get",data:{filter_nodo:e,filter_year:t,filter_state:a,filter_vieneConvocatoria:o,filter_convocatoria:n}},columns:[{data:"nodo",name:"nodo"},{data:"codigo_idea",name:"codigo_idea"},{data:"created_at",name:"created_at"},{data:"persona",name:"persona"},{data:"correo_contacto",name:"correo_contacto"},{data:"telefono_contacto",name:"telefono_contacto"},{data:"nombre_proyecto",name:"nombre_proyecto"},{data:"estado",name:"estado"},{data:"info",name:"info",orderable:!1}]})},getSelectConvocatoria:function(){let e=$("#txtconvocatoria").val();$("#txtnombreconvocatoria").attr("disabled","disabled"),1==e?$("#txtnombreconvocatoria").removeAttr("disabled").focus().val(""):($("#txtnombreconvocatoria").val(""),$("#txtnombreconvocatoria").attr("disabled","disabled"))},getSelectAvalEmpresa:function(){let e=$("#txtavalempresa").val();$("#txtempresa").attr("disabled","disabled"),1==e?$("#txtempresa").removeAttr("disabled").focus().val(""):($("#txtempresa").val(""),$("#txtempresa").attr("disabled","disabled"))},vieneConvocatoria:function(e){return 1==e?"Si":"No"},nombreConvocatoria:function(e,t){return 1==e?t:"No Aplica"},avalEmpresa:function(e){return 1==e?"Si":"No"},nombreEmpresa:function(e,t){return 1==e?t:"No Aplica"}};function cambiarEstadoIdeaDeProyecto(e,t){Swal.fire({title:"¿Desea cambiar el estado de la idea de proyecto a "+t+"?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí"}).then(a=>{a.value&&$.ajax({dataType:"json",type:"get",url:host_url+"/idea/updateEstadoIdea/"+e+"/"+t,success:function(e){Swal.fire({title:"El estado de la idea se ha cambiado exitosamente!",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Sí"}).then(t=>{window.location.replace(e.route)})},error:function(e,t,a){alert("Error: "+a)}})})}function detallesIdeaPorId(e){$.ajax({dataType:"json",type:"get",url:host_url+"/idea/modalIdeas/"+e}).done(function(e){$("#detalle_idea").empty(),null==e?swal("Ups!!!","Ha ocurrido un error","warning"):($("#detalle_idea").append(e.view),$("#modalInformacionIdea").openModal())})}function consultarIdeasDelTalento(){$("#ideas_talento").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,pageLength:20,order:[0,"desc"],lengthChange:!1,ajax:{url:host_url+"/idea/datatable_filtros",type:"get",data:{filter_nodo:null,filter_year:null,filter_state:null,filter_vieneConvocatoria:null,filter_convocatoria:null}},columns:[{width:"15%",data:"codigo_idea",name:"codigo_idea"},{width:"8%",data:"nodo",name:"nodo"},{data:"nombre_proyecto",name:"nombre_proyecto"},{data:"estado",name:"estado"},{width:"8%",data:"info",name:"info",orderable:!1},{width:"8%",data:"postular",name:"postular",orderable:!1},{width:"8%",data:"edit",name:"edit",orderable:!1}]})}function confirmacionPostulacion(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de postular esta idea de proyecto?",text:"Una vez que se postule la idea de proyecto, ya no se podrá cambiar los datos de esta.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&document.frmPostularIdea.submit()})}function confirmacionInhabilitar(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de inhabilitar esta idea de proyecto?",text:"Esto quiere decir que esta idea de proyecto no se le podrá realizar un proceso en tecnoparque.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&document.frmInhabilitarIdea.submit()})}function consultarEmpresaTecnoparque(){let e=$("#txtnit").val();e.length<9||e.length>13?Swal.fire({title:"Advertencia!",text:"El nit de la empresa debe tener entre 9 y 13 dígitos!",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}):""==e?Swal.fire({title:"Advertencia!",text:"Digite el nit de la empresa!",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}):$.ajax({dataType:"json",type:"get",url:host_url+"/empresa/ajaxDetallesDeUnaEmpresa/"+e+"/nit",success:function(t){if(null==t.empresa)divEmpresaRegistrada.hide(),divRegistrarEmpresa.show(),$("#txtnit_empresa").val(e),$("label[for='txtnit_empresa']").addClass("active");else{let e;asignarValoresFRMIdeas(t),divEmpresaRegistrada.show(),divRegistrarEmpresa.hide(),reiniciarSede(),e=mostrarSedesEmpresa(t),$("#sedesEmpresaFormIdea").append(e)}},error:function(e,t,a){alert("Error: "+a)}})}function reiniciarSede(){$("#sedesEmpresaFormIdea").empty(),$("#txtsede_id").val(""),$("#txtnombre_sede_disabled").val("Primero debes seleccionar una sede")}function mostrarSedesEmpresa(e){let t="";return e.empresa.sedes.forEach(e=>{t+='<li class="collection-item">\n      '+e.nombre_sede+" - "+e.direccion+" "+e.ciudad.nombre+" ("+e.ciudad.departamento.nombre+')\n      <a href="#!" class="secondary-content" onclick="asociarSedeAIdeaProyecto('+e.id+')">Asociar esta sede de la empresa a la idea de proyecto</a></div>\n    </li>'}),t}function asociarSedeAIdeaProyecto(e){$.ajax({dataType:"json",type:"get",url:host_url+"/empresa/ajaxDetalleDeUnaSede/"+e,success:function(e){$("#txtsede_id").val(e.sede.id),$("#txtnombre_sede_disabled").val(e.sede.nombre_sede+" - "+e.sede.direccion+" "+e.sede.ciudad.nombre+" ("+e.sede.ciudad.departamento.nombre+")"),Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"La sede "+e.sede.nombre_sede+" se asoció a la idea de proyecto!"})},error:function(e,t,a){alert("Error: "+a)}})}function modalOpcionesFormulario(e){e.preventDefault(),Swal.fire({title:"Guardar información",html:'¿Qué desea hacer?<br><button type="button" role="button" tabindex="0" class="btnModalIdeaGuardar swal2-guardar-custom">Guardar</button><button type="button" role="button" tabindex="0" class="btnModalIdeaPostular swal2-postular-custom">Postular</button><button type="button" role="button" tabindex="0" class="btnModalIdeaCancelar swal2-cancelar-custom">Cancelar</button>',showCancelButton:!1,showConfirmButton:!1,type:"warning"})}function modalOpcionesFormularioModificar(e){e.preventDefault(),Swal.fire({title:"Modificar información",html:'¿Qué desea hacer?<br><button type="button" role="button" tabindex="0" class="btnModalIdeaModificar swal2-guardar-custom">Modificar</button><button type="button" role="button" tabindex="0" class="btnModalIdeaPostularModificar swal2-postular-custom">Postular</button><button type="button" role="button" tabindex="0" class="btnModalIdeaCancelar swal2-cancelar-custom">Cancelar</button>',showCancelButton:!1,showConfirmButton:!1,type:"warning"})}function enviarIdeaRegistro(e,t){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=null,o=null;"create"==t?(a=$("#frmIdea_Inicio"),o=new FormData($("#frmIdea_Inicio")[0])):(a=$("#frmIdea_Update"),o=new FormData($("#frmIdea_Update")[0]));var n=a.attr("action");ajaxSendFormIdea(a,o,n)}function asignarValoresFRMIdeas(e){$("#txtnombre_empresa_det").val(e.empresa.nombre),$("label[for='txtnombre_empresa_det']").addClass("active"),$("#txttipo_empresa_det").val(e.empresa.tipoempresa.nombre),$("label[for='txttipo_empresa_det']").addClass("active"),$("#txttamanho_empresa_det").val(e.empresa.tamanhoempresa.nombre),$("label[for='txttamanho_empresa_det']").addClass("active"),$("#txtsector_empresa_det").val(e.empresa.sector.nombre),$("label[for='txtsector_empresa_det']").addClass("active"),$("#txtnit_empresa").val(e.empresa.nit)}function ajaxSendFormIdea(e,t,a){$.ajax({type:e.attr("method"),url:a,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),mensajesIdeaForm(e)},error:function(e,t,a){alert("Error: "+a)}})}function pintarMensajeIdeaForm(e,t,a){Swal.fire({title:e,html:t,type:a,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function mensajesIdeaForm(e){let t="error",a="error",o="error";t=e.title,a=e.msg,o=e.type,"error_form"!=e.state&&pintarMensajeIdeaForm(t,a,o),"registro"==e.state&&setTimeout(function(){window.location.href=e.url},5e3),"update"==e.state&&setTimeout(function(){window.location.href=e.url},5e3)}function showInput_ProductoParecido(){$("#txtproducto_parecido").is(":checked")?divProductoParecido.show():divProductoParecido.hide()}function showInput_Reemplaza(){$("#txtreemplaza").is(":checked")?divReemplaza.show():divReemplaza.hide()}function showInput_Packing(){$("#txtpacking").is(":checked")?divPacking.show():divPacking.hide()}function showInput_RequisitosLegales(){$("#txtrequisitos_legales").is(":checked")?divRequisitosLegales.show():divRequisitosLegales.hide()}function showInput_BuscarEmpresa(){$("#txtidea_empresa").is(":checked")?divBuscarEmpresa.show():divBuscarEmpresa.hide()}function showInput_Certificaciones(){$("#txtrequiere_certificaciones").is(":checked")?divCertificaciones.show():divCertificaciones.hide()}function showInput_Recursos(){$("#txtrecursos_necesarios").is(":checked")?divRecursos.show():divRecursos.hide()}function showInput_Convocatoria(){$("#txtviene_convocatoria").is(":checked")?divConvocatoria.show():divConvocatoria.hide()}function showInput_AvalEmpresa(){$("#txtaval_empresa").is(":checked")?divAvalEmpresa.show():divAvalEmpresa.hide()}function banderaEmpresaIdea(){$("#bandera_empresa").is(":checked")?divIngresarEmpresaIdea.show():(divIngresarEmpresaIdea.hide(),divRegistrarEmpresa.hide(),divEmpresaRegistrada.hide())}function mensajesIdeaCreate(e){"registro"==e.state&&(Swal.fire({title:"Registro Exitoso",text:"La idea de proyecto ha sido registrada satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/idea")},1e3)),"no_registro"==e.state&&Swal.fire({title:"La idea de proyecto no se ha registrado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function mensajesIdeaUpdate(e){"update"==e.state&&(Swal.fire({title:"Modificación Exitosa",text:"La idea de proyecto ha sido modificada satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/idea")},1e3)),"no_update"==e.state&&Swal.fire({title:"La idea de proyecto no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function confirmacionDuplicacion(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de duplicar esta idea de proyecto?",text:"Esto se recomienda hacer en caso de que se quiera continuar con el proceso en tecnoparque.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&document.frmDuplicarIdea.submit()})}function confirmacionAceptacionPostulacion(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de aceptar la postulación de esta idea de proyecto?",input:"textarea",inputPlaceholder:"Puedes dejar algunas observaciones para el talento",type:"warning",inputValidator:e=>{if(!e)return"Se necesitan unas observaciones!";$("#txtobservacionesAceptacion").val(e)},inputAttributes:{maxlength:2100},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&document.frmAceptarPostulacionIdea.submit()})}function confirmacionRechazoPostulacion(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de devolver la postulación de esta idea de proyecto?",input:"textarea",inputPlaceholder:"Por favor, escriba los motivos por los cuales se está devolviendo la postulación de la idea de proyecto",type:"warning",inputValidator:e=>{if(!e)return"Los motivos por los cuales se devuelve la idea deben ser obligatorios!";$("#txtmotivosRechazo").val(e)},inputAttributes:{maxlength:2100},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Enviar observaciones!"}).then(e=>{e.value&&document.frmRechazarPostulacionIdea.submit()})}function enviarNotificacionResultadosCSIBT(e,t){$.ajax({type:"get",url:host_url+"/csibt/notificar_resultado/"+e+"/"+t,dataType:"json",processData:!1,success:function(e){"notifica"==e.state?notificacionExitosaDelResultado(e):notificacionFallidaDelResultado()},error:function(e,t,a){alert("Error: "+a)}})}function notificacionExitosaDelResultado(e){Swal.fire({title:"Notificación Exitosa!",text:"Se ha enviado un mensaje a la dirección: "+e.idea+" con los resultados del comité.",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function notificacionFallidaDelResultado(){Swal.fire({title:"Notificación Fallida!",text:"No se ha logrado enviar una mensaje con los resultados del comité al talento.",type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function confirmacionDuplicidad(e,t){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de duplicar esta idea de proyecto?",text:"Debes tener en cuenta que a partir de esta idea se va a registrar mas de un TRL.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&Swal.fire({title:"Verificación. ¿Está seguro(a) de duplicar esta idea de proyecto?",text:"Esta acción no se podrá revertir.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Continuar!"}).then(e=>{e.value&&(location.href=t)})})}function ajaxSendFormComiteAsignar(e,t,a,o){$.ajax({type:e.attr("method"),url:a,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),"create"==o&&mensajesComiteAsignarCreate(e)},error:function(e,t,a){alert("Error: "+a)}})}function mensajesComiteAsignarCreate(e){"registro"==e.state&&(Swal.fire({title:"Registro Exitoso",text:"La asignación de ideas de proyecto del comité ha sido registrada satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/csibt")},1e3)),"no_registro"==e.state&&Swal.fire({title:"La asignación de ideas de proyecto del comité no se ha registrado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function addIdeaComite(){let e=$("#txtideaproyecto").val(),t=$("#txthoraidea").val(),a=$("#txtdireccion").val();0==e||""==t||""==a?datosIncompletosAgendamiento():0==noRepeatIdeasAgendamiento(e)?ideaYaSeEncuentraAsociadaAgendamiento():pintarIdeaEnLaTabla(e,t,a)}function addGestorComite2(e){$("#gestor-"+e).is(":checked")?($("#txthorainiciogestor-"+e).removeAttr("disabled"),$("#txthorafingestor-"+e).removeAttr("disabled")):($("#gestorFila"+e).removeClass(),$("#txthorainiciogestor-"+e).attr("disabled","disabled"),$("#txthorainiciogestor-"+e).val(null),$("#txthorafingestor-"+e).attr("disabled","disabled"),$("#txthorafingestor-"+e).val(null))}function eliminarIdeaDelAgendamiento(e){$("#ideaAsociadaAgendamiento"+e).remove()}function eliminarGestorDelAgendamiento(e){$("#gestorAsociadoAgendamiento"+e).remove()}function ajaxSendFormComiteAgendamiento(e,t,a,o){$.ajax({type:e.attr("method"),url:a,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),"create"==o?mensajesComiteAgendamientoCreate(e):mensajesComiteAgendamientoUpdate(e)},error:function(e,t,a){alert("Error: "+a)}})}function mensajesComiteAgendamientoCreate(e){"registro"==e.state&&(Swal.fire({title:"Registro Exitoso",text:"El comité ha sido registrado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/csibt")},1e3)),"no_registro"==e.state&&Swal.fire({title:"El comité no se ha registrado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function mensajesComiteAgendamientoUpdate(e){"update"==e.state&&(Swal.fire({title:"Modificación Exitosa",text:"El comité se ha modificado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/csibt")},1e3)),"no_update"==e.state&&Swal.fire({title:"El comité no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function pintarIdeaEnLaTabla(e,t,a){$.ajax({dataType:"json",type:"get",url:host_url+"/idea/detallesIdea/"+e}).done(function(e){let o=prepararFilaEnLaTablaDeIdeas(e,t,a);$("#tblIdeasComiteCreate").append(o),ideaSeAsocioAlAgendamiento(),reiniciarCamposAgendamiento()})}function prepararFilaEnLaTablaDeIdeas(e,t,a){let o=e.detalles.id;return'<tr class="selected" id=ideaAsociadaAgendamiento'+o+'><td><input type="hidden" name="ideas[]" value="'+o+'">'+e.detalles.nombre_proyecto+'</td><td><input type="hidden" name="horas[]" value="'+t+'">'+t+'</td><td><input type="hidden" name="direcciones[]" value="'+a+'">'+a+'</td><td><a class="waves-effect bg-danger white-text btn" onclick="eliminarIdeaDelAgendamiento('+o+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function datosIncompletosAgendamiento(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,type:"error",title:"Estás ingresando mal los datos"})}function ideaSeAsocioAlAgendamiento(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,type:"success",title:"La idea de proyecto se asoció con éxito al comité"})}function ideaYaSeEncuentraAsociadaAgendamiento(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"La idea de proyecto ya se encuentra asociada al comité!"})}function noRepeatIdeasAgendamiento(e){let t=e,a=!0,o=document.getElementsByName("ideas[]");for(x=0;x<o.length;x++)if(o[x].value==t){a=!1;break}return a}function reiniciarCamposAgendamiento(){$("#txtideaproyecto").val("0"),$("#txtideaproyecto").select2(),$("#txthoraidea").val(""),$("#txtobservacionesidea").val(""),$("#txtdireccion").val(""),$("label[for='txtdireccion']").removeClass("active"),$("label[for='txthoraidea']").removeClass("active")}function ajaxSendFormComiteRealizado(e,t,a,o){$.ajax({type:e.attr("method"),url:a,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),"create"==o&&mensajesComiteRealizadoCreate(e)},error:function(e,t,a){alert("Error: "+a)}})}function mensajesComiteRealizadoCreate(e){"registro"==e.state&&(Swal.fire({title:"Registro Exitoso",text:"La calificación del comité ha sido registrada satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace("/csibt")},1e3)),"no_registro"==e.state&&Swal.fire({title:"La calificación del comité no se ha registrado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function consultarCsibtPorNodo(){let e=$("#txtnodo").val();$("#comitesDelNodo_table").dataTable().fnDestroy(),$("#comitesDelNodo_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:!1,ajax:{url:host_url+"/csibt/"+e+"/consultarCsibtPorNodo",type:"get"},columns:[{data:"codigo",name:"codigo"},{data:"fechacomite",name:"fechacomite"},{data:"estadocomite",name:"estadocomite"},{data:"observaciones",name:"observaciones"},{data:"details",name:"details",orderable:!1}]})}$(document).ready(function(){divProductoParecido=$("#productoParecido_content"),divReemplaza=$("#reemplaza_content"),divPacking=$("#packing_content"),divRequisitosLegales=$("#requisitosLegales_content"),divCertificaciones=$("#certificaciones_content"),divRecursos=$("#recursos_content"),divConvocatoria=$("#convocatoria_content"),divAvalEmpresa=$("#avalEmpresa_content"),divBuscarEmpresa=$("#buscarEmpresa_content"),divRegistrarEmpresa=$("#registrarEmpresa_content"),divEmpresaRegistrada=$("#consultarEmpresa_content"),divProductoParecido.hide(),divReemplaza.hide(),divPacking.hide(),divRequisitosLegales.hide(),divCertificaciones.hide(),divRecursos.hide(),divConvocatoria.hide(),divAvalEmpresa.hide(),divBuscarEmpresa.hide(),divRegistrarEmpresa.hide(),divEmpresaRegistrada.hide(),showInput_ProductoParecido(),showInput_Reemplaza(),showInput_Packing(),showInput_RequisitosLegales(),showInput_Certificaciones(),showInput_Recursos(),showInput_Convocatoria(),showInput_AvalEmpresa(),showInput_BuscarEmpresa()}),divRegistrarEmpresa=$("#divRegistrarEmpresa"),divIngresarEmpresaIdea=$("#divIngresarEmpresaIdea"),divEmpresaRegistrada=$("#divEmpresaRegistrada"),divIngresarEmpresaIdea.hide(),divRegistrarEmpresa.hide(),divEmpresaRegistrada.hide(),$(document).on("click",".btnModalIdeaCancelar",function(e){Swal.close()}),$(document).on("click",".btnModalIdeaGuardar",function(e){$("#txtopcionRegistro").val("guardar"),Swal.clickConfirm(),enviarIdeaRegistro(e,"create")}),$(document).on("click",".btnModalIdeaModificar",function(e){$("#txtopcionRegistro").val("guardar"),Swal.clickConfirm(),enviarIdeaRegistro(e,"update")}),$(document).on("click",".btnModalIdeaPostular",function(e){$("#txtopcionRegistro").val("postular"),Swal.clickConfirm(),enviarIdeaRegistro(e,"create")}),$(document).on("click",".btnModalIdeaPostularModificar",function(e){$("#txtopcionRegistro").val("postular"),Swal.clickConfirm(),enviarIdeaRegistro(e,"update")}),$(document).on("submit","form#formComiteAsignarCreate",function(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de guardar esta información?",text:"No podrás revertir estos cambios!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, guardar"}).then(t=>{if(t.value){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),o=new FormData($(this)[0]),n=a.attr("action");ajaxSendFormComiteAsignar(a,o,n,"create")}})}),$("#txthorafingestor").bootstrapMaterialDatePicker({time:!0,date:!1,shortTime:!0,format:"HH:mm",language:"es",weekStart:1,cancelText:"Cancelar",okText:"Guardar"}),$(document).on("submit","form#formComiteAgendamientoCreate",function(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de guardar esta información?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, guardar"}).then(t=>{if(t.value){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),o=new FormData($(this)[0]),n=a.attr("action");ajaxSendFormComiteAgendamiento(a,o,n,"create")}})}),$(document).on("submit","form#formComiteAgendamientoUpdate",function(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de guardar esta información?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, guardar"}).then(t=>{if(t.value){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),o=new FormData($(this)[0]),n=a.attr("action");ajaxSendFormComiteAgendamiento(a,o,n,"update")}})}),$(document).on("submit","form#formComiteRealizadoCreate",function(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de guardar esta información?",text:"Debes tener en cuenta mientras el dinamizador no asigne las ideas de proyectos a los expertos puedes cambiar esta información",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí, guardar"}).then(t=>{if(t.value){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var a=$(this),o=new FormData($(this)[0]),n=a.attr("action");ajaxSendFormComiteRealizado(a,o,n,"create")}})}),$(document).ready(function(){$("#empresasDeTecnoparque_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,ajax:{url:host_url+"/empresa/datatableEmpresasDeTecnoparque",type:"get"},columns:[{data:"nit",name:"nit"},{data:"nombre_empresa",name:"nombre_empresa"},{data:"sector_empresa",name:"sector_empresa"},{data:"details",name:"details",orderable:!1}]})}),$(document).on("submit","form#formRegisterCompany",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");$.ajax({type:t.attr("method"),url:o,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),printErroresFormulario(e),"error"==e.state&&0==e.url&&Swal.fire({title:"La empresa no se ha registrado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"success"==e.state&&0!=e.url&&(Swal.fire({title:"Registro Exitoso",text:e.message,type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.url},1e3))}})}),$(document).on("submit","form#formEditCompany",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");$.ajax({type:t.attr("method"),url:o,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),printErroresFormulario(e),"error_form"!=e.state&&Swal.fire({title:e.title,html:e.msg,type:e.type,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"update"==e.state&&setTimeout(function(){window.location.href=e.url},1500)}})}),$(document).on("submit","form#formEditCompanyHq",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");$.ajax({type:t.attr("method"),url:o,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),printErroresFormulario(e),"error_form"!=e.state&&Swal.fire({title:e.title,html:e.msg,type:e.type,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"update"==e.state&&setTimeout(function(){window.location.href=e.url},1500)}})}),$(document).on("submit","form#formAddCompanyHq",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");$.ajax({type:t.attr("method"),url:o,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),printErroresFormulario(e),"error_form"!=e.state&&Swal.fire({title:e.title,html:e.msg,type:e.type,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"store"==e.state&&setTimeout(function(){window.location.href=e.url},1500)}})}),$(document).on("submit","form#formEditResponsable",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");$.ajax({type:t.attr("method"),url:o,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),printErroresFormulario(e),"error_form"!=e.state&&Swal.fire({title:e.title,html:e.msg,type:e.type,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"update"==e.state&&setTimeout(function(){window.location.href=e.url},1500)}})}),$(document).on("submit","form#formSearchEmpresas",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault(),$("#empresas_encontradas").empty();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");$.ajax({type:t.attr("method"),url:o,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){0==e.empresas.length?$("#empresas_encontradas").append('\n                    <div class="row">\n                        <ul class="collection with-header">\n                            <li class="collection-header"><h5>No se encontraron empresas</h5></li>\n                        </ul>\n                    </div>\n                '):"search"==e.state&&($("#empresas_encontradas").append('<div class="row">'),$.each(e.empresas,function(t,a){let o=e.urls[t];$("#empresas_encontradas").append('\n                            <ul class="collection">\n                                <li class="collection-item"><h5>'+a.nit+" - "+a.nombre+'</h5></li>\n                                <li class="collection-item"><a href='+o+">Ver detalles</a></li>\n                            </ul>\n                        ")}),$("#empresas_encontradas").append("</div>")),$('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1)}})}),$("#txttipogrupo").change(function(){let e=$("#txttipogrupo").val();1==e?($("#txtinstitucion").val("SENA"),$("#labelins").addClass("active",!0)):0==e&&($("#txtinstitucion").val(""),$("#labelins").removeClass("active"))}),$(document).ready(function(){$("#grupoDeInvestigacionTecnoparque_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:host_url+"/grupo/datatableGruposInvestigacionDeTecnoparque",type:"get"},columns:[{data:"codigo_grupo",name:"codigo_grupo"},{data:"nombre",name:"nombre"},{data:"ciudad",name:"ciudad"},{data:"tipo_grupo",name:"tipo_grupo"},{data:"institucion",name:"institucion"},{data:"clasificacioncolciencias",name:"clasificacioncolciencias"},{data:"details",name:"details",orderable:!1},{data:"edit",name:"edit",orderable:!1}]})});var grupoInvestigacionIndex={consultarDetallesDeUnGrupoInvestigacion:function(e){$.ajax({dataType:"json",type:"get",url:host_url+"/grupo/ajaxDetallesDeUnGrupoInvestigacion/"+e}).done(function(e){if($("#modalDetalleDeUnGrupoDeInvestigacion_titulo").empty(),$("#modalDetalleDeUnGrupoDeInvestigacion_detalle_empresa").empty(),null==e)swal("Ups!!","Ha ocurrido un error","warning");else{let t="Interno";0==e.detalles.tipogrupo&&(t="Externo"),$("#modalDetalleDeUnGrupoDeInvestigacion_titulo").append("<span class='cyan-text text-darken-3'>Datos del Grupo de Investigación </span><br>"),$("#modalDetalleDeUnGrupoDeInvestigacion_detalle_empresa").append('<div class=\'row\'><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Código del Grupo de Investigacion: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.codigo_grupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nombre del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.entidad.nombre+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Correo del Grupo de Investigacion: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.entidad.email_entidad+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Ciudad del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.entidad.ciudad.nombre+" - "+e.detalles.entidad.ciudad.departamento.nombre+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Tipo de Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Institución que avala el grupo de investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.institucion+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Clasificación Colciencias del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.clasificacioncolciencias.nombre+"</span></div></div>"),$("#detalleDeUnGrupoDeInvestigacion").openModal()}})}};$(document).on("submit","form#formSearchUser",function(e){e.preventDefault(),$("#response-alert").empty();let t=$("#txttype_search").val(),a=$("#txtsearch_user").val(),o=new RegExp("^[0-9]{6,11}$");if(""==t)Swal.fire("Error","Por favor selecciona una opción","error");else if(1!=t||null!=a&&""!=a&&o.test(a))if(2!=t||null!=a&&""!=a&&/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a)){let e=$(this),t=new FormData($(this)[0]),a=e.attr("action");$.ajax({type:e.attr("method"),url:a,data:t,dataType:"json",cache:!1,dataType:"json",contentType:!1,processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),$("#response-alert").empty(),e.fail&&Swal.fire({title:"Registro Erróneo",html:"Estas ingresando mal los datos. "+errores,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),0==e.users.length?$("#response-alert").append('\n                        <div class="mailbox-list">\n                            <ul>\n                                <li>\n                                    <a class="mail-active">\n                                        <h4 class="center-align">no se encontraron resultados</h4>\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>'):200==e.status&&$.each(e.users,function(t,a){let o=e.urls[t];$("#response-alert").append('\n                            <div class="mailbox-list">\n                                <ul>\n                                    <li>\n                                        <a href="'+o+'" class="mail-active">\n                                            <h5 class="mail-author">'+a.documento+" - "+a.nombres+" "+a.apellidos+'</h5>\n                                            <p class="hide-on-small-and-down mail-text">Miembro desde '+userSearch.userCreated(a.created_at)+'</p>\n                                            <div class="position-top-right p f-12 mail-date"> Acceso al sistema: '+userSearch.state(a.estado)+"</div>\n                                        </a>\n                                    </li>\n                                </ul>\n                            </div>")})}})}else Swal.fire("Error","Por favor ingrese un correo electrónico válido","error");else Swal.fire("Error","Por favor ingrese un número de documento válido","error")});const userSearch={state:function(e){return e?"Si":"No"},userCreated:function(e){return null==e?"no registra":moment(e).format("LL")},changetextLabel:function(){let e=$("#txttype_search").val();$("#txtsearch_user").val(""),1==e?$("label[for='txtsearch_user']").text("Número de documento"):2==e&&$("label[for='txtsearch_user']").text("Correo Electrónico")}};$(document).ready(function(){$("#ocupaciones").select2({language:"es",isMultiple:!0}),estudios.getOtraOcupacion()});var estudios={getOtraOcupacion:function(e){$("#otraocupacion").hide();$(e).val();let t=$("#otra_ocupacion option:selected").text().match(/[A-Z][a-z]+/g);$("#otraocupacion").hide(),null!=t&&t.includes("Otra")&&$("#otraocupacion").show()}};$(document).on("submit","form#formEditUser",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");$.ajax({type:t.attr("method"),url:o,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){if($('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),e.fail){for(control in e.errors)$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();EditUser.printErroresFormulario(e)}"error"==e.state&&(Swal.fire({title:"La cuenta del usuario no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.url},1e3)),"success"==e.state&&(Swal.fire({title:"Modifciación Exitosa",text:"La cuenta del usuario ha sido modificada satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.url},1e3))}})});var EditUser={printErroresFormulario:function(e){if("error_form"==e.state){let t="";for(control in e.errors)t+=" </br><b> - "+e.errors[control]+" </b> ",$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();Swal.fire({title:"Advertencia!",html:"Estas ingresando mal los datos."+t,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}}};function printErrorsForm(e){if(e.fail){let t="";for(control in e.errors)t+=" </br><b> - "+e.errors[control]+" </b> ",$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show()}}$(document).on("submit","form#FormConfirmUser",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");$.ajax({type:t.attr("method"),url:o,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){if($('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),e.fail){for(control in e.errors)$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();EditUser.printErroresFormulario(e)}"error"==e.state&&0==e.url&&Swal.fire({title:"El Usuario no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"success"==e.state&&0!=e.url&&(Swal.fire({title:"Modifciación Exitosa",text:"El Usuario "+e.user.nombres+" "+e.user.apellidos+"  ha sido modificado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.url},1e3))},error:function(e,t,a){alert("Error: "+a)}})}),$(document).on("submit","form#form-update-role-nodo",function(e){e.preventDefault();let t=$(this),a=new FormData($(this)[0]),o=t.attr("action");$.ajax({type:t.attr("method"),url:o,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErrorsForm(e.data),e.data.fail?Swal.fire({title:"Modifciación Errónea",text:"Cuenta de usuario no actualizada, por favor intente nuevamente.",type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}):(Swal.fire({title:"Modifciación Exitosa",text:"Cuenta de usuario actualizada exitosamente.",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.data.url},1e3))},error:function(e,t,a){$('button[type="submit"]').removeAttr("disabled"),alert("Error: "+a)}})}),$(document).ready(function(){let e=$("#filter_rol").val(),t=$("#filter_nodo").val(),a=$("#filter_state").val(),o=$("#filter_year").val();$("#users_data_table").dataTable().fnDestroy(),""==t&&null==t||""==e&&null==e||""==a||""==o?""!=t&&null!=t&&null!=t||""!=e&&null!=e&&null!=e||""==a||""!=o&&null!=o&&null!=o?$("#users_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():UserIndex.fillDatatatablesUsers(t=null,e=null,a,o=null):UserIndex.fillDatatatablesUsers(t,e,a,o)});const UserIndex={fillDatatatablesUsers(e,t,a,o){$("#users_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,responsive:!0,order:[[1,"desc"]],ajax:{url:`${host_url}/usuarios`,type:"get",data:{filter_nodo:e,filter_role:t,filter_state:a,filter_year:o}},columns:[{data:"nodo",name:"nodo"},{data:"tipodocumento",name:"tipodocumento"},{data:"documento",name:"documento"},{data:"nombrecompleto",name:"nombrecompleto"},{data:"email",name:"email"},{data:"celular",name:"celular"},{data:"rols",name:"rols"},{data:"login",name:"login"},{data:"state",name:"state"},{data:"detail",name:"detail",searchable:!1,orderable:!1}]})}};$("#filter_user").click(function(){let e=$("#filter_rol").val(),t=$("#filter_nodo").val(),a=$("#filter_state").val(),o=$("#filter_year").val();$("#users_data_table").dataTable().fnDestroy(),""==t&&null==t||""==e||""==a||""==o?""!=t&&null!=t&&null!=t||""==e||""==a||""==o?$("#users_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():UserIndex.fillDatatatablesUsers(t=null,e,a,o):UserIndex.fillDatatatablesUsers(t,e,a,o)}),$("#download_users").click(function(){let e=$("#filter_rol").val(),t={filter_nodo:$("#filter_nodo").val(),filter_role:e,filter_state:$("#filter_state").val(),filter_year:$("#filter_year").val()},a=`${host_url}/usuarios/export?${$.param(t)}`;window.location=a}),$(document).on("submit","form#formEditProfile",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");$.ajax({type:t.attr("method"),url:o,data:a,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){if($('button[type="submit"]').removeAttr("disabled"),$('button[type="submit"]').prop("disabled",!1),$(".error").hide(),e.fail){for(control in e.errors)$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();EditProfileUser.printErroresFormulario(e)}"error"==e.state&&(Swal.fire({title:"Tu perfil no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.url},1e3)),"success"==e.state&&(Swal.fire({title:"Modifciación Exitosa",text:"Tu perfil ha sido actualizado exitosamente.",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.url},1e3))}})});var EditProfileUser={printErroresFormulario:function(e){if("error_form"==e.state){let t="";for(control in e.errors)t+=" </br><b> - "+e.errors[control]+" </b> ",$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();Swal.fire({title:"Advertencia!",html:"Estas ingresando mal los datos."+t,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}}},roleUserSession={setRoleSession:function(e){$(e).val();let t=$("#change-role option:selected").val();$.ajax({dataType:"json",type:"POST",data:{role:t,_token:$('meta[name="csrf-token"]').attr("content")},url:host_url+"/cambiar-role"}).done(function(e){null!=e.role?location.href=e.url:Swal.fire("Error!","Por favor, cierre sesión y vuelve a ingresar al sistema!","error")})}};function consultarIntervencionesEmpresaDelGestor(e){$("#IntervencionGestor_table").dataTable().fnDestroy(),$("#IntervencionGestor_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:host_url+"/intervencion/datatableIntervencionEmpresaDelGestor/0/"+e,data:function(e){e.codigo_articulacion=$("#codigo_articulacion_GestorTable").val(),e.nombre=$("#nombre_GestorTable").val(),e.estado=$("#estado_GestorTable").val(),e.search=$('input[type="search"]').val()}},columns:[{data:"codigo_articulacion",name:"codigo_articulacion"},{data:"nombre",name:"nombre"},{data:"estado",name:"estado"},{data:"details",name:"details",orderable:!1},{data:"entregables",name:"entregables",orderable:!1},{data:"edit",name:"edit",orderable:!1}]})}function detallesDeUnaIntervencion(e){$.ajax({dataType:"json",type:"get",url:host_url+"/intervencion/ajaxDetallesDeUnaArticulacion/"+e}).done(function(t){$("#articulacionDetalle_titulo").empty(),$("#detalleArticulacion").empty(),null==t.detalles?Swal.fire("Ups!!","Ha ocurrido un error","error"):($("#articulacionDetalle_titulo").append("<div class='valign-wrapper left material-icons'><a href='/excel/excelDeUnaArticulacion/"+e+"'><img class='btn btn-flat' src='https://img.icons8.com/color/48/000000/ms-excel.png'></a></div><span class='teal-text text-darken-3'>Código de la Intervención: </span><b>"+t.detalles.codigo_articulacion+"</b>"),$("#detalleArticulacion").append('<div class="row"><div class="col s12 m6 l6"><span class="teal-text text-darken-3">Nombre de la Articulación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.detalles.nombre+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="teal-text text-darken-3">Experto a cargo: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.detalles.gestor+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="teal-text text-darken-3">Fecha de Inicio: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.detalles.fecha_inicio+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="teal-text text-darken-3">Estado de la Articulación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.detalles.estado+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="teal-text text-darken-3">Tipo de Articulación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.detalles.tipoArticulacion+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="teal-text text-darken-3">Entregables: </span></div><div class="col s12 m6 l6"><span class="black-text"><a onclick="verDetallesDeLosEntregablesDeUnaIntervencionEmpresa('+t.detalles.id+')" class="btn btn-small teal darken-3">Pulse aquí para ver los entregables</a></span></div></div><div class="divider"></div>'),$("#articulacionDetalle").openModal())})}function verDetalleDeLaEntidadAsocidadALaArticulacion(e){$.ajax({dataType:"json",type:"get",url:host_url+"/articulacion/consultarEntidadDeLaArticulacion/"+e}).done(function(e){$("#detalleDeUnaArticulacion_titulo").empty(),$("#detalleArticulacion_body").empty(),null==e.detalles?Swal.fire("Ups!!","Ha ocurrido un error","error"):"Empresa"==e.articulacion.tipo_articulacion?($("#detalleDeUnaArticulacion_titulo").append("<span class='cyan-text text-darken-3'>Datos de la Empresa </span><br>"),$("#detalleArticulacion_body").append('<div class=\'row\'><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nit de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.nit+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nombre de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.nombre_empresa+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Dirección de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.direccion+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Ciudad de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.ciudad+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Email de la Empresa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.email_entidad+"</span></div></div>"),$("#detalleArticulacion_modal").openModal()):"Grupo de Investigación"==e.articulacion.tipo_articulacion?($("#detalleDeUnaArticulacion_titulo").append("<span class='cyan-text text-darken-3'>Datos del Grupo de Investigación </span><br>"),$("#detalleArticulacion_body").append('<div class=\'row\'><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Código del Grupo de Investigacion: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.codigo_grupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nombre del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.nombre_grupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Correo del Grupo de Investigacion: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.correo_grupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Ciudad del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.ciudad+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Tipo de Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.tipogrupo+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Institución que avala el grupo de investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.institucion+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Clasificación Colciencias del Grupo de Investigación: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.detalles.nombre_clasificacion+"</span></div></div>"),$("#detalleArticulacion_modal").openModal()):($("#talentosDeUnaArticulacion_titulo").empty(),$("#talentosDeUnaArticulacion_table").empty(),$("#talentosDeUnaArticulacion_titulo").append("<span class='cyan-text text-darken-3'>Datos de los Talentos </span><br>"),$.each(e.detalles,function(e,t){let a="Autor";1==t.talento_lider&&(a="Talento Líder"),$("#talentosDeUnaArticulacion_table").append("<tr><td>"+a+"</td><td>"+t.talento+"</td></tr>")}),$("#talentosDeUnaArticulacion_modal").openModal())})}function eliminarIntervencionEmpresaPorId_event(e,t){Swal.fire({title:"¿Desea eliminar la Intervención a Empresa?",text:"Al hacer esto, todo lo relacionado con esta Intervención a Empresa será eliminado de la base de datos, eso incluye usos de infraestructura y los archivos subidos al servidor!",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",cancelButtonText:"No",confirmButtonText:"Sí, eliminar!"}).then(t=>{t.value&&eliminarIntervencionEmpresaPorId_moment(e)})}function eliminarIntervencionEmpresaPorId_moment(e){$.ajax({dataType:"json",type:"get",url:host_url+"/intervencion/eliminarArticulacion/"+e,success:function(e){e.retorno?(Swal.fire("Eliminación Exitosa!","La Intervención a Empresa se ha eliminado completamente!","success"),location.href="/intervencion"):Swal.fire("Eliminación Errónea!","La Intervención a Empresa no se ha eliminado!","error")},error:function(e,t,a){alert("Error: "+a)}})}function verHorasDeExpertosEnProyecto(e){$.ajax({dataType:"json",type:"get",url:host_url+"/proyecto/consultarHorasExpertos/"+e}).done(function(e){$("#horasAsesoriasExpertosPorProyeto_table").empty(),0==e.horas.length?Swal.fire({title:"Ups!!",text:"No se encontraron horas de asesorías de los expertos en este proyecto!",type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}):($("#horasAsesoriasExpertosPorProyeto_titulo").empty(),$("#horasAsesoriasExpertosPorProyeto_titulo").append("<span class='cyan-text text-darken-3'>Horas de los experto en el proyecto</span>"),$.each(e.horas,function(e,t){$("#horasAsesoriasExpertosPorProyeto_table").append("<tr><td>"+t.experto+"</td><td>"+t.horas_directas+"</td><td>"+t.horas_indirectas+"</td></tr>")}),$("#horasAsesoriasExpertosPorProyeto_modal").openModal())})}function consultarProyectosDeTalentos(){$("#tblProyectos_Master").dataTable().fnDestroy(),$("#tblProyectos_Master").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],lengthChange:!1,ajax:{url:host_url+"/proyecto/datatableProyectosDelTalento/",data:function(e){e.codigo_proyecto=$(".codigo_proyecto").val(),e.nombre=$(".nombre").val(),e.nombre_fase=$(".nombre_fase").val(),e.search=$('input[type="search"]').val()}},columns:[{width:"15%",data:"codigo_proyecto",name:"codigo_proyecto"},{data:"nombre_gestor",name:"nombre_gestor"},{data:"nombre",name:"nombre"},{data:"nombre_fase",name:"nombre_fase"},{width:"8%",data:"info",name:"info",orderable:!1},{width:"8%",data:"proceso",name:"proceso",orderable:!1}]})}function verTalentosDeUnProyecto(e){$.ajax({dataType:"json",type:"get",url:host_url+"/proyecto/ajaxConsultarTalentosDeUnProyecto/"+e}).done(function(e){$("#talentosAsociadosAUnProyecto_table").empty(),0!=e.talentos.length?($("#talentosAsociadosAUnProyecto_titulo").empty(),$("#talentosAsociadosAUnProyecto_titulo").append("<span class='cyan-text text-darken-3'>Código de Proyecto: </span>"+e.proyecto),$.each(e.talentos,function(e,t){let a="",o=t.celular;"Talento Líder"==t.rol&&(a='<i class="material-icons green-text left">face</i>'),null==t.celular&&(o=""),$("#talentosAsociadosAUnProyecto_table").append("<tr><td>"+a+" "+t.rol+"</td><td>"+t.talento+"</td><td>"+t.email+"</td><td>"+o+"</td></tr>")}),$("#talentosAsociadosAUnProyecto_modal").openModal()):Swal.fire({title:"Ups!!",text:"No se encontraron talentos asociados a este proyecto!",type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})})}function preguntaReversar(e,t,a){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de reversar este proyecto a la fase de "+a+"?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&sendReversarProyecto(t,a)})}function sendReversarProyecto(e,t){$.ajax({type:"get",url:host_url+"/proyecto/reversar/"+e+"/"+t,dataType:"json",success:function(e){Swal.fire({title:e.msg,type:e.type_alert,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Ok!"})},error:function(e,t,a){alert("Error: "+a)}})}$(document).ready(function(){$("#sublineas_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:host_url+"/sublineas",type:"get"},columns:[{data:"nombre",name:"nombre"},{data:"linea",name:"linea"},{data:"edit",name:"edit",orderable:!1}]})}),$("#codigo_articulacion_GestorTable").keyup(function(){$("#IntervencionGestor_table").DataTable().draw()}),$("#nombre_GestorTable").keyup(function(){$("#IntervencionGestor_table").DataTable().draw()}),$("#estado_GestorTable").keyup(function(){$("#IntervencionGestor_table").DataTable().draw()}),$(document).ready(function(){consultarProyectosUnNodoPorAnho()});var infoActividad={infoDetailActivityModal:function(e){"string"==typeof e&&$.ajax({dataType:"json",type:"get",url:host_url+"/proyecto/detalle/"+e}).done(function(e){$("#actividad_titulo").empty(),$("#detalleActividad").empty(),$("#actividad_titulo").append("<span class='primary-text'>"+e.data.proyecto.codigo_proyecto+" - "+e.data.proyecto.nombre+" </span><br>"),null!==e.data.proyecto?infoActividad.openIsProyect(e):null!==e.data.articulacion&&infoActividad.openIsArticulacion(e),$("#info_actividad_modal").openModal()})},openIsProyect:function(e){$("#detalleActividad").append(`\n            <table class="striped centered">\n                <TR>\n                    <TH class="secondary-text" width="25%">Código Proyecto</TH>\n                    <TD width="25%">${infoActividad.showInfoNull(e.data.proyecto.codigo_proyecto)}</TD>\n                    <TH class="secondary-text" width="25%" >Nombre Proyecto</TH>\n                    <TD width="25%" COLSPAN=3>${infoActividad.showInfoNull(e.data.proyecto.nombre)}</TD>\n                </TR>\n                <TR>\n                    <TH class="secondary-text" width="25%">Experto</TH>\n                    <TD width="25%">${infoActividad.showInfoNull(e.data.proyecto.asesor.documento)} - ${e.data.proyecto.asesor.nombres} ${e.data.proyecto.asesor.apellidos}</TD>\n                    <TH class="secondary-text" width="25%">Correo Electrónico</TH>\n                    <TD width="25%" COLSPAN=3>${infoActividad.showInfoNull(e.data.proyecto.asesor.email)}</TD>\n                </TR>\n            </table>\n            <div class="right">\n                <small>\n                    <b class="secondary-text">Cantidad de usos de infraestructura:  </b>\n                    ${infoActividad.showInfoNull(e.data.total_usos)}\n                </small>\n            </div>\n            <div class="divider mailbox-divider"></div>\n            <div class="center">\n                <span class="mailbox-title primary-text">\n                    <i class="material-icons">group</i>\n                    Talentos que participan en el proyecto y dueño(s) de la propiedad intelectual.\n                </span>\n            </div>\n            <div class="divider mailbox-divider"></div>\n                <div class="row">\n                <div class="col s12 m12 l12">\n                        <div class="card-transparent">\n                            <h5 class="center primary-text">Talentos que participan en el proyecto</h5>\n                            <table>\n                                <thead class="bg-primary white-text">\n                                    <tr>\n                                        <th style="width: 10%">Talento Interlocutor</th>\n                                        <th style="width: 40%">Talento</th>\n                                        <th style="width: 20%">Correo</th>\n                                        <th style="width: 15%">Telefono</th>\n                                        <th style="width: 15%">Celular</th>\n                                    </tr>\n                                </thead>\n                                <tbody id="detalleTalentos">\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="card-transparent col s12 m12 l12">\n                        <h5 class="center primary-text">Dueño(s) de la propiedad intelectual</h5>\n                        <div class="row">\n                            <div class="col s12 m4 l4">\n                                <div class="card-transparent">\n                                    <ul class="collection with-header">\n                                        <li class="collection-header"><h5 class="secondary-text">Empresas</h5></li>\n                                        <div id="detalleEmpresas"></div>\n                                    </ul>\n                                </div>\n                            </div>\n                            <div class="col s12 m4 l4">\n                                <div class="card-transparent">\n                                    <ul class="collection with-header">\n                                        <li class="collection-header"><h5 class="secondary-text">Personas (Talentos)</h5></li>\n                                        <div id="detallePropiedadTalentos"></div>\n                                    </ul>\n                                </div>\n                            </div>\n                            <div class="col s12 m4 l4">\n                                <div class="card-transparent">\n                                    <ul class="collection with-header">\n                                        <li class="collection-header"><h5 class="secondary-text">Grupos de Investigación</h5></li>\n                                        <div id="detallePropiedadGrupo"></div>\n                                    </ul>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>`),infoActividad.showTalentos(e.data.proyecto.talentos),infoActividad.showPropiedadIntelectualEmpresas(e.data.proyecto.sedes),infoActividad.showPropiedadIntelectualTalentos(e.data.proyecto.users_propietarios),infoActividad.showPropiedadIntelectualGrupo(e.data.proyecto.gruposinvestigacion)},openIsArticulacion:function(e){$("#detalleActividad").append(`\n            <table class="striped centered">\n                <TR>\n                    <TH width="25%">Código Articulación</TH>\n                    <TD width="25%">${infoActividad.showInfoNull(e.data.actividad.codigo_actividad)}</TD>\n                    <TH width="25%" >Nombre de Articulación</TH>\n                    <TD width="25%" COLSPAN=3>${infoActividad.showInfoNull(e.data.actividad.nombre)}</TD>\n                </TR>\n                <TR>\n                    <TH width="25%">Experto</TH>\n                    <TD width="25%">${infoActividad.showInfoNull(e.data.actividad.articulacion_proyecto.articulacion.asesor.documento)} - ${e.data.actividad.articulacion_proyecto.articulacion.asesor.nombres} ${e.data.actividad.articulacion_proyecto.articulacion.asesor.apellidos}</TD>\n                    <TH width="25%">Correo Electrónico</TH>\n                    <TD width="25%" COLSPAN=3>${infoActividad.showInfoNull(e.data.actividad.articulacion_proyecto.articulacion.asesor.email)}</TD>\n                </TR>\n            </table>\n            <div class="right">\n                <small>\n                    <b>Cantidad de usos de infraestructura:  </b>\n                    ${infoActividad.showInfoNull(e.data.total_usos)}\n                </small>\n            </div>\n            <div class="divider mailbox-divider"></div>\n            <div class="center">\n                <span class="mailbox-title">\n                    <i class="material-icons">group</i>\n                    Talentos que participan en la articulación.\n                </span>\n            </div>\n            <div class="divider mailbox-divider"></div>\n                <div class="row">\n                <div class="col s12 m12 l12">\n                        <div class="card-panel blue lighten-5">\n                            <h5 class="center">Talentos que participan en la Articulación</h5>\n                            <table>\n                                <thead>\n                                    <tr>\n                                        <th style="width: 10%">Talento Interlocutor</th>\n                                        <th style="width: 40%">Talento</th>\n                                        <th style="width: 20%">Correo</th>\n                                        <th style="width: 15%">Telefono</th>\n                                        <th style="width: 15%">Celular</th>\n                                    </tr>\n                                </thead>\n                                <tbody id="detalleTalentos">\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>`),infoActividad.showTalentos(e.data.actividad.articulacion_proyecto.talentos)},showDateActivity:function(e){return null===e||""===e?"El proceso no se ha cerrado":e},showInfoNull:function(e){return null===e||""===e?"No se encontraron resultados":e},validateDataIsTRL:function(e){return 0==e?"TRL 6":"TRL 7 - TRL 8"},validateDataIsBoolean:function(e){return 0==e?"NO":"SI"},dataPerteneceEconomiaNaranja:function(e){return 0==e.economia_naranja?"NO":1==e.economia_naranja?" SI ("+e.tipo_economianaranja+")":""},dataDirigidoDiscapacitados:function(e){return 0==e.dirigido_discapacitados?"NO":1==e.dirigido_discapacitados?"SI ("+e.tipo_discapacitados+")":""},dataArticuladaCTI:function(e){return 0==e.art_cti?"NO":1==e.art_cti?" SI ("+e.nom_act_cti+")":""},showTalentos:function(e){let t="";t=e.length>0?e.map(function(e){return`<tr class="selected">\n                            <td> ${infoActividad.validateDataIsBoolean(e.pivot.talento_lider)}</td>\n                            <td>${infoActividad.showInfoNull(e.documento)} - ${infoActividad.showInfoNull(e.nombres)} ${infoActividad.showInfoNull(e.apellidos)}</td>\n                            <td>${infoActividad.showInfoNull(e.email)}</td>\n                            <td>${infoActividad.showInfoNull(e.telefono)}</td>\n                            <td>${infoActividad.showInfoNull(e.celular)}</td>\n                        </tr>`}):'<tr class="selected">\n                        <td COLSPAN=4>No se encontraron resultados</td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                        <td></td>\n                    </tr>',document.getElementById("detalleTalentos").innerHTML=t},showPropiedadIntelectualEmpresas:function(e){let t="";t=e.length>0?e.map(function(e){return`\n                        <li class="collection-item">\n                        ${infoActividad.showInfoNull(e.empresa.nit)} - ${infoActividad.showInfoNull(e.empresa.nombre)} (${infoActividad.showInfoNull(e.nombre_sede)})\n                        </li>`}):'<li class="collection-item">\n                    No se han encontrado empresas dueña(s) de la propiedad intelectual.\n                </li>',document.getElementById("detalleEmpresas").innerHTML=t},showPropiedadIntelectualTalentos:function(e){let t="";t=e.length>0?e.map(function(e){return`<li class="collection-item">\n                        ${infoActividad.showInfoNull(e.documento)} - ${infoActividad.showInfoNull(e.nombres)} ${infoActividad.showInfoNull(e.apellidos)}\n                        </li>`}):'<li class="collection-item">\n                    No se han encontrado talento(s) dueño(s) de la propiedad intelectual.\n                </li>',document.getElementById("detallePropiedadTalentos").innerHTML=t},showPropiedadIntelectualGrupo:function(e){let t="";t=e.length>0?e.map(function(e){return`<li class="collection-item">\n                        ${infoActividad.showInfoNull(e.codigo_grupo)} - ${infoActividad.showInfoNull(e.entidad.nombre)}\n                        </li>`}):'<li class="collection-item">\n            No se han encontrado grupo(s) de investigación dueño(s) de la propiedad intelectual.\n                </li>',document.getElementById("detallePropiedadGrupo").innerHTML=t}};function consultarProyectosUnNodoPorAnho(){let e=$("#anho_proyectoPorNodoYAnho").val(),t=$("#nodo_proyectoPorNodoYAnho").val();$("#tblProyectos_Master").dataTable().fnDestroy(),$("#tblProyectos_Master").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],lengthChange:!1,ajax:{url:host_url+"/proyecto/datatableProyectosAnho/"+t+"/"+e,data:function(e){e.codigo_proyecto=$("#codigo_proyecto_tblProyectos_Master").val(),e.gestor=$("#gestor_tblProyectos_Master").val(),e.nombre=$("#nombre_tblProyectos_Master").val(),e.sublinea_nombre=$("#sublinea_nombre_tblProyectos_Master").val(),e.nombre_fase=$("#estado_nombre_tblProyectos_Master").val(),e.search=$('input[type="search"]').val()}},columns:[{width:"15%",data:"codigo_proyecto",name:"codigo_proyecto"},{data:"gestor",name:"gestor"},{data:"nombre",name:"nombre"},{data:"sublinea_nombre",name:"sublinea_nombre"},{data:"nombre_fase",name:"nombre_fase"},{width:"8%",data:"info",name:"info",orderable:!1},{width:"8%",data:"proceso",name:"proceso",orderable:!1}]})}function preguntaRechazarAprobacionProyecto(e){e.preventDefault(),$('button[type="submit"]').attr("disabled",!0),Swal.fire({title:"¿Está seguro(a) de no aprobar esta fase del proyecto?",input:"text",type:"warning",inputValidator:e=>{if(!e)return"Las observaciones deben ser obligatorias!";$("#decision").val("rechazado"),$("#motivosNoAprueba").val(e)},inputAttributes:{maxlength:100,placeHolder:"¿Por qué?"},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Enviar observaciones!"}).then(e=>{e.value&&document.frmAprobacionProyecto.submit()})}function preguntaAprobacion(e){e.preventDefault(),$('button[type="submit"]').attr("disabled",!0),Swal.fire({title:"¿Está seguro(a) de aprobar esta fase del proyecto?",text:"Al hacerlo estás aceptando y aprobando toda la información de esta fase, los documento adjuntos y las asesorias recibidas.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{e.value&&($("#decision").val("aceptado"),document.frmAprobacionProyecto.submit())})}function ajaxSendFormProyecto(e,t,a,o){$.ajax({type:e.attr("method"),url:a,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),"create"==o?mensajesProyectoCreate(e):mensajesProyectoUpdate(e)},error:function(e,t,a){alert("Error: "+a)}})}function mensajesProyectoCreate(e){"registro"==e.state&&(Swal.fire({title:"Registro Exitoso",text:"El proyecto ha sido registrado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace(e.url)},1e3)),"no_registro"==e.state&&Swal.fire({title:"El proyecto no se ha registrado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function mensajesProyectoUpdate(e){"update"==e.state&&(Swal.fire({title:"Modificación Exitosa",text:"El proyecto ha sido cambiado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace(e.url)},1e3)),"no_update"==e.state&&Swal.fire({title:"El proyecto no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function talentoYaSeEncuentraAsociado(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"El talento ya se encuentra asociado al proyecto!"})}function usuarioYaSeEncuentraAsociado_Propietario(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"El usuario ya se encuentra asociado como dueño de la propiedad intelectual!"})}function empresaYaSeEncuentraAsociado_Propietario(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"Esta empresa/sede ya se encuentra asociada como dueño de la propiedad intelectual!"})}function talentoSeAsocioAlProyecto(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"El talento se ha asociado al proyecto!"})}function empresaSeAsocioAlProyecto_Propietario(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"La sede se ha asociado como dueño de la propiedad intelectual!"})}function grupoSeAsocioAlProyecto_Propietario(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"El grupo de investigación se ha asociado como dueño de la propiedad intelectual!"})}function ideaProyectoAsociadaConExito(e,t){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"La siguiente idea se ha asociado al proyecto: "+e+" - "+t})}function prepararFilaEnLaTablaDeTalentos(e,t){let a=null;t&&(a="checked");let o=e.data.user.id;return'<tr class="selected" id=talentoAsociadoAProyecto'+o+'><td><input type="radio" '+a+' class="with-gap" name="radioTalentoLider" id="radioButton'+o+'" value="'+o+'" /><label for ="radioButton'+o+'"></label></td><td><input type="hidden" name="talentos[]" value="'+o+'">'+e.data.user.documento+" - "+e.data.user.nombres+" "+e.data.user.apellidos+'</td><td><a class="waves-effect bg-danger btn" onclick="eliminarTalentoDeProyecto_FaseInicio('+o+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function prepararFilaEnLaTablaDePropietarios_Users(e){let t=e.data.user.id;return'<tr class="selected" id=propietarioAsociadoAlProyecto_Persona'+t+'><td><input type="hidden" name="propietarios_user[]" value="'+t+'">'+e.data.user.documento+" - "+e.data.user.nombres+" "+e.data.user.apellidos+'</td><td><a class="waves-effect bg-danger white-text btn" onclick="eliminarPropietarioDeUnProyecto_FaseInicio_Persona('+t+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function prepararFilaEnLaTablaDePropietarios_Empresa(e){let t=e.sede.id;return'<tr class="selected" id=propietarioAsociadoAlProyecto_Empresa'+t+'><td><input type="hidden" name="propietarios_sedes[]" value="'+t+'">'+e.sede.empresa.nit+" - "+e.sede.empresa.nombre+" ("+e.sede.nombre_sede+')</td><td><a class="waves-effect bg-danger white-text btn" onclick="eliminarPropietarioDeUnProyecto_FaseInicio_Empresa('+t+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function prepararFilaEnLaTablaDePropietarios_Grupos(e){let t=e.detalles.id;return'<tr class="selected" id=propietarioAsociadoAlProyecto_Grupo'+t+'><td><input type="hidden" name="propietarios_grupos[]" value="'+t+'">'+e.detalles.codigo_grupo+" - "+e.detalles.entidad.nombre+'</td><td><a class="waves-effect bg-danger white-text btn" onclick="eliminarPropietarioDeUnProyecto_FaseInicio_Grupo('+t+');"><i class="material-icons">delete_sweep</i></a></td></tr>'}function pintarTalentoEnTabla_Fase_Inicio(e,t){$.ajax({dataType:"json",type:"get",url:`${host_url}/usuarios/${e}`}).done(function(e){let a=prepararFilaEnLaTablaDeTalentos(e,t);$("#detalleTalentosDeUnProyecto_Create").append(a),talentoSeAsocioAlProyecto()})}function pintarPropietarioEnTabla_Fase_Inicio_PropiedadIntelectual(e){$.ajax({dataType:"json",type:"get",url:`${host_url}/usuarios/${e}`}).done(function(e){let t=prepararFilaEnLaTablaDePropietarios_Users(e);$("#propiedadIntelectual_Personas").append(t),talentoSeAsocioAlProyecto()})}function pintarPropietarioEnTabla_Fase_Inicio_PropiedadIntelectual_Sede(e){$.ajax({dataType:"json",type:"get",url:`${host_url}/empresa/ajaxDetalleDeUnaSede/${e}`,success:function(e){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"La sede "+e.sede.nombre_sede+" se asoció a la idea de proyecto!"});let t=prepararFilaEnLaTablaDePropietarios_Empresa(e);$("#propiedadIntelectual_Empresas").append(t),empresaSeAsocioAlProyecto_Propietario()},error:function(e,t,a){alert("Error: "+a)}})}function pintarPropietarioEnTabla_Fase_Inicio_PropiedadIntelectual_Grupo(e){$.ajax({dataType:"json",type:"get",url:host_url+"/grupo/ajaxDetallesDeUnGrupoInvestigacion/"+e}).done(function(e){let t=prepararFilaEnLaTablaDePropietarios_Grupos(e);$("#propiedadIntelectual_Grupos").append(t),grupoSeAsocioAlProyecto_Propietario()})}function noRepeat(e){let t=document.getElementsByName("talentos[]");for(x=0;x<t.length;x++)if(t[x].value==e)return!1;return!0}function noRepeat_Propiedad(e){let t=e,a=!0,o=document.getElementsByName("propietarios_user[]");for(x=0;x<o.length;x++)if(o[x].value==t){a=!1;break}return a}function noRepeat_Sede(e){let t=e,a=!0,o=document.getElementsByName("propietarios_sedes[]");for(x=0;x<o.length;x++)if(o[x].value==t){a=!1;break}return a}function noRepeat_Grupo(e){let t=e,a=!0,o=document.getElementsByName("propietarios_grupos[]");for(x=0;x<o.length;x++)if(o[x].value==t){a=!1;break}return a}function eliminarTalentoDeProyecto_FaseInicio(e){$("#talentoAsociadoAProyecto"+e).remove()}function eliminarPropietarioDeUnProyecto_FaseInicio_Persona(e){$("#propietarioAsociadoAlProyecto_Persona"+e).remove()}function eliminarPropietarioDeUnProyecto_FaseInicio_Empresa(e){$("#propietarioAsociadoAlProyecto_Empresa"+e).remove()}function eliminarPropietarioDeUnProyecto_FaseInicio_Grupo(e){$("#propietarioAsociadoAlProyecto_Grupo"+e).remove()}function addTalentoProyecto(e,t){let a=!0,o=document.getElementsByName("talentos[]");for(x=0;x<o.length;x++)o[x].value==e&&(a=!1);a?pintarTalentoEnTabla_Fase_Inicio(e,t):talentoYaSeEncuentraAsociado()}function addPersonaPropiedad(e){0==noRepeat_Propiedad(e)?usuarioYaSeEncuentraAsociado_Propietario():pintarPropietarioEnTabla_Fase_Inicio_PropiedadIntelectual(e)}function prepararSedesEmpresa(e){let t="";return e.forEach(e=>{t+='<li class="collection-item">\n        '+e.nombre_sede+" - "+e.direccion+" "+e.ciudad.nombre+" ("+e.ciudad.departamento.nombre+')\n        <a href="#!" class="secondary-content" onclick="addSedePropietaria('+e.id+')">Asociar esta sede de la empresa al proyecto</a></div>\n      </li>'}),t}function addEntidadEmpresa(e){$("#sedesPropietarias_Empresas_detalles").empty(),$.ajax({dataType:"json",type:"get",url:host_url+"/empresa/ajaxDetallesDeUnaEmpresa/"+e+"/id",success:function(e){let t=prepararSedesEmpresa(e.empresa.sedes);$("#sedesPropietarias_Empresas_detalles").append(t),$("#sedesPropietarias_Empresas_modal").openModal()},error:function(e,t,a){alert("Error: "+a)}})}function addSedePropietaria(e){0==noRepeat_Sede(e)?empresaYaSeEncuentraAsociado_Propietario():pintarPropietarioEnTabla_Fase_Inicio_PropiedadIntelectual_Sede(e)}function addGrupoPropietario(e){0==noRepeat_Grupo(e)?empresaYaSeEncuentraAsociado_Propietario():pintarPropietarioEnTabla_Fase_Inicio_PropiedadIntelectual_Grupo(e)}function dumpAggregateValuesIntoTables(){$("#detalleTalentosDeUnProyecto_Create").empty(),$("#propiedadIntelectual_Personas").empty(),$("#propiedadIntelectual_Empresas").empty(),$("#propiedadIntelectual_Grupos").empty()}function addValueToFields(e,t,a){$("#txtnombreIdeaProyecto_Proyecto").val(t+" - "+e),$("#txtnombre").val(e),$("label[for='txtnombreIdeaProyecto_Proyecto']").addClass("active"),$("label[for='txtnombre']").addClass("active"),$("#txtobjetivo").val(a.objetivo),$("#txtobjetivo").trigger("autoresize"),$("label[for='txtobjetivo']").addClass("active"),$("#txtalcance_proyecto").val(a.alcance),$("#txtalcance_proyecto").trigger("autoresize"),$("label[for='txtalcance_proyecto']").addClass("active")}function asociarIdeaDeProyectoAProyecto(e,t,a){$("#txtidea_id").val(e),$.ajax({dataType:"json",type:"get",url:host_url+"/idea/show/"+e}).done(function(e){let o=e.data.idea;(idea=!0)&&(dumpAggregateValuesIntoTables(),addValueToFields(t,a,o),ideaProyectoAsociadaConExito(a,t),null!=e.data.talento&&(addTalentoProyecto(e.data.talento.documento,!0),addPersonaPropiedad(e.data.talento.documento)),null!=e.data.sede&&addSedePropietaria(e.data.sede.id),$("#ideasDeProyectoConEmprendedores_modal").closeModal())}).fail(function(e,t,a){errorAjax(e,t,a)})}function consultarIdeasDeProyectoEmprendedores_Proyecto_FaseInicio(){let e=1,t=1;isset($("#txtnodo_id").val())&&(e=$("#txtnodo_id").val()),isset($("#txtexperto_id_proyecto").val())&&(t=$("#txtexperto_id_proyecto").val()),$("#ideasDeProyectoConEmprendedores_proyecto_table").dataTable().fnDestroy(),$("#ideasDeProyectoConEmprendedores_proyecto_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:host_url+"/proyecto/ideasAsociadasAExperto/"+e+"/"+t,type:"get"},select:!0,columns:[{data:"codigo_idea",name:"codigo_idea"},{data:"nombre_proyecto",name:"nombre_proyecto"},{data:"nombres_contacto",name:"nombres_contacto"},{width:"20%",data:"checkbox",name:"checkbox",orderable:!1}]}),$("#ideasDeProyectoConEmprendedores_modal").openModal({dismissible:!1})}function consultarEmpresasDeTecnoparque_Proyecto_FaseInicio_table(){$("#posiblesPropietarios_Empresas_table").dataTable().fnDestroy(),$("#posiblesPropietarios_Empresas_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:host_url+"/empresa/datatableEmpresasDeTecnoparque",type:"get"},columns:[{data:"nit",name:"nit"},{data:"nombre_empresa",name:"nombre_empresa"},{data:"add_propietario",name:"add_propietario",orderable:!1}]}),$("#posiblesPropietarios_Empresas_modal").openModal()}function consultarGruposDeTecnoparque_Proyecto_FaseInicio_table(){$("#posiblesPropietarios_Grupos_table").dataTable().fnDestroy(),$("#posiblesPropietarios_Grupos_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:host_url+"/grupo/datatableGruposInvestigacionDeTecnoparque",type:"get"},columns:[{data:"codigo_grupo",name:"codigo_grupo"},{data:"nombre",name:"nombre"},{data:"add_propietario",name:"add_propietario",orderable:!1}]}),$("#posiblesPropietarios_Grupos_modal").openModal()}function consultarTalentosDeTecnoparque_Proyecto_FaseInicio_table(e,t){$(e).dataTable().fnDestroy(),$(e).DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,ajax:{url:`${host_url}/usuarios/clientes`,type:"get"},columns:[{data:"documento",name:"documento"},{data:"talento",name:"talento"},{data:t,name:t,orderable:!1}]}),"#posiblesPropietarios_Personas_table"==e&&$("#posiblesPropietarios_Personas_modal").openModal()}function selectAreaConocimiento_Proyecto_FaseInicio(){let e=$("#txtareaconocimiento_id").val();"Otro"==$("#txtareaconocimiento_id [value='"+e+"']").text()?divOtroAreaConocmiento.show():divOtroAreaConocmiento.hide()}function showInput_EconomiaNaranja(){$("#txteconomia_naranja").is(":checked")?divEconomiaNaranja.show():divEconomiaNaranja.hide()}function showInput_Discapacidad(){$("#txtdirigido_discapacitados").is(":checked")?divDiscapacidad.show():divDiscapacidad.hide()}function showInput_ActorCTi(){$("#txtarti_cti").is(":checked")?divNombreActorCTi.show():divNombreActorCTi.hide()}function errorAjax(e,t,a){0===e.status?alert("Not connect: Verify Network."):404==e.status?alert("Requested page not found [404]"):500==e.status?alert("Internal Server Error [500]."):"parsererror"===t?alert("Requested JSON parse failed."):"timeout"===t?alert("Time out error."):"abort"===t?alert("Ajax request aborted."):alert("Uncaught Error: "+e.responseText)}function consultarExpertosDeUnNodo(e){$.ajax({dataType:"json",type:"get",url:`${host_url}/usuarios/expertos/nodo/${e}`}).done(function(e){$("#txtexperto_id_proyecto").empty(),$("#txtexperto_id_proyecto").append('<option value="">Seleccione el experto</option>'),$.each(e.experts,function(e,t){$("#txtexperto_id_proyecto").append('<option  value="'+t.id+'">'+t.nombre_completo+"</option>")}),$("#txtexperto_id_proyecto").material_select()})}function consultarInformacionExperto(e){$.ajax({dataType:"json",type:"get",url:`${host_url}/usuarios/funcionario/${e}`}).done(function(e){printLinea(e),consultarSublineas(e.user.experto.linea.id)})}function consultarSublineas(e){$.ajax({dataType:"json",type:"get",url:host_url+"/proyecto/sublineas_of/"+e}).done(function(e){printSublineas(e)})}function printSublineas(e){$("#txtsublinea_id").empty(),$("#txtsublinea_id").append('<option value="">Seleccione la sublinea</option>'),$.each(e.sublineas,function(e,t){$("#txtsublinea_id").append('<option  value="'+t.id+'">'+t.nombre+"</option>")}),$("#txtsublinea_id").material_select()}function printLinea(e){$("#txtlinea").val(e.user.experto.linea.nombre)}function ajaxSendFormProyecto_FaseCierre(e,t,a){$.ajax({type:e.attr("method"),url:a,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),mensajesProyectoCierre(e)},error:function(e,t,a){alert("Error: "+a)}})}function printErroresFormulario(e){if("error_form"==e.state){let t="";for(control in e.errors)t+=" </br><b> - "+e.errors[control]+" </b> ",$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();Swal.fire({title:"Advertencia!",html:"Estas ingresando mal los datos."+t,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}}function mensajesProyectoCierre(e){"update"==e.state&&(Swal.fire({title:"Modificación Exitosa!",text:"El proyecto ha sido modificado satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace(e.url)},1e3)),"no_update"==e.state&&Swal.fire({title:"El proyecto no se ha modificado, por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function actiarFechaFinDeLaEdt(){$("#txtestado").is(":checked")?divFechaCierreEdt.show():divFechaCierreEdt.hide()}function noRepeat(e){let t=e,a=!0,o=document.getElementsByName("entidades[]");for(x=0;x<o.length;x++)if(o[x].value==t){a=!1;break}return a}function addEmpresaAEdt(e){0==noRepeat(e)?Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"La empresa ya se encuentra asociada a la edt!"}):$.ajax({dataType:"json",type:"get",url:host_url+"/empresa/ajaxConsultarEmpresaPorIdEntidad/"+e}).done(function(e){let t=e.detalles.entidad_id,a='<tr class="selected" id=entidadAsociadaAEdt'+t+'><td><input type="hidden" name="entidades[]" value="'+t+'">'+e.detalles.nit+"</td><td>"+e.detalles.nombre+'</td><td><a class="waves-effect bg-danger white-text btn" onclick="eliminarEntidadAsociadaAEdt('+t+');"><i class="material-icons">delete_sweep</i></a></td></tr>';$("#detalleEntidadesAsociadasAEdt").append(a),Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"La empresa se ha asociado a la edt!"})})}function eliminarEntidadAsociadaAEdt(e){$("#entidadAsociadaAEdt"+e).remove(),Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"Se ha removido la empresa de la edt!"})}function consultarEdtsDeUnGestor(e){let t=$("#txtanho_edts_Gestor").val();$("#edtPorGestor_table").dataTable().fnDestroy(),$("#edtPorGestor_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:host_url+"/edt/consultarEdtsDeUnGestor/"+e+"/"+t,type:"get"},columns:[{width:"10%",data:"codigo_edt",name:"codigo_edt"},{width:"15%",data:"nombre",name:"nombre"},{width:"15%",data:"gestor",name:"gestor"},{width:"6%",data:"area_conocimiento",name:"area_conocimiento"},{width:"6%",data:"tipo_edt",name:"tipo_edt"},{data:"fecha_inicio",name:"fecha_inicio"},{data:"estado",name:"estado"},{width:"6%",data:"business",name:"business",orderable:!1},{width:"6%",data:"details",name:"details",orderable:!1},{width:"6%",data:"edit",name:"edit",orderable:!1},{width:"6%",data:"entregables",name:"entregables",orderable:!1}]})}function eliminarEdtPorId_event(e,t){Swal.fire({title:"¿Desea eliminar la edt?",text:"Al hacer esto, todo lo relacionado con esta edt será eliminado de la base de datos, eso incluye usos de infraestructura y los archivos subidos al servidor!",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",cancelButtonText:"No",confirmButtonText:"Sí, eliminar!"}).then(t=>{t.value&&eliminarEdtPorId_moment(e)})}function eliminarEdtPorId_moment(e){$.ajax({dataType:"json",type:"get",url:host_url+"/edt/eliminarEdt/"+e,success:function(e){e.retorno?(Swal.fire("Eliminación Exitosa!","La edt se ha eliminado completamente!","success"),location.href="/edt"):Swal.fire("Eliminación Errónea!","La edt no se ha eliminado!","error")},error:function(e,t,a){alert("Error: "+a)}})}function datatableEdtsPorNodo(e){let t=$("#txtanho_edts_Nodo").val();$("#edtPorNodo_table").dataTable().fnDestroy(),$("#edtPorNodo_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:host_url+"/edt/consultarEdtsDeUnNodo/"+e+"/"+t,type:"get"},columns:[{width:"10%",data:"codigo_edt",name:"codigo_edt"},{width:"15%",data:"nombre",name:"nombre"},{width:"15%",data:"gestor",name:"gestor"},{width:"6%",data:"area_conocimiento",name:"area_conocimiento"},{width:"6%",data:"tipo_edt",name:"tipo_edt"},{width:"8%",data:"fecha_inicio",name:"fecha_inicio"},{width:"8%",data:"estado",name:"estado"},{width:"5%",data:"business",name:"business",orderable:!1},{width:"5%",data:"details",name:"details",orderable:!1},{width:"5%",data:"entregables",name:"entregables",orderable:!1},{width:"5%",data:"edit",name:"edit",orderable:!1},{width:"5%",data:"delete",name:"delete",orderable:!1}]})}function verEntidadesDeUnaEdt(e){$.ajax({dataType:"json",type:"get",url:host_url+"/edt/consultarDetallesDeUnaEdt/"+e+"/1",success:function(e){$("#entidadesEdt_table").empty(),0!=e.entidades.length?($("#entidadesEdt_titulo").empty(),$("#entidadesEdt_titulo").append("<span class='cyan-text text-darken-3'>Código de la Edt: </span>"+e.edt.codigo_edt),$.each(e.entidades,function(e,t){$("#entidadesEdt_table").append("<tr><td>"+t.nit+"</td><td>"+t.nombre+"</td></tr>")}),$("#entidadesEdt_modal").openModal()):Swal.fire({title:"Ups!!",text:"No se encontraron empresas asociadas a esta Edt!",type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})},error:function(e,t,a){alert("Error: "+a)}})}function detallesDeUnaEdt(e){$.ajax({dataType:"json",type:"get",url:host_url+"/edt/consultarDetallesDeUnaEdt/"+e+"/0",success:function(t){$("#detalleEdt_titulo").empty(),$("#detalleEdt_detalle").empty();let a="";a="Inactiva"==t.edt.estado?t.edt.fecha_cierre:"La Edt aún se encuentra activa!",$("#detalleEdt_titulo").append("<div class='valign-wrapper left material-icons'><a href='/excel/excelDeUnaEdt/"+e+"'><img class='btn btn-flat' src='https://img.icons8.com/color/48/000000/ms-excel.png'></a></div><span class='cyan-text text-darken-3'>Código de la Edt: </span>"+t.edt.codigo_edt),$("#detalleEdt_detalle").append('<div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Código de la Edt: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.edt.codigo_edt+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Nombre de la Edt: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.edt.nombre+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Área de Conocimiento: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.edt.areaconocimiento+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Tipo de Edt: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.edt.tipoedt+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Fecha de Inicio: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.edt.fecha_inicio+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Fecha de Cierre: </span></div><div class="col s12 m6 l6"><span class="black-text">'+a+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m12 l12"><h6 class="cyan-text text-darken-3 center">Asistentes</h6></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Empleados: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.edt.empleados+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Instructores: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.edt.instructores+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Aprendices: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.edt.aprendices+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Público: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.edt.publico+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Observaciones: </span></div><div class="col s12 m6 l6"><span class="black-text">'+t.edt.observaciones+'</span></div></div><div class="divider"></div>'),$("#detalleEdt_modal").openModal()},error:function(e,t,a){alert("Error: "+a)}})}$("#codigo_proyecto_tblProyectos_Master").keyup(function(){$("#tblProyectos_Master").DataTable().draw()}),$("#gestor_tblProyectos_Master").keyup(function(){$("#tblProyectos_Master").DataTable().draw()}),$("#nombre_tblProyectos_Master").keyup(function(){$("#tblProyectos_Master").DataTable().draw()}),$("#sublinea_nombre_tblProyectos_Master").keyup(function(){$("#tblProyectos_Master").DataTable().draw()}),$("#estado_nombre_tblProyectos_Master").keyup(function(){$("#tblProyectos_Master").DataTable().draw()}),$(document).ready(function(){divOtroAreaConocmiento=$("#otroAreaConocimiento_content"),divEconomiaNaranja=$("#economiaNaranja_content"),divDiscapacidad=$("#discapacidad_content"),divNombreActorCTi=$("#nombreActorCTi_content"),divOtroAreaConocmiento.hide(),divEconomiaNaranja.hide(),divDiscapacidad.hide(),divNombreActorCTi.hide()}),$(document).on("submit","form#frmProyectos_FaseInicio",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");ajaxSendFormProyecto(t,a,o,"create")}),$(document).on("submit","form#frmUpdateTalentos",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");ajaxSendFormProyecto(t,a,o,"update")}),$(document).on("submit","form#frmProyectos_FaseInicio_Update",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");ajaxSendFormProyecto(t,a,o,"update")}),$(document).on("submit","form#frmProyectos_FaseCierre_Update",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");ajaxSendFormProyecto_FaseCierre(t,a,o)}),$(document).ready(function(){$("#empresasDeTecnoparque_modEdt_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthMenu:[[5,25,50,-1],[5,25,50,"All"]],processing:!0,serverSide:!0,ajax:{url:host_url+"/empresa/datatableEmpresasDeTecnoparque",type:"get"},deferRender:!0,columns:[{data:"nit",name:"nit"},{data:"nombre_empresa",name:"nombre_empresa"},{data:"add_empresa_a_edt",name:"add_empresa_a_edt"}]})}),divFechaCierreEdt=$("#divFechaCierreEdt"),divFechaCierreEdt.hide(),$(document).ready(function(){consultarEdtsDeUnGestor(0)}),$(document).ready(function(){datatableEdtsPorNodo(0)});var selectCostoAdministrativoNodo={selectCostoAdministrativoNodo:function(e,t){let a=null;"Administrador"==e||"Activador"==e?(a=$("#selectnodo").val(),$("#costoadministrativo_administrador_table").dataTable().fnDestroy()):a=t,""!=a?$("#costoadministrativo_administrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,lengthChange:!1,order:[[1,"asc"]],fixedHeader:{header:!0,footer:!0},pagingType:"full_numbers",ajax:{url:host_url+"/costos-administrativos/costoadministrativo/"+a,type:"get"},columns:[{data:"entidad",name:"entidad",width:"30%"},{data:"costoadministrativo",name:"costoadministrativo",width:"30%"},{data:"valor",name:"valor",width:"15%"},{data:"costosadministrativospordia",name:"costosadministrativospordia",width:"15%"},{data:"costosadministrativosporhora",name:"costosadministrativosporhora",width:"15%"},{data:"edit",name:"edit",width:"15%"}],footerCallback:function(e,t,a,o,n){var i=this.api(),r=function(e){return"string"==typeof e?1*e.replace(/[\$,]/g,""):"number"==typeof e?e:0};totalCostosHora=i.column(4).data().reduce(function(e,t){return r(e)+r(t)},0),totalCostosDia=i.column(3).data().reduce(function(e,t){return r(e)+r(t)},0),totalCostosMes=i.column(2).data().reduce(function(e,t){return r(e)+r(t)},0),pageTotalCostosHora=i.column(4,{page:"current"}).data().reduce(function(e,t){return r(e)+r(t)},0),pageTotalCostosDia=i.column(3,{page:"current"}).data().reduce(function(e,t){return r(e)+r(t)},0),pageTotalCostosMes=i.column(2,{page:"current"}).data().reduce(function(e,t){return r(e)+r(t)},0),$(i.column(4).footer()).html("$ "+pageTotalCostosHora+" ( $"+totalCostosHora+" total)"),$(i.column(3).footer()).html("$ "+pageTotalCostosDia+" ( $"+totalCostosDia+" total)"),$(i.column(2).footer()).html("$ "+pageTotalCostosMes+" ( $"+totalCostosMes+" total)")}}):$("#costoadministrativo_administrador_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,pagingType:"full_numbers"}).clear().draw()}};$(document).ready(function(){let e=$("#filter_nodo").val(),t=$("#filter_state").val();$("#equipo_data_table").dataTable().fnDestroy(),""!=e||null!=e?equipo.fillDatatatablesEquipos(e,t):""!=e&&null!=e&&null!=e||""!=t&&null!=t&&null!=t?$("#equipo_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():equipo.fillDatatatablesEquipos(e=null,t=null),$("#equipo_actions_data_table").dataTable().fnDestroy(),""!=e||null!=e?equipo.fillDatatatablesEquiposActions(e,t):""!=e&&null!=e&&null!=e||""!=t&&null!=t&&null!=t?$("#equipo_actions_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():equipo.fillDatatatablesEquiposActions(e=null,t=null)});var equipo={fillDatatatablesEquipos(e,t){$("#equipo_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},order:[[1,"desc"]],processing:!0,serverSide:!0,lengthChange:!1,fixedHeader:{header:!0,footer:!0},pagingType:"full_numbers",ajax:{url:host_url+"/equipos",type:"get",data:{filter_nodo:e,filter_state:t}},columns:[{data:"nombrelinea",name:"nombrelinea",width:"30%"},{data:"nombre",name:"nombre",width:"30%"},{data:"referencia",name:"referencia",width:"15%"},{data:"marca",name:"marca",width:"15%"},{data:"costo_adquisicion",name:"costo_adquisicion",width:"15%"},{data:"vida_util",name:"vida_util",width:"15%"},{data:"horas_uso_anio",name:"horas_uso_anio",width:"15%"},{data:"anio_compra",name:"anio_compra",width:"15%"},{data:"anio_fin_depreciacion",name:"anio_fin_depreciacion",width:"15%"},{data:"depreciacion_por_anio",name:"depreciacion_por_anio",width:"15%"},{data:"state",name:"state",width:"15%"}]})},fillDatatatablesEquiposActions(e,t){$("#equipo_actions_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},order:[[1,"desc"]],processing:!0,serverSide:!0,lengthChange:!1,fixedHeader:{header:!0,footer:!0},pagingType:"full_numbers",ajax:{url:host_url+"/equipos",type:"get",data:{filter_nodo:e,filter_state:t}},columns:[{data:"nombrelinea",name:"nombrelinea",width:"30%"},{data:"nombre",name:"nombre",width:"30%"},{data:"referencia",name:"referencia",width:"15%"},{data:"marca",name:"marca",width:"15%"},{data:"costo_adquisicion",name:"costo_adquisicion",width:"15%"},{data:"vida_util",name:"vida_util",width:"15%"},{data:"state",name:"state",width:"15%"},{data:"detail",name:"detail",width:"15%"},{data:"destacar",name:"destacar",width:"15%"},{data:"edit",name:"edit",width:"15%",orderable:!1},{data:"changeState",name:"changeState",width:"15%",orderable:!1}]})},detail(e){$.ajax({dataType:"json",type:"get",url:host_url+`/equipos/${e}`}).done(function(e){if($("#titulo").empty(),$("#detalle_equipo").empty(),404==e.statusCode)swal("Ups!!!","No se encontraron resultados","error");else{let t=e.data.equipo;$("#titulo").append("<span class='cyan-text text-darken-3'>Nombre de Equipo: </span>"+t.nombre),$("#detalle_equipo").append(`\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Linea Tecnológica: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">${t.lineatecnologica.abreviatura} - ${t.lineatecnologica.nombre}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Referencia: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">${t.referencia}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Marca: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">${t.marca}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Costo Adquisición: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">$ ${t.costo_adquisicion}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Año de compra: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">${t.anio_compra}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Vida Util: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">${t.vida_util}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Año de depreciación: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">${e.data.aniodepreciacion}</span>\n                        </div>\n                    </div>\n                    <div class="divider"></div>\n                    <div class="row">\n                        <div class="col s12 m6 l6">\n                            <span class="cyan-text text-darken-3">Valor depreciación por año: </span>\n                        </div>\n                        <div class="col s12 m6 l6">\n                            <span class="black-text">${e.data.depreciacion}</span>\n                        </div>\n                    </div>\n                    `),$(".modal-equipo").openModal()}})},changeState:function(e){Swal.fire({title:"¿Estas seguro de cambiar el estado a este equipo?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, cambiar estado",cancelButtonText:"No, cancelar"}).then(t=>{t.value?$.ajax({url:host_url+`/equipos/cambiar-estado/${e}`,type:"GET",success:function(e){200==e.statusCode?(Swal.fire("Estado cambiado!","El equipo ha cambiado de estado.","success"),location.href=e.route):Swal.fire("No se puede cambiar estado!",e.message,"error")},error:function(e,t,a){alert("Error: "+a)}}):t.dismiss===Swal.DismissReason.cancel&&swalWithBootstrapButtons.fire("Cancelado","Tu equipo está a salvo","error")})},destacarEquipo:function(e,t,a){let o=0==t?"destacar":"dejar de destacar";Swal.fire({title:"¿Estás seguro de "+o+" este equipo?",text:"Solo puede haber un límite de "+a+" equipos destacados.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:0==t?"Sí, destacar equipo":"Sí, dejar de destacar equipo",cancelButtonText:"No, cancelar"}).then(t=>{t.value&&$.ajax({url:host_url+`/equipos/destacar/${e}`,type:"GET",success:function(e){Swal.fire(e.title,e.message,e.type),e.state&&$("#equipo_actions_data_table").DataTable().ajax.reload()},error:function(e,t,a){alert("Error: "+a)}})})}};function ajaxSendFormMantenimiento(e,t,a){$.ajax({type:e.attr("method"),url:a,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e),"error_form"!=e.state&&mensajesFormMantenimiento(e)},error:function(e,t,a){alert("Error: "+a)}})}function mensajesFormMantenimiento(e){e.state?(Swal.fire({title:e.title,text:e.msj,type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace(e.url)},1e3)):Swal.fire({title:e.title,text:e.msj,type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}$("#filter_equipo").click(function(){let e=$("#filter_nodo").val(),t=$("#filter_state").val();$("#equipo_data_table").dataTable().fnDestroy(),""!=e||null!=e?equipo.fillDatatatablesEquipos(e,t):""!=e&&null!=e&&null!=e||""!=t&&null!=t&&null!=t?$("#equipo_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():equipo.fillDatatatablesEquipos(e=null,t=null),$("#equipo_actions_data_table").dataTable().fnDestroy(),""!=e||null!=e?equipo.fillDatatatablesEquiposActions(e,t):""!=e&&null!=e&&null!=e||""!=t&&null!=t&&null!=t?$("#equipo_actions_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():equipo.fillDatatatablesEquiposActions(e=null,t=null)}),$("#download_equipos").click(function(){var e={filter_nodo:$("#filter_nodo").val(),filter_state:$("#filter_state").val()},t=host_url+"/equipos/export?"+$.param(e);window.location=t}),$(document).on("submit","form#frmMantenimientoEquipo",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");ajaxSendFormMantenimiento(t,a,o)}),$(document).on("submit","form#frmMantenimientoEquipoEdit",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),a=new FormData($(this)[0]),o=t.attr("action");ajaxSendFormMantenimiento(t,a,o)});var mantenimiento={getEquipoPorLinea:function(){let e=$("#txtlineatecnologica").val(),t=$("#txtnodo_id").val();isset(t)||(t=0),isset(e)||(e=0),$.ajax({dataType:"json",type:"get",url:host_url+"/equipos/getequiposporlinea/"+t+"/"+e}).done(function(e){$("#txtequipo").empty(),""==e.equipos&&0==e.equipos.length?$("#txtequipo").append('<option value="">No se encontraron resultados</option>'):($("#txtequipo").append('<option value="">Seleccione el equipo</option>'),$.each(e.equipos,function(e,t){$("#txtequipo").append('<option  value="'+t.id+'">'+t.nombre+"</option>")})),$("#txtequipo").select2()})}};function getEquipoPorLineaEdit(e,t,a){$.ajax({dataType:"json",type:"get",url:host_url+"/equipos/getequiposporlinea/"+e+"/"+t}).done(function(e){$("#txtequipo").empty(),""==e.equipos&&0==e.equipos.length?$("#txtequipo").append('<option value="">No se encontraron resultados</option>'):($("#txtequipo").append('<option value="">Seleccione el equipo</option>'),$.each(e.equipos,function(e,t){t.id==a?$("#txtequipo").append('<option selected value="'+t.id+'">'+t.nombre+"</option>"):$("#txtequipo").append('<option value="'+t.id+'">'+t.nombre+"</option>")})),$("#txtequipo").select2()})}function consultarLineasNodoMantenimiento(e,t){$.ajax({dataType:"json",type:"get",url:host_url+"/lineas/getlineasnodo/"+e}).done(function(e){$("#txtlineatecnologica").empty(),$("#txtlineatecnologica").append('<option value="">Seleccione la línea tecnológica</option>'),$.each(e.lineasForNodo.lineas,function(e,a){a.id==t?$("#txtlineatecnologica").append('<option value="'+a.id+'" selected>'+a.abreviatura+" - "+a.nombre+"</option>"):$("#txtlineatecnologica").append('<option value="'+a.id+'">'+a.abreviatura+" - "+a.nombre+"</option>")}),$("#txtlineatecnologica").select2()})}$(document).ready(function(){selectMantenimientosEquiposPorNodo.selectMantenimientosEquipoForNodo()});var selectMantenimientosEquiposPorNodo={selectMantenimientosEquipoForNodo:function(){let e=$("#selectnodo").val();$("#mantenimientosequipos_table").dataTable().fnDestroy(),isset(e)||(e=0),$("#mantenimientosequipos_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,retrieve:!0,lengthChange:!1,fixedHeader:{header:!0,footer:!0},pagingType:"full_numbers",ajax:{url:host_url+"/mantenimientos/getmantenimientosequipospornodo/"+e,type:"get"},columns:[{data:"nodo",name:"nodo",width:"30%"},{data:"lineatecnologica",name:"lineatecnologica",width:"30%"},{data:"equipo",name:"equipo",width:"30%"},{data:"ultimo_anio_mantenimiento",name:"ultimo_anio_mantenimiento",width:"15%"},{data:"valor_mantenimiento",name:"valor_mantenimiento",width:"15%"},{data:"detail",name:"detail",width:"15%"},{data:"edit",name:"edit",width:"15%"}]})}};function consultarLineasNodo(e){$.ajax({dataType:"json",type:"get",url:host_url+"/lineas/getlineasnodo/"+e}).done(function(e){$("#txtlineatecnologica").empty(),$("#txtlineatecnologica").append('<option value="">Seleccione la línea tecnológica</option>'),$.each(e.lineasForNodo.lineas,function(e,t){$("#txtlineatecnologica").append('<option  value="'+t.id+'">'+t.abreviatura+" - "+t.nombre+"</option>")}),$("#txtlineatecnologica").material_select()})}function getSelectMaterialMedida(){let e=$("#txtmedida option:selected").text(),t=$("#txtmedida").val();$("#txtcantidad").prop("disabled",!0),$("label[for='txtcantidad']").empty(),""!=t?($("#txtcantidad").prop("disabled",!1),$("#txtcantidad").val(""),$("label[for='txtcantidad']").text("Tamaño presentacion o venta/paquete en "+e)):($("#txtcantidad").prop("disabled",!0),$("label[for='txtcantidad']").text("Tamaño presentacion o venta/paquete"))}var materialFormacion={destroyMaterial:function(e){Swal.fire({title:"¿Estas seguro de eliminar este material de formación?",text:"Recuerde que si lo elimina no lo podrá recuperar.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"si, elminar material",cancelButtonText:"No, cancelar"}).then(t=>{if(t.value){let t=$("meta[name='csrf-token']").attr("content");$.ajax({url:host_url+"/materiales/"+e,type:"DELETE",data:{id:e,_token:t},success:function(e){200==e.status?(Swal.fire("Eliminado!","El material de formación ha sido eliminado satisfactoriamente.","success"),location.href=e.route):226==e.status&&Swal.fire("No se puede elimnar!",e.message,"error")},error:function(e,t,a){alert("Error: "+a)}})}else t.dismiss===Swal.DismissReason.cancel&&swalWithBootstrapButtons.fire("Cancelado","Tu material de formación está a salvo","error")})}},selectMaterialesPorNodo={selectMaterialesForNodo:function(){let e=$("#selectnodo").val();isset(e)||(e=0),$("#materiales_table").dataTable().fnDestroy(),isset(e)&&$("#materiales_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,retrieve:!0,lengthChange:!1,fixedHeader:{header:!0,footer:!0},pagingType:"full_numbers",ajax:{url:host_url+"/materiales/getmaterialespornodo/"+e,type:"get"},columns:[{data:"fecha",name:"fecha",width:"20%"},{data:"nombrelinea",name:"nombrelinea",width:"30%"},{data:"codigo_material",name:"codigo_material",width:"30%"},{data:"material",name:"material",width:"30%"},{data:"presentacion",name:"presentacion",width:"15%"},{data:"medida",name:"medida",width:"15%"},{data:"cantidad",name:"cantidad",width:"15%"},{data:"valor_unitario",name:"valor_unitario",width:"15%"},{data:"valor_compra",name:"valor_compra",width:"15%"},{data:"detail",name:"detail",width:"15%"}]})}};$(document).ready(function(){let e=$("#filter_node").val(),t=$("#filter_module").val(),a=$("#filter_start_date").val(),o=$("#filter_end_date").val();$("#asesorie_data_table").dataTable().fnDestroy(),""==e&&null==e||""==t&&null==t||""==a&&null==a||""==o&&null==o?""!=e&&null!=e&&null!=e||""!=t&&null!=t&&null!=t||""!=a&&null!=a&&null!=a||""!=o&&null!=o&&null!=o?$("#asesorie_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():asesorieIndex.fillDatatatablesAsesorie(e=null,t=null,start_date=null,end_date=null):asesorieIndex.fillDatatatablesAsesorie(e,t,a,o)});const asesorieIndex={fillDatatatablesAsesorie:function(e,t,a,o){$("#asesorie_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,order:[[2,"desc"]],ajax:{url:`${host_url}/asesorias/datatable_filtros`,type:"get",data:{filter_nodo:e,filter_module:t,filter_start_date:a,filter_end_date:o}},columnDefs:[{targets:1,type:"date"}],columns:[{data:"nodo",type:"nodo"},{data:"codigo",type:"codigo"},{data:"fecha",type:"date"},{data:"asesores",name:"asesores",width:"20%",orderable:!1},{data:"tipo_asesoria",name:"tipo_asesoria",width:"10%"},{data:"asesorable",name:"asesorable",width:"35%"},{data:"fase",name:"fase",width:"10%"},{data:"detail",name:"detail",width:"5%",orderable:!1}]})},destroyAsesorie:function(e){Swal.fire({title:"¿Estas seguro de eliminar este uso de infraestructura?",text:"Recuerde que si lo elimina no lo podrá recuperar.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"si, eliminar uso",cancelButtonText:"No, cancelar"}).then(t=>{if(t.value){let t=$("meta[name='csrf-token']").attr("content");$.ajax({url:`${host_url}/asesorias/${e}`,type:"DELETE",data:{id:e,_token:t},success:function(e){"success"==e.usoinfraestructura&&(Swal.fire("Eliminado!","Su uso de infraestructura ha sido eliminado satisfactoriamente.","success"),location.href=e.route)},error:function(e,t,a){alert("Error: "+a)}})}else t.dismiss===Swal.DismissReason.cancel&&swalWithBootstrapButtons.fire("Cancelado","Tu uso de infraestructura está a salvo","error")})}};$("#filter_asesories").click(function(){let e=$("#filter_node").val(),t=$("#filter_module").val(),a=$("#filter_start_date").val(),o=$("#filter_end_date").val();$("#asesorie_data_table").dataTable().fnDestroy(),""==e&&null==e||""==t&&null==t||""==a&&null==a||""==o&&null==o?""!=e&&null!=e&&null!=e||""!=t&&null!=t&&null!=t||""!=a&&null!=a&&null!=a||""!=o&&null!=o&&null!=o?$("#asesorie_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():asesorieIndex.fillDatatatablesAsesorie(e=null,t=null,start_date=null,end_date=null):asesorieIndex.fillDatatatablesAsesorie(e,t,a,o)}),$("#download_asesories").click(function(){let e={filter_nodo:$("#filter_node").val(),filter_module:$("#filter_module").val(),filter_start_date:$("#filter_start_date").val(),filter_end_date:$("#filter_end_date").val()},t=`${host_url}/asesorias/exportar?`+$.param(e);window.location=t}),$(document).on("submit","form#formSearchAsesorie",function(e){if(e.preventDefault(),$("#response-alert").empty(),validar("#type_search"))if(validar("#search_asesorie")){let e=$(this),t=new FormData($(this)[0]),a=e.attr("action");$.ajax({type:e.attr("method"),url:a,data:t,dataType:"json",cache:!1,dataType:"json",contentType:!1,processData:!1,success:function(e){console.log(e),$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),$("#response-alert").empty(),e.fail&&Swal.fire({title:"Registro Erróneo",html:"Estas ingresando mal los datos. ",type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),0==e.asesories.length?$("#response-alert").append('\n                        <div class="mailbox-list">\n                            <ul>\n                                <li>\n                                    <a class="mail-active">\n                                        <h4 class="center-align">no se encontraron resultados</h4>\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>'):200==e.status&&($("#response-alert").append(`\n                            <div class="row search-tabs-row search-tabs-container grey lighten-4">\n                                <div class="col s12 m6 l6 left-align search-stats">\n\n\n                                        <span class="m-r-sm text-mailbox">${e.message}</span>\n\n\n                                </div>\n                                <div class="col s12 m6 l6 right-align search-stats">\n                                    <span class="m-r-sm">Resultados</span>\n                                    <span class="secondary-stats"></span>\n                                </div>\n                            </div>`),$.each(e.asesories,function(t,a){let o=e.urls[t];$("#response-alert").append('\n                            <div class="mailbox-list">\n                                <ul>\n                                    <li>\n                                        <a href="'+o+'" class="mail-active">\n                                            <h5 class="mail-author">'+a.codigo+" - "+a.nombre+'</h5>\n                                            <p class="hide-on-small-and-down mail-text"> '+a.fecha+"</p>\n                                        </a>\n                                    </li>\n                                </ul>\n                            </div>")}))}})}else Swal.fire("Error","Por favor ingrese un código válido","error");else Swal.fire("Error","Por favor selecciona una opción","error")});const validar=(e,t=4)=>{if("string"!=typeof e)return!1;let a=document.querySelector(e);return null!==a&&!(a.value.trim().length<t)},asesorieSearch={changetextLabel:function(){let e=$("#type_search").val();console.log(e),$("#search_asesorie").val(""),"UsoInfraestructura"==e?$("label[for='search_asesorie']").text("Ingrese código de asesoria"):"Proyecto"==e?$("label[for='search_asesorie']").text("Ingrese código de proyecto"):"Articulation"==e?$("label[for='search_asesorie']").text("Ingrese código de la articulación"):"Idea"==e&&$("label[for='search_asesorie']").text("Ingrese código de la Idea")}};function datatableVisitantesPorNodo_Ingreso(){$("#visitantesRedTecnoparque_table").dataTable().fnDestroy(),$("#visitantesRedTecnoparque_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:host_url+"/visitante/consultarVisitantesRedTecnoparque",type:"get"},columns:[{width:"15%",data:"documento",name:"documento"},{data:"tipo_documento",name:"tipo_documento"},{data:"tipo_visitante",name:"tipo_visitante"},{data:"visitante",name:"visitante"},{data:"email",name:"email"},{data:"contacto",name:"contacto"},{width:"8%",data:"edit",name:"edit",orderable:!1}]})}function datatableVisitantesPorNodo_DinamizadorAdministrador(){$("#visitantesRedTecnoparque_table").dataTable().fnDestroy(),$("#visitantesRedTecnoparque_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:host_url+"/visitante/consultarVisitantesRedTecnoparque",type:"get"},columns:[{width:"15%",data:"documento",name:"documento"},{data:"tipo_documento",name:"tipo_documento"},{data:"tipo_visitante",name:"tipo_visitante"},{data:"visitante",name:"visitante"},{data:"email",name:"email"},{data:"contacto",name:"contacto"}]})}function consultarIngresosDeUnNodo(e){let t=$("#txtstart_date_ingresos").val(),a=$("#txtend_date_ingresos").val();$("#ingresosDeUnNodo_table").dataTable().fnDestroy(),$("#ingresosDeUnNodo_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},processing:!0,serverSide:!0,order:[0,"desc"],ajax:{url:host_url+"/ingreso/consultarIngresosDeUnNodoTecnoparque/"+e+"/"+t+"/"+a,type:"get"},columns:[{width:"15%",data:"fecha_ingreso",name:"fecha_ingreso"},{width:"15%",data:"hora_salida",name:"hora_salida"},{data:"visitante",name:"visitante"},{data:"servicio",name:"servicio"},{data:"quien_autoriza",name:"quien_autoriza"},{data:"descripcion",name:"descripcion"},{width:"8%",data:"edit",name:"edit",orderable:!1}]})}function consultarVisitanteTecnoparque(){let e=$("#txtdocumento").val();""==e?Swal.fire({title:"Advertencia!",text:"Digite un número de documento!",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}):$.ajax({dataType:"json",type:"get",url:host_url+"/visitante/consultarVisitantePorDocumento/"+e,success:function(e){null==e.visitante?(divVisitanteRegistrado.hide(),divRegistrarVisitante.show()):($("#nombrePersona").val(e.visitante.visitante),$("#tipoPersona").val(e.visitante.tipovisitante),$("#contactoReg").val(e.visitante.contacto),$("#correoReg").val(e.visitante.email),$("label[for='nombrePersona']").addClass("active",!0),$("label[for='tipoPersona']").addClass("active",!0),$("label[for='contactoReg']").addClass("active",!0),$("label[for='correoReg']").addClass("active",!0),divRegistrarVisitante.hide(),divVisitanteRegistrado.show())},error:function(e,t,a){alert("Error: "+a)}})}function consultarDetallesDeUnaCharlaInformativa(e){$.ajax({dataType:"json",type:"get",url:host_url+"/charla/consultarDetallesDeUnaCharlaInformativa/"+e,success:function(e){$("#modalDetalleDeUnaCharlaInformativa_titulo").empty(),$("#modalDetalleDeUnaCharlaInformativa_detalle_charla").empty(),$("#modalDetalleDeUnaCharlaInformativa_titulo").append("<span class='cyan-text text-darken-3'>Datos de la Charla Informativa </span><br>"),$("#modalDetalleDeUnaCharlaInformativa_detalle_charla").append('<div class=\'row\'><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Código de la Charla Informativa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.codigo_charla+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Fecha de la Charla Informativa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.fecha+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Encargado de la Charla Informativa: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.encargado+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Número de Asistentens: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.nro_asistentes+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Observaciones: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.observacion+'</span></div></div><div class="divider"></div><h5 class="center">Evidencias</h5><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Programación de la Charla (Pantallazo del Envío de Correos): </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.programacion+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Evidencias Fotográficas: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.evidencia_fotografica+'</span></div></div><div class="divider"></div><div class="row"><div class="col s12 m6 l6"><span class="cyan-text text-darken-3">Listado de Asistencia: </span></div><div class="col s12 m6 l6"><span class="black-text">'+e.charla.listado_asistentes+'</span></div></div><div class="divider"></div>'),$("#detalleDeUnaCharlaInformativa_modal").openModal()},error:function(e,t,a){alert("Error: "+a)}})}$(document).ready(function(){});var ano=(new Date).getFullYear(),graficosId={grafico1:"graficoArticulacionesPorGestorYNodoPorFecha_stacked",grafico2:"graficoArticulacionesPorGestorYFecha_stacked",grafico3:"graficoArticulacionesPorLineaYFecha_stacked",grafico4:"graficoArticulacionesPorNodoYAnho_variablepie"},graficosEdtId={grafico1:"graficosEdtsPorGestorNodoYFecha_stacked",grafico2:"graficosEdtsPorGestorYFecha_stacked",grafico3:"graficoEdtsPorLineaYFecha_stacked",grafico4:"graficoEdtsPorNodoYAnho_variablepie"},graficosProyectoId={grafico1:"graficosProyectoPorMesYNodo_combinate",grafico2:"graficosProyectoConEmpresaPorMesYNodo_combinate",grafico3:"graficoProyectosPorTipoNodoYFecha_column",grafico4:"graficoProyectosFinalizadosPorNodoYAnho_column",grafico5:"graficoProyectosFinalizadosPorTipoNodoYFecha_column"};function alertaNodoNoValido(){Swal.fire("Advertencia!","Seleccione un nodo","warning")}function alertaGestorNoValido(){Swal.fire("Advertencia!","Seleccione un experto","warning")}function alertaLineaNoValido(){Swal.fire("Advertencia!","Seleccione una Línea Tecnológica","warning")}function alertaFechasNoValidas(){Swal.fire("Advertencia!","Seleccione fechas válidas!","warning")}function generarExcelGrafico3Edt(e){let t=0,a=$("#txtlinea_id_edtGrafico3").val(),o=$("#txtfecha_inicio_GraficoEdt3").val(),n=$("#txtfecha_fin_GraficoEdt3").val();1==e&&(t=$("#txtnodo_id").val()),""===t?alertaNodoNoValido():""===a?alertaLineaNoValido():location.href="/excel/excelEdtsFinalizadasPorLineaNodoYFecha/"+t+"/"+a+"/"+o+"/"+n}function generarExcelGrafico2Edt(e){let t=0;0==e&&(t=$("#txtgestor_id_edtGrafico2").val());let a=$("#txtfecha_inicio_edtGrafico2").val(),o=$("#txtfecha_fin_edtGrafico2").val();""===t?alertaGestorNoValido():location.href="/excel/excelEdtsFinalizadasPorGestorYFecha/"+t+"/"+a+"/"+o}function generarExcelGrafico1Edt(e){let t=0,a=$("#txtfecha_inicio_edtGrafico1").val(),o=$("#txtfecha_fin_edtGrafico1").val();1==e&&(t=$("#txtnodo_id").val()),""===t?alertaNodoNoValido():location.href="/excel/excelEdtsFinalizadasPorFechaYNodo/"+t+"/"+a+"/"+o}function generarExcelGrafico1Articulacion(e){let t=0,a=$("#txtfecha_inicio_Grafico1").val(),o=$("#txtfecha_fin_Grafico1").val();1==e&&(t=$("#txtnodo_id").val()),""===t?alertaNodoNoValido():location.href="/excel/excelArticulacionFinalizadasPorFechaYNodo/"+t+"/"+a+"/"+o}function generarExcelGrafico3Articulacion(e){let t=0,a=$("#txtlinea_tecnologica").val(),o=$("#txtfecha_inicio_Grafico1").val(),n=$("#txtfecha_fin_Grafico1").val();1==e&&(t=$("#txtnodo_id").val()),""===t?alertaNodoNoValido():""===a?alertaLineaNoValido():location.href="/excel/excelArticulacionFinalizadasPorFechaNodoYLinea/"+t+"/"+a+"/"+o+"/"+n}function generarExcelGrafico2Articulacion(){let e=$("#txtgestor_id").val(),t=$("#txtfecha_inicio_Grafico2").val(),a=$("#txtfecha_fin_Grafico2").val();""===e?alertaGestorNoValido():location.href="/excel/excelArticulacionFinalizadasPorGestorYFecha/"+e+"/"+t+"/"+a}function generarExcelGrafico4Articulacion(e){let t=0,a=$("#txtanho_Grafico4").val();1==e&&(t=$("#txtnodo_id").val()),""===t?alertaNodoNoValido():location.href="/excel/excelArticulacionFinalizadasPorNodoYAnho/"+t+"/"+a}function generarExcelGrafico1Proyecto(e){let t=0,a=$("#txtanho_GraficoProyecto1").val();1==e&&(t=$("#txtnodo_excelGrafico1Proyecto").val()),location.href="/excel/excelProyectosInscritosPorAnho/"+t+"/"+a}function generarExcelGrafico2Proyecto(e){let t=0,a=$("#txtanho_GraficoProyecto2").val();1==e&&(t=$("#txtnodo_excelGrafico2Proyecto").val()),location.href="/excel/excelProyectosInscritosConEmpresasPorAnho/"+t+"/"+a}function graficosProyectosPromedioCantidadesMeses(e,t){let a=e.proyectos.cantidades.length,o={cantidades:[],meses:[],promedios:[]};for(let t=0;t<a;t++)o.cantidades.push(e.proyectos.cantidades[t]);for(let t=0;t<a;t++)o.meses.push(e.proyectos.meses[t]);for(let t=0;t<a;t++)o.promedios.push(e.proyectos.promedios[t]);Highcharts.chart(t,{title:{text:"Proyectos Inscritos"},yAxis:{title:{text:"Cantidad/Promedio"}},xAxis:{categories:o.meses,title:{text:"Meses"}},series:[{type:"column",name:"Proyectos Inscritos",data:o.cantidades},{type:"spline",name:"Proyectos Inscritos",data:o.cantidades,dataLabels:{enabled:!0},marker:{lineWidth:2,lineColor:"#008981",fillColor:"#008981"}}]})}function graficosProyectosAgrupados(e,t,a){let o=e.proyectos.cantidades.length,n={cantidades:[],labels:[]};for(let t=0;t<o;t++)n.cantidades.push(e.proyectos.cantidades[t]);for(let t=0;t<o;t++)n.labels.push(e.proyectos.labels[t]);Highcharts.chart(t,{title:{text:"Proyectos Inscritos"},yAxis:{title:{text:"Cantidad"}},xAxis:{categories:n.labels,title:{text:a}},series:[{type:"column",name:"Proyectos Inscritos",data:n.cantidades},{type:"spline",name:"Proyectos Inscritos",data:n.cantidades,dataLabels:{enabled:!0},marker:{lineWidth:2,lineColor:"#008981",fillColor:"#008981"}}]})}function consultarProyectosFinalizadosPorTipoNodoYFecha_column(e){let t=0,a=$("#txtfecha_inicio_GraficoProyecto5").val(),o=$("#txtfecha_fin_GraficoProyecto5").val();1==e&&(t=$("#txtnodo_id").val()),a>o?alertaFechasNoValidas():$.ajax({dataType:"json",type:"get",url:host_url+"/grafico/consultarProyectosFinalizadosPorTipoNodoYFecha/"+t+"/"+a+"/"+o,success:function(e){graficosProyectosAgrupados(e,graficosProyectoId.grafico5,"Tipo de Proyecto")},error:function(e,t,a){alert("Error: "+a)}})}function consultarProyectosInscritosPorTipoNodoYFecha_column(e){let t=0,a=$("#txtfecha_inicio_GraficoProyecto3").val(),o=$("#txtfecha_fin_GraficoProyecto3").val();1==e&&(t=$("#txtnodo_id").val()),$.ajax({dataType:"json",type:"get",url:host_url+"/grafico/consultarProyectosInscritosPorTipoNodoYFecha/"+t+"/"+a+"/"+o,success:function(e){graficosProyectosAgrupados(e,graficosProyectoId.grafico3,"Tipo de Proyecto")},error:function(e,t,a){alert("Error: "+a)}})}function consultarProyectosFinalizadosPorAnho_combinate(e){id=0;let t=$("#txtanho_GraficoProyecto4").val();1==e&&(id=$("#txtnodo_id").val()),$.ajax({dataType:"json",type:"get",url:host_url+"/grafico/consultarProyectosFinalzadosPorAnho/"+id+"/"+t,success:function(e){graficosProyectosPromedioCantidadesMeses(e,graficosProyectoId.grafico4)},error:function(e,t,a){alert("Error: "+a)}})}function consultarProyectosInscritosConEmpresasPorAnho_combinate(e,t){id=0,1==e&&(id=$("#txtnodo_proyectoGrafico1")),$.ajax({dataType:"json",type:"get",url:host_url+"/grafico/consultarProyectosInscritosConEmpresasPorAnho/"+id+"/"+t,success:function(e){graficosProyectosPromedioCantidadesMeses(e,graficosProyectoId.grafico2)},error:function(e,t,a){alert("Error: "+a)}})}function consultarProyectosInscritosPorAnho_combinate(e,t){id=0,1==e&&(id=$("#txtnodo_proyectoGrafico1")),$.ajax({dataType:"json",type:"get",url:host_url+"/grafico/consultarProyectosInscritosPorAnho/"+id+"/"+t,success:function(e){graficosProyectosPromedioCantidadesMeses(e,graficosProyectoId.grafico1)},error:function(e,t,a){alert("Error: "+a)}})}function consultarEdtsDelNodoPorAnho_variablepie(e){let t=$("#txtanho_GraficoEdt4").val(),a=0;1==e&&(a=$("#txtnodo_id").val()),""===a?Swal.fire("Advertencia!","Seleccione un nodo","warning"):$.ajax({dataType:"json",type:"get",url:host_url+"/grafico/consultarEdtsPorNodoYAnho/"+a+"/"+t,success:function(e){Highcharts.chart(graficosEdtId.grafico4,{chart:{type:"variablepie"},title:{text:"Tipos de Edt's."},plotOptions:{variablepie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.y:.0f}",connectorColor:"silver"}}},tooltip:{headerFormat:"",pointFormat:'<span style="color:{point.color}">●</span> <b> {point.name}</b><br/>Cantidad: <b>{point.y}</b><br/>'},series:[{minPointSize:10,innerSize:"20%",zMin:0,name:"",data:[{name:"Tipo 1",y:e.consulta.tipo1,z:15},{name:"Tipo 2",y:e.consulta.tipo2,z:15},{name:"Tipo 3",y:e.consulta.tipo3,z:15}]}]})},error:function(e,t,a){alert("Error: "+a)}})}function consultarEdtsPorLineaYFecha_stacked(e){let t=0;1==e&&(t=$("#txtnodo_id").val());let a=$("#txtfecha_inicio_GraficoEdt3").val(),o=$("#txtfecha_fin_GraficoEdt3").val(),n=$("#txtlinea_id_edtGrafico3").val();""==n?Swal.fire("Advertencia!","Selecciona una Línea Tecnológica!","warning"):a>o?Swal.fire("Advertencia!","Selecciona fecha válidas!","warning"):$.ajax({dataType:"json",type:"get",url:host_url+"/grafico/consultarEdtsPorLineaYFecha/"+n+"/"+t+"/"+a+"/"+o,success:function(e){Highcharts.chart(graficosEdtId.grafico3,{chart:{type:"column"},title:{text:"Tipos de Edt's"},xAxis:{categories:["Tipo 1","Tipo 2","Tipo 3"],title:{text:"Tipos de Edt's"}},yAxis:{min:0,title:{text:"Número de Edt's"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:[{name:e.consulta.lineatecnologica,data:[e.consulta.tipo1,e.consulta.tipo2,e.consulta.tipo3]}]})},error:function(e,t,a){alert("Error: "+a)}})}function consultarEdtsPorGestorYFecha_stacked(e){let t=0;1==e&&(t=$("#txtnodo_id").val());let a=$("#txtfecha_inicio_edtGrafico2").val(),o=$("#txtfecha_fin_edtGrafico2").val(),n=$("#txtgestor_id_edtGrafico2").val();""==n?Swal.fire("Advertencia!","Selecciona un experto!","warning"):a>o?Swal.fire("Advertencia!","Selecciona fecha válidas!","warning"):$.ajax({dataType:"json",type:"get",url:host_url+"/grafico/consultarEdtsPorGestorYFecha/"+n+"/"+t+"/"+a+"/"+o,success:function(e){Highcharts.chart(graficosEdtId.grafico2,{chart:{type:"column"},title:{text:"Tipos de Edt's"},xAxis:{categories:["Tipo 1","Tipo 2","Tipo 3"],title:{text:"Tipos de Edt's"}},yAxis:{min:0,title:{text:"Número de Edt's"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:[{name:e.consulta.gestor,data:[e.consulta.tipo1,e.consulta.tipo2,e.consulta.tipo3]}]})},error:function(e,t,a){alert("Error: "+a)}})}function consultarEdtsPorNodoGestorYFecha_stacked(e){let t=$("#txtfecha_inicio_edtGrafico1").val(),a=$("#txtfecha_fin_edtGrafico1").val(),o=0;1==e&&(o=$("#txtnodo_id").val()),t>a?Swal.fire("Advertencia!","Selecciona fecha válidas!","warning"):$.ajax({dataType:"json",type:"get",url:host_url+"/grafico/consultarEdtsPorNodoGestorYFecha/"+o+"/"+t+"/"+a,success:function(e){for(var o=e.consulta.length,n={gestores:[],tipo1Array:[],tipo2Array:[],tipo3Array:[]},i=0;i<o;i++)null!=e.consulta[i].gestor&&n.gestores.push(e.consulta[i].gestor);for(i=0;i<o;i++)null!=e.consulta[i].tipos1&&n.tipo1Array.push(e.consulta[i].tipos1);for(i=0;i<o;i++)null!=e.consulta[i].tipos2&&n.tipo2Array.push(e.consulta[i].tipos2);for(i=0;i<o;i++)null!=e.consulta[i].tipos3&&n.tipo3Array.push(e.consulta[i].tipos3);var r=[];for(i=0;i<o;i++){let e='{"name": "'+n.gestores[i]+'", "data": ['+n.tipo1Array[i]+", "+n.tipo2Array[i]+", "+n.tipo3Array[i]+"]}";e=JSON.parse(e),r.push(e)}Highcharts.chart(graficosEdtId.grafico1,{chart:{type:"column"},title:{text:"Edt's entre "+t+" y "+a},xAxis:{categories:["Tipo 1","Tipo 2","Tipo 3"],title:{text:"Tipos de Edt's"}},yAxis:{min:0,title:{text:"Número de Edts's"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:r})},error:function(e,t,a){alert("Error: "+a)}})}function consultarTiposDeArticulacionesDelAnho_variablepie(e){let t=$("#txtanho_Grafico4").val(),a=0;1==e&&(a=$("#txtnodo_id").val()),""===a?Swal.fire("Advertencia!","Seleccione un nodo","warning"):$.ajax({dataType:"json",type:"get",url:host_url+"/grafico/consultarArticulacionesPorNodoYAnho/"+a+"/"+t,success:function(e){Highcharts.chart(graficosId.grafico4,{chart:{type:"variablepie"},title:{text:"Tipos de Articulación."},plotOptions:{variablepie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.y:.0f}",connectorColor:"silver"}}},tooltip:{headerFormat:"",pointFormat:'<span style="color:{point.color}">●</span> <b> {point.name}</b><br/>Cantidad: <b>{point.y}</b><br/>'},series:[{minPointSize:10,innerSize:"20%",zMin:0,name:"",data:[{name:"Grupos de Investigación",y:e.consulta.grupos,z:15},{name:"Empresas",y:e.consulta.empresas,z:15},{name:"Emprendedores",y:e.consulta.emprendedores,z:15}]}]})},error:function(e,t,a){alert("Error: "+a)}})}function articulacionesGrafico1Ajax(e,t,a){$.ajax({dataType:"json",type:"get",url:host_url+"/grafico/consultarArticulacionesPorNodo/"+e+"/"+t+"/"+a,success:function(e){for(var o=e.consulta.length,n={gestores:[],gruposArray:[],empresasArray:[],emprendedoresArray:[]},i=0;i<o;i++)null!=e.consulta[i].gestor&&n.gestores.push(e.consulta[i].gestor);for(i=0;i<o;i++)null!=e.consulta[i].grupos&&n.gruposArray.push(e.consulta[i].grupos);for(i=0;i<o;i++)null!=e.consulta[i].empresas&&n.empresasArray.push(e.consulta[i].empresas);for(i=0;i<o;i++)null!=e.consulta[i].emprendedores&&n.emprendedoresArray.push(e.consulta[i].emprendedores);var r=[];for(i=0;i<o;i++){let e='{"name": "'+n.gestores[i]+'", "data": ['+n.gruposArray[i]+", "+n.empresasArray[i]+", "+n.emprendedoresArray[i]+"]}";e=JSON.parse(e),r.push(e)}Highcharts.chart(graficosId.grafico1,{chart:{type:"column"},title:{text:"Articulaciones entre "+t+" y "+a},xAxis:{categories:["Grupos de Investigación","Empresas","Emprendedores"],title:{text:"Tipos de Articulaciones"}},yAxis:{min:0,title:{text:"Número de Articulaciones"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:r})},error:function(e,t,a){alert("Error: "+a)}})}function consultaArticulacionesDelGestorPorNodoYFecha_stacked(e){articulacionesGrafico1Ajax(e,$("#txtfecha_inicio_Grafico1").val(),$("#txtfecha_fin_Grafico1").val())}function consultaArticulacionesDelGestorPorNodoYFecha_stackedAdministrador(){let e=$("#txtnodo_id").val();if(""==e)Swal.fire("Advertencia!","Seleccione un Nodo!","warning");else{articulacionesGrafico1Ajax(e,$("#txtfecha_inicio_Grafico1").val(),$("#txtfecha_fin_Grafico1").val())}}function consultarArticulacionesDeUnGestorPorFecha_stacked(){let e=$("#txtfecha_inicio_Grafico2").val(),t=$("#txtfecha_fin_Grafico2").val(),a=$("#txtgestor_id").val();""==a?Swal.fire("Advertencia!","Selecciona un experto!","warning"):e>t?Swal.fire("Advertencia!","Selecciona fecha válidas!","warning"):$.ajax({dataType:"json",type:"get",url:host_url+"/grafico/consultarArticulacionesPorGestorYFecha/"+a+"/"+e+"/"+t,success:function(e){Highcharts.chart(graficosId.grafico2,{chart:{type:"column"},title:{text:"Articulaciones"},xAxis:{categories:["Grupos de Investigación","Empresas","Emprendedores"],title:{text:"Tipos de Articulaciones"}},yAxis:{min:0,title:{text:"Número de Articulaciones"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:[{name:e.consulta.gestor,data:[e.consulta.grupos,e.consulta.empresas,e.consulta.emprendedores]}]})},error:function(e,t,a){alert("Error: "+a)}})}function consultarArticulacionesDeUnaLineaDelNodoPorFechas_stacked(e){let t="";t=0==e?0:$("#txtnodo_id").val();let a=$("#txtlinea_tecnologica").val();if(""==a)Swal.fire("Advertencia!","Selecciona una Línea Tecnológica!","warning");else{let e=$("#txtfecha_inicio_Grafico3").val(),o=$("#txtfecha_fin_Grafico3").val();e>o?Swal.fire("Advertencia!","Debes seleccionar fecha válidas!","warning"):$.ajax({dataType:"json",type:"get",url:host_url+"/grafico/consultarCantidadDeArticulacionesPorTipoDeUnaLineaTecnologicaYFecha/"+t+"/"+a+"/"+e+"/"+o,error:function(e,t,a){alert("Error: "+a)},success:function(e){Highcharts.chart(graficosId.grafico3,{chart:{type:"column"},title:{text:"Articulaciones"},xAxis:{categories:["Grupos de Investigación","Empresas","Emprendedores"],title:{text:"Tipos de Articulaciones"}},yAxis:{min:0,title:{text:"Número de Articulaciones"}},legend:{reversed:!0},plotOptions:{series:{stacking:"normal"}},series:[{name:e.consulta.lineatecnologica,data:[e.consulta.grupos,e.consulta.empresas,e.consulta.emprendedores]}]})}})}}var graficosSeguimiento={gestor:"graficoSeguimientoEsperadoPorGestorDeUnNodo_column",nodo_esperado:"graficoSeguimientoDeUnNodo_column",tecnoparque_esperado:"graficoSeguimientoTecnoparque_column",nodo_fases:"graficoSeguimientoDeUnNodoFases_column",tecnoparque_fases:"graficoSeguimientoTecnoparqueFases_column",gestor_fases:"graficoSeguimientoPorGestorFases_column",linea_esperado:"graficoSeguimientoEsperadoPorLineaDeUnNodo_column",linea_actual:"graficoSeguimientoActualPorLineaDeUnNodo_column",inscritos_mes:"graficoSeguimientoInscritosPorMes_column"};let graficosArticulacionSeguimiento={nodo_fases:"graficoSeguimientoArticulacionDeUnNodoFases_column",inscritos_mes:"graficoSeguimientoArticulacionesInscritasPorMes_column"};function alertaLineaNoValido(){Swal.fire("Advertencia!","Seleccione una línea tecnológica","warning")}function alertaGestorNoValido(){Swal.fire("Advertencia!","Seleccione un experto","warning")}function alertaNodoNoValido(){Swal.fire("Advertencia!","Seleccione por lo menos un nodo","warning")}function consultarSeguimientoDeUnGestor(e){$.ajax({dataType:"json",type:"get",url:host_url+"/seguimiento/seguimientoEsperadoDeUnGestor/"+e,success:function(e){graficoSeguimientoEsperado(e,graficosSeguimiento.gestor)},error:function(e,t,a){alert("Error: "+a)}})}function consultarSeguimientoEsperadoDeUnaLinea(e){let t=null,a=null;if(0==e){if(""==(a=$("#txtlinea_esperado").val()))return alertaLineaNoValido()}else{if(a=$("#txtlinea_esperado").val(),t=$("#txtnodo_linea_esperado").val(),""==a)return alertaLineaNoValido();if(""==t)return alertaNodoNoValido()}$.ajax({dataType:"json",type:"get",url:host_url+"/seguimiento/seguimientoEsperadoDeUnaLinea/"+a+"/"+t,success:function(e){graficoSeguimientoEsperado(e,graficosSeguimiento.linea_esperado)},error:function(e,t,a){alert("Error: "+a)}})}function consultarProyectosInscritosPorMes(e){null==e?alertaGestorNoValido():$.ajax({dataType:"json",type:"get",url:host_url+"/seguimiento/seguimientoInscritosPorMesExperto/"+e,success:function(e){graficoSeguimientoPorMes(e,graficosSeguimiento.inscritos_mes)},error:function(e,t,a){alert("Error: "+a)}})}function consultarSeguimientoActualDeUnaLinea(e){let t=null,a=null;if(0==e){if(""==(a=$("#txtlinea_actual").val()))return alertaLineaNoValido()}else{if(a=$("#txtlinea_actual").val(),t=$("#txtnodo_linea_actual").val(),""==a)return alertaLineaNoValido();if(""==t)return alertaNodoNoValido()}$.ajax({dataType:"json",type:"get",url:host_url+"/seguimiento/seguimientoActualDeUnaLinea/"+a+"/"+t,success:function(e){graficoSeguimientoFases(e,graficosSeguimiento.linea_actual)},error:function(e,t,a){alert("Error: "+a)}})}function consultarSeguimientoActualDeUnGestor(e){$.ajax({dataType:"json",type:"get",url:host_url+"/seguimiento/seguimientoActualDeUnGestor/"+e,success:function(e){graficoSeguimientoFasesNoGroup(e,graficosSeguimiento.gestor_fases)},error:function(e,t,a){alert("Error: "+a)}})}function consultarSeguimientoEsperadoDeTecnoparque(){$.ajax({dataType:"json",type:"get",url:host_url+"/seguimiento/seguimientoEsperadoDeTecnoparque/",success:function(e){graficoSeguimientoEsperado(e,graficosSeguimiento.tecnoparque_esperado)},error:function(e,t,a){alert("Error: "+a)}})}function consultarSeguimientoDeTecnoparqueFases(){$.ajax({dataType:"json",type:"get",url:host_url+"/seguimiento/seguimientoDeTecnoparqueFases/",success:function(e){graficoSeguimientoFases(e,graficosSeguimiento.tecnoparque_fases)},error:function(e,t,a){alert("Error: "+a)}})}function graficoSeguimientoEsperado(e,t){let a=[],o=[],n=[];e.datos.forEach(e=>{a.push(e.nodo),o.push(e.trl6),n.push(e.trl7_8)}),Highcharts.chart(t,{chart:{type:"column"},title:{text:"Proyectos que se encuentran activos"},yAxis:{min:0,title:{text:"Cantidad de proyectos"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:Highcharts.defaultOptions.title.style&&Highcharts.defaultOptions.title.style.color||"gray",textOutline:"none"}}},xAxis:{title:{text:"Nodos"},categories:a},legend:{align:"left",x:70,verticalAlign:"top",y:20,floating:!0,backgroundColor:Highcharts.defaultOptions.legend.backgroundColor||"white",borderColor:"#CCC",borderWidth:1,shadow:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}},series:[{name:"TRL 6 esperado",data:o},{name:"TRL 7 y 8 esperado",data:n}]})}function graficoSeguimientoPorMes(e,t){Highcharts.chart(t,{title:{text:"Proyectos inscritos por mes en el año actual"},subtitle:{text:"Cuando el mes no aparece es porque el valor es cero(0)"},yAxis:{title:{text:"Cantidad de proyectos"}},xAxis:{categories:e.datos.meses,accessibility:{rangeDescription:"Mes"}},legend:{layout:"vertical",align:"right",verticalAlign:"middle"},series:[{name:"Proyectos inscritos",data:e.datos.cantidades}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}})}function graficoSeguimientoArticulacionesPorMes(e,t){Highcharts.chart(t,{title:{text:"Articulaciones inscritas por mes en el año actual"},subtitle:{text:"Cuando el mes no aparece es porque el valor es cero(0)"},yAxis:{title:{text:"Cantidad de articulaciones"}},xAxis:{title:{text:"Mes"},categories:e.datos.meses,accessibility:{rangeDescription:"Mes"}},legend:{layout:"vertical",align:"right",verticalAlign:"middle"},series:[{name:"Articulaciones inscritas",data:e.datos.cantidades}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}})}function graficoSeguimientoFases(e,t){let a=[],o=[],n=[],i=[],r=[],s=[],l=[];e.datos.forEach(e=>{a.push(e.nodo),o.push(e.inicio),n.push(e.planeacion),i.push(e.ejecucion),r.push(e.cierre),s.push(e.finalizado),l.push(e.suspendido)}),Highcharts.chart(t,{chart:{type:"column"},title:{text:"Proyectos actuales y finalizados en el año actual"},xAxis:{title:{text:"Nodos/Expertos"},categories:a},yAxis:{min:0,title:{text:"Cantidad de proyectos"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:Highcharts.defaultOptions.title.style&&Highcharts.defaultOptions.title.style.color||"gray",textOutline:"none"}}},legend:{align:"left",x:70,verticalAlign:"top",y:20,floating:!0,backgroundColor:Highcharts.defaultOptions.legend.backgroundColor||"white",borderColor:"#CCC",borderWidth:1,shadow:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}},series:[{name:"Inicio",data:o},{name:"Planeación",data:n},{name:"Ejecución",data:i},{name:"Cierre",data:r},{name:"Finalizado",data:s},{name:"Cancelado",data:l}]})}function graficoSeguimientoArticulacionesFases(e,t){let a=[],o=[],n=[],i=[],r=[],s=[];e.datos.forEach(e=>{a.push(e.nodo),o.push(e.inicio),n.push(e.ejecucion),i.push(e.cierre),r.push(e.finalizado),s.push(e.suspendido)}),Highcharts.chart(t,{chart:{type:"column"},title:{text:"Articulaciones actuales y finalizadas en el año actual"},xAxis:{title:{text:"Nodos"},categories:a},yAxis:{min:0,title:{text:"Cantidad de Articulaciones"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:Highcharts.defaultOptions.title.style&&Highcharts.defaultOptions.title.style.color||"gray",textOutline:"none"}}},legend:{align:"left",x:70,verticalAlign:"top",y:20,floating:!0,backgroundColor:Highcharts.defaultOptions.legend.backgroundColor||"white",borderColor:"#CCC",borderWidth:1,shadow:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}},series:[{name:"Inicio",data:o},{name:"Ejecución",data:n},{name:"Cierre",data:i},{name:"Finalizado",data:r},{name:"Cancelado",data:s}]})}function graficoSeguimientoFasesNoGroup(e,t){Highcharts.chart(t,{chart:{type:"column"},title:{text:"Proyectos actuales y finalizados en el año actual"},yAxis:{title:{text:"Cantidad"}},xAxis:{type:"category"},legend:{enabled:!1},tooltip:{headerFormat:'<span style="font-size:11px">Cantidad</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>{point.y}</b><br/>'},series:[{colorByPoint:!0,dataLabels:{enabled:!0},data:[{name:"Proyectos en inicio",y:e.datos.Inicio},{name:"Proyectos en planeación",y:e.datos.Planeacion},{name:"Proyectos en ejecución",y:e.datos.Ejecucion},{name:"Proyectos en cierre",y:e.datos.Cierre},{name:"Proyectos finalizados",y:e.datos.Finalizado},{name:"Proyectos cancelados",y:e.datos.Suspendido},{name:"Total de proyecto en el año actual",y:e.datos.Total}]}]})}var graficosCostos={actividad:"costosDeUnProyecto_column",proyectos:"costosDeProyectos_column",proyectos_ipe:"costosDeProyectos_ipe_column"};function setValueInput(e,t){$("#txtcosto_asesorias"+t).val(formatMoney(e.costosAsesorias)),$("label[for='txtcosto_asesorias"+t+"']").addClass("active",!0),$("#txtcostos_equipos"+t).val(formatMoney(e.costosEquipos)),$("label[for='txtcostos_equipos"+t+"']").addClass("active",!0),$("#txtcostos_materiales"+t).val(formatMoney(e.costosMateriales)),$("label[for='txtcostos_materiales"+t+"']").addClass("active",!0),$("#txtcostos_administrativos"+t).val(formatMoney(e.costosAdministrativos)),$("label[for='txtcostos_administrativos"+t+"']").addClass("active",!0),$("#txtcosto_total"+t).val(formatMoney(e.costosTotales)),$("label[for='txtcosto_total"+t+"']").addClass("active",!0),$("#txthoras_asesoria"+t).val(e.horasAsesorias),$("label[for='txthoras_asesoria"+t+"']").addClass("active",!0),$("#txthoras_uso"+t).val(e.horasEquipos),$("label[for='txthoras_uso"+t+"']").addClass("active",!0)}function consultarCostosDeProyectos(e,t){let a,o,n,i=0,r=[],s="";if(1==t?(s="_proyectos",a=$("input[name='estado']:checked").val(),o=$("#txtfecha_inicio_costosProyectos").val(),n=$("#txtfecha_fin_costosProyectos").val(),$("input[name='tipoProyecto[]']:checked").each(function(e,t){r.push($(this).val())})):(s="_proyectos_ipe",a=$("input[name='estado_ipe']:checked").val(),o=$("#txtfecha_inicio_costosProyectos_ipe").val(),n=$("#txtfecha_fin_costosProyectos_ipe").val(),$("input[name='tipoProyecto_ipe[]']:checked").each(function(e,t){r.push($(this).val())})),1==e&&(i=$("#txtnodo_id").val()),""===i)Swal.fire("Advertencia!","Seleccione un nodo","warning");else if(0==r.length)Swal.fire("Advertencia!","Seleccione por lo menos un tipo de proyecto","warning");else if(null==a)Swal.fire("Advertencia!","Seleccione un estado de proyecto","warning");else if(o>n)Swal.fire("Advertencia!","Seleccione fecha válidas","warning");else{let e=JSON.stringify(r);$.ajax({dataType:"json",type:"get",url:host_url+"/costos/costosDeProyectos/"+i+"/"+e+"/"+a+"/"+o+"/"+n+"/"+t,success:function(e){setValueInput(e,s),graficoCostos(e,1==t?graficosCostos.proyectos:graficosCostos.proyectos_ipe,"Proyectos")},error:function(e,t,a){alert("Error: "+a)}})}}function consultarCostoDeUnaActividad(){let e=$("#txtactividad_id").val();""===e?Swal.fire("Advertencia!","Seleccione una actividad","warning"):$.ajax({dataType:"json",type:"get",url:host_url+"/costos/proyecto/"+e,success:function(e){let t="_actividad";setValueInput(e,t),$("#txtgestor"+t).val(e.gestorActividad),$("label[for='txtgestor"+t+"']").addClass("active",!0),$("#txtlinea"+t).val(e.lineaActividad),$("label[for='txtlinea"+t+"']").addClass("active",!0),graficoCostos(e,graficosCostos.actividad,e.codigoActividad)},error:function(e,t,a){alert("Error: "+a)}})}function graficoCostos(e,t,a){Highcharts.chart(t,{exporting:{allowHTML:!0,chartOptions:{chart:{height:600,marginTop:110,events:{load:function(){this.renderer.image("http://drive.google.com/uc?export=view&id=1qLb9tjGI1hEnmEzQ6mPzxqv1zjMtxdMw",80,20,200,47).add(),this.renderer.image("http://drive.google.com/uc?export=view&id=1QLkYJuTk4JaT9nqHF7Rw6eF5p0G3or4C",290,20,200,47).add(),this.update({credits:{text:"Generado: "+Highcharts.dateFormat("%Y-%m-%d %H:%M:%S",Date.now())}})}}},legend:{y:-220},title:{align:"center",y:90}}},chart:{type:"column"},title:{text:"Costos - "+a},yAxis:{title:{text:"$ Pesos"},labels:{format:"$ {value}"}},xAxis:{type:"category"},legend:{enabled:!1,floating:!0},tooltip:{headerFormat:'<span style="font-size:11px">Costos</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>$ {point.y}</b><br/>'},plotOptions:{series:{dataLabels:{enabled:!0},animationLimit:1e3}},series:[{colorByPoint:!0,data:[{name:"Costos de Asesorias",y:e.costosAsesorias},{name:"Costos de Equipos",y:e.costosEquipos},{name:"Costos de Materiales",y:e.costosMateriales},{name:"Costos Administrativos",y:e.costosAdministrativos},{name:"Total de Costos",y:e.costosTotales}]}]})}$(document).ready(function(){let e=$("#filter_node_articulationStage").val(),t=$("#filter_year_articulationStage").val(),a=$("#filter_status_articulationStage").val();""!=e&&null!=e||""!=t&&null!=t||""!=a&&null!=a?""!=e||null!=e||""!=t&&""!=a?articulationStage.filtersDatatableAccompanibles(e,t,a):$("#articulationStage_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},pageLength:10,lengthChange:!1}).clear().draw():articulationStage.filtersDatatableAccompanibles(e=null,t=null,a=null)}),$("#filter_articulationStage").click(function(){let e=$("#filter_node_articulationStage").val(),t=$("#filter_year_articulationStage").val(),a=$("#filter_status_articulationStage").val();$("#articulationStage_data_table").dataTable().fnDestroy(),""!=e&&null!=e||""==t||""==a?""==e&&null==e||""==t||""==a?$("#articulationStage_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},pageLength:10,lengthChange:!1}).clear().draw():articulationStage.filtersDatatableAccompanibles(e,t,a):articulationStage.filtersDatatableAccompanibles(e=null,t,a)}),$("#download_articulationStage").click(function(){const e={filter_node_articulationStage:$("#filter_node_articulationStage").val(),filter_year_articulationStage:$("#filter_year_articulationStage").val(),filter_status_articulationStage:$("#filter_status_articulationStage").val()},t="/etapa-articulaciones/export?"+$.param(e);window.location=t});const articulationStage={filtersDatatableAccompanibles:function(e,t,a){$("#articulationStage_data_table").DataTable({language:{decimal:"",emptyTable:"No hay información",info:"Mostrando _START_ a _END_ de _TOTAL_ Entradas",infoEmpty:"Mostrando 0 to 0 of 0 Entradas",infoFiltered:"(Filtrado de _MAX_ total entradas)",infoPostFix:"",thousands:",",lengthMenu:"Mostrar Entradas _MENU_",loadingRecords:"Cargando...",processing:"Procesando...",search:"Buscar:",zeroRecords:"Sin resultados encontrados",paginate:{first:"Primero",last:"Ultimo",next:"Siguiente",previous:"Anterior"}},lengthMenu:[[5,10,25,50,100,-1],[5,10,25,50,100,"Todos"]],pageLength:10,lengthChange:!1,processing:!1,serverSide:!1,ajax:{url:"/etapa-articulaciones/datatable_filtros",type:"get",data:{filter_node_articulationStage:e,filter_year_articulationStage:t,filter_status_articulationStage:a}},columns:[{data:"node",name:"node"},{data:"articulationstate_name",name:"articulationstate_name"},{data:"articulation_name",name:"articulation_name"},{data:"description",name:"description"},{data:"phase",name:"phase"},{data:"starDate",name:"starDate"},{data:"show",name:"show",orderable:!1}],columnDefs:[{visible:!1,targets:1}],displayLength:25,drawCallback:function(e){let t=this.api(),a=t.rows({page:"current"}).nodes(),o=null;t.column(1,{page:"current"}).data().each(function(e,t){o!==e&&($(a).eq(t).before(`${e}`),o=e)})}})},fill_code_project:function(e=null){articulationStage.emptyResult("result-projects"),e.length>0?$.ajax({dataType:"json",type:"get",url:`/actividades/filter-code/${e}`}).done(function(e){if(200==e.data.status_code){articulationStage.emptyResult("result-talents");let t=e.data.proyecto;$(".result-projects").append(`\n                        <div class="card card-transparent p f-12 m-t-lg">\n                            <div class="card-content">\n                                <span class="card-title p f-12">${t.codigo_proyecto} ${t.nombre}</span>\n                                <div class="position-top-right p f-12 mail-date hide-on-med-and-down">${articulationStage.formatDate(t.fecha_cierre)}</div>\n                                <p>${t.objetivo_general}</p>\n                                <div class="input-field col m12 s12">\n                                    <input type="hidden" name="projects" id="projects" style="display:none" value="${t.id}"/>\n                                </div>\n                            </div>\n                            <div class="card-action">\n                                <a class="waves-effect waves-red btn-flat m-b-xs primary-text" target="_blank" href="/proyecto/detalle/${t.id}"><i class="material-icons left">link</i>Ver más</a>\n                            </div>\n                        </div>`),0!=t.talentos.length&&$.each(t.talentos,function(e,t){1==t.pivot.talento_lider&&$(".result-talents").append(`\n                                    <div class="card card-transparent p f-12 m-t-lg">\n                                        <div class="card-content">\n                                            <span class="card-title p f-12">${t.documento} - ${t.nombres} ${t.apellidos}</span>\n                                            <div class="input-field col m12 s12">\n                                                <input type="hidden" name="talent" id="talent" style="display:none" value="${t.id}"/>\n                                            </div>\n                                            <div class="position-top-right p f-12 mail-date hide-on-med-and-down">  Acceso al sistema: ${userSearch.state(t.estado)}</div>\n                                            <p class="hide-on-med-and-down"> Miembro desde ${articulationStage.formatDate(t.created_at)}</p>\n                                        </div>\n                                        <div class="card-action">\n                                            <a target="_blank"  class="waves-effect waves-red btn-flat m-b-xs primary-text" href="/usuarios/${t.documento}"><i class="material-icons left">link</i>Ver más</a>\n                                        </div>\n                                    </div>`)})}else articulationStage.notFound("result-projects","projects"),articulationStage.notFound("result-talents","talent")}):(articulationStage.emptyResult("result-projects"),articulationStage.emptyResult("result-talents"),articulationStage.notFound("result-projects","projects"),articulationStage.notFound("result-talents","talent"))},queryProyectosFaseInicioTable:function(e=null){$("#datatable_projects_finalizados").dataTable().fnDestroy(),$("#datatable_projects_finalizados").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,ajax:{url:"/proyecto/datatableproyectosfinalizados",type:"get",data:{filter_year_pro:e}},columns:[{data:"codigo_proyecto",name:"codigo_proyecto"},{data:"nombre",name:"nombre"},{data:"fase",name:"fase"},{data:"add_proyecto",name:"add_proyecto",orderable:!1}]}),$("#filter_project_advanced_modal").openModal()},addProjectToArticulacion:function(e){articulationStage.fill_code_project(e),articulationStage.emptyResult("result-talents"),$("#filter_project_advanced_modal").closeModal()},emptyResult:function(e){null!=e&&$("."+e).empty()},notFound:function(e,t=null){if(null!=e)return $("."+e).append(`\n                <div class="col s12 m12 l12">\n                    <div class="card card-transparent p f-12 m-t-lg">\n                        <div class="card-content">\n                            <span class="card-title p f-12 ">No se encontraron resultados</span>\n                            <div class="input-field col m12 s12">\n                            <input type="hidden" name="${t}" id="${t}" style="display:none"/>\n                        </div>\n                        </div>\n                    </div>\n                </div>`)},formatDate:function(e){return null==e?"no registra":moment(e).format("LL")},searchUser:function(e){null!=e?(articulationStage.emptyResult("result-talents"),$.ajax({dataType:"json",type:"get",url:`${host_url}/usuarios/filtro-talento/${e}`}).done(function(e){if(200==e.data.status_code){let t=e.data.user;$(".result-talents").append(`<div class="card card-transparent p f-12 m-t-lg">\n                            <div class="card-content">\n                                <span class="card-title p f-12 ">${t.documento} - ${t.nombres} ${t.apellidos}</span>\n                                <div class="input-field col m12 s12">\n                                    <input type="hidden" name="talent" id="talent" style="display:none" value="${t.id}"/>\n                                </div>\n                                <p class="position-top-right p f-12 mail-date hide-on-med-and-down"> Acceso al sistema: `+userSearch.state(t.estado)+`</p>\n                                <div class="mailbox-text p f-12 hide-on-med-and-down">\n                                    Miembro desde ${articulationStage.formatDate(t.created_at)}\n                                </div>\n                            </div>\n                            <div class="card-action">\n                                <a target="_blank"  class="waves-effect waves-red btn-flat m-b-xs primary-text" href="/usuarios/`+t.documento+'"><i class="material-icons left"> link</i>Ver más</a>\n                            </div>\n                        </div>\n                    ')}else articulationStage.emptyResult("result-talents"),articulationStage.notFound("result-talents","talent")})):(articulationStage.emptyResult("result-talents"),articulationStage.notFound("result-talents","talent"))},queryTalentos:function(){$("#datatable_interlocutor_talents").dataTable().fnDestroy(),$("#datatable_interlocutor_talents").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,ajax:{url:`${host_url}/usuarios/clientes`,type:"get"},columns:[{data:"documento",name:"documento"},{data:"talento",name:"talento"},{data:"add_intertocutor_talent_articulation",name:"add_intertocutor_talent_articulation",orderable:!1}]}),$("#filter_talents_advanced_modal").openModal()},addInterlocutorTalentArticulacion:function(e){0==articulationStage.noRepeat(e)?articulationStage.talentAssociated():(articulationStage.emptyResult("talent-empty"),articulationStage.printInterlocutorTalentoInTable(e)),$("#filter_talents_advanced_modal").closeModal()},noRepeat:function(e){let t=e,a=!0,o=document.getElementsByName("talentos[]");for(x=0;x<o.length;x++)if(o[x].value==t){a=!1;break}return a},talentAssociated:function(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"El talento ya se encuentra asociado a la articulación!"})},printInterlocutorTalentoInTable:function(e){$.ajax({dataType:"json",type:"get",url:`${host_url}/usuarios/cliente/${e}`}).done(function(e){null!=e?articulationStage.searchUser(e.talento.documento):(articulationStage.emptyResult("result-talents"),articulationStage.notFound("result-talents","talent"))})},messageAccompaniable:function(e,t,a){201==e.status_code&&(Swal.fire({title:a,text:"La fase de articulación  ha sido "+t+" satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace(e.url)},1e3)),404==e.state&&Swal.fire({title:"La fase de articulación  no se ha "+t+", por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})},updateInterlocutor:function(e,t,a){$.ajax({type:e.attr("method"),url:a,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErroresFormulario(e.data),articulationStage.messageAccompaniable(e.data,"actualizado","Modificación Exitosa")},error:function(e,t,a){Swal.fire({title:"Error, vuelve a intentarlo",html:"Error: "+t,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}})},destroyArticulationStage:function(e){Swal.fire({title:"¿Estas seguro de eliminar esta fase de articulación?",text:"Recuerde que si lo elimina no lo podrá recuperar.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"si, eliminar",cancelButtonText:"No, cancelar"}).then(t=>{if(t.value){let t=$("meta[name='csrf-token']").attr("content");$.ajax({url:host_url+"/etapa-articulaciones/"+e,type:"DELETE",data:{id:e,_token:t},success:function(e){e.fail?Swal.fire("Cuidado!","La fase de articulación no se ha eliminado, ya que continene articulaciones.","warining"):(Swal.fire("Eliminado!","La fase de articulación ha sido eliminado satisfactoriamente.","success"),location.href=e.redirect_url)},error:function(e,t,a){Swal.fire({title:"Error, vuelve a intentarlo",html:"Error: "+t,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}})}})},changeStateArticulationStage:function(e){Swal.fire({title:"¿Estas seguro de cambiar el estado de esta fase de articulación?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"si, cambiar",cancelButtonText:"No, cancelar"}).then(t=>{if(t.value){let t=$("meta[name='csrf-token']").attr("content");$.ajax({url:`${host_url}/etapa-articulaciones/${e}/cambiar-estado`,type:"PUT",data:{_token:t},success:function(e){e.fail?Swal.fire("Cuidado!","La etapa de articulación no se ha eliminado, ya que continene articulaciones.","warining"):(Swal.fire("Actialización exitosa!","La etapa de articulación ha sido actualizada satisfactoriamente.","success"),location.href=e.redirect_url)},error:function(e,t,a){Swal.fire({title:"Error, vuelve a intentarlo",html:"Error: "+t,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}})}})}};function endorsementQuestionArticulationStage(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de aprobar el aval?",text:"Al hacerlo estás aceptando y aprobando toda la información de esta fase de articulación, los documento adjuntos y las asesorias recibidas.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{$('button[type="submit"]').attr("disabled",!1),e.value&&($("#decision").val("aceptado"),document.frmEndorsementArticulationStage.submit())})}function questionRejectEndorsementArticulationStage(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de no aprobar el aval?",input:"text",type:"warning",inputValidator:e=>{if(!e)return"Las observaciones deben ser obligatorias!";$("#decision").val("rechazado"),$("#motivosNoAprueba").val(e)},inputAttributes:{maxlength:100,placeHolder:"¿Por qué?"},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Enviar observaciones!"}).then(e=>{e.value&&document.frmEndorsementArticulationStage.submit()})}function endorsementQuestionArticulation(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de aprobar el aval?",text:"Al hacerlo estás aceptando y aprobando toda la información de esta fase de articulación, los documento adjuntos y las asesorias recibidas.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{$('button[type="submit"]').attr("disabled",!1),e.value&&($("#decision").val("aceptado"),document.getElementById("frmApprovalArticulations").submit())})}function questionRejectEndorsementArticulation(e){e.preventDefault(),Swal.fire({title:"¿Está seguro(a) de no aprobar el aval?",input:"text",type:"warning",inputValidator:e=>{if(!e)return"Las observaciones deben ser obligatorias!";$("#decision").val("rechazado"),$("#motivosNoAprueba").val(e)},inputAttributes:{maxlength:100,placeHolder:"¿Por qué?"},showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Enviar observaciones!"}).then(e=>{e.value&&document.getElementById("frmApprovalArticulations").submit()})}function changeNextPhaseArticulation(e){e.preventDefault(),$('button[type="submit"]').attr("disabled",!0),Swal.fire({title:"¿Está seguro(a) de continuar a la siguiente fase?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{$('button[type="submit"]').attr("disabled",!1),e.value&&document.frmChangeNextPhase.submit()})}function changePreviusPhaseArticulation(e){e.preventDefault(),$('button[type="submit"]').attr("disabled",!0),Swal.fire({title:"¿Está seguro(a) de volver a la anterior fase?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Sí!"}).then(e=>{$('button[type="submit"]').attr("disabled",!1),e.value&&document.frmChangePreviusPhase.submit()})}$(document).on("submit","form#interlocutor-form",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();const t=$(this),a=new FormData($(this)[0]),o=t.attr("action");articulationStage.updateInterlocutor(t,a,o)}),$(document).ready(function(){$("#articulation_data_table").DataTable({language:{decimal:"",emptyTable:"No hay información",info:"Mostrando _START_ a _END_ de _TOTAL_ Entradas",infoEmpty:"Mostrando 0 to 0 of 0 Entradas",infoFiltered:"(Filtrado de _MAX_ total entradas)",infoPostFix:"",thousands:",",lengthMenu:"Mostrar Entradas _MENU_",loadingRecords:"Cargando...",processing:"Procesando...",search:"Buscar:",zeroRecords:"Sin resultados encontrados",paginate:{first:"Primero",last:"Ultimo",next:"Siguiente",previous:"Anterior"}},lengthMenu:[[5,10,-1],[5,10,"Todos"]],autoWidth:!1,columnDefs:[{targets:["_all"],className:"mdc-data-table__cell"}]})}),$(document).ready(function(){const e=$("#articulation-stage-form");$("#articulation-stage-form").validate({rules:{name:{required:!0,minlength:2,maxlength:600},description:{required:!0,maxlength:3e3},expected_results:{required:!0,maxlength:3e3},scope:{required:!0,minlength:2,maxlength:3e3},projects:{required:!0,number:!0},talent:{required:!0,number:!0}},messages:{name:{required:"El campo nombre es obligatorio",minlength:jQuery.validator.format("Necesitamos por lo menos {0} caracteres"),maxlength:jQuery.validator.format("Por favor ingrese no más de {0} caracteres")},description:{required:"El campo descripción es obligatorio",minlength:jQuery.validator.format("Necesitamos por lo menos {0} caracteres"),maxlength:jQuery.validator.format("Por favor ingrese no más de {0} caracteres")},expected_results:{required:"El campo es obligatorio",minlength:jQuery.validator.format("Necesitamos por lo menos {0} caracteres"),maxlength:jQuery.validator.format("Por favor ingrese no más de {0} caracteres")},scope:{required:"El campo alcalce es obligatorio",minlength:jQuery.validator.format("Necesitamos por lo menos {0} caracteres"),maxlength:jQuery.validator.format("Por favor ingrese no más de {0} caracteres")},projects:{required:"Por favor agrega el proyecto"},talent:{required:"Por favor agrega el talento interlocutor"}},errorPlacement:function(e,t){t.is(":radio")?e.appendTo(t.parents(".container-error")):t.is(":file")?e.appendTo(t.parents(".container-error")):t.is(":hidden")?e.appendTo(t.parents(".container-error")):t.after(e)}});e.children("div").steps({headerTag:"h3",bodyTag:"section",transitionEffect:"fade",labels:{cancel:"Cancelar",current:"current step:",pagination:"Paginación",finish:"Guardar",next:"Siguiente >",previous:"< Anterior",loading:"Cargando ..."},onStepChanging:function(t,a,o){return e.validate().settings.ignore=1==a?":disabled,:hidden:not(input[type='hidden'])":":disabled,:hidden",e.valid()},onFinishing:function(t,a){return e.validate().settings.ignore=1==a?":disabled,:hidden:not(input[type='hidden'])":":disabled,:hidden",e.valid()},onFinished:function(t,a){t.preventDefault();const o=new FormData(document.getElementById("articulation-stage-form")),n=e.attr("action");$.ajax({type:e.attr("method"),url:n,data:o,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$(".error").hide(),$('button[type="submit"]').removeAttr("disabled"),printErrorsForm(e),e.fail||null!=e.errors||(Swal.fire({title:e.message,type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.redirect_url},1500))},error:function(e,t,a){Swal.fire({title:" Error, vuelve a intentarlo",html:`${e.status} ${a}`,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}})}}),$(".wizard .actions ul li a").addClass("waves-effect waves-primary btn-flat"),$(".wizard .steps ul").addClass("tabs z-depth-1"),$(".wizard .steps ul li").addClass("tab"),$("ul.tabs").tabs(),$("select").material_select(),$(".select-wrapper.initialized").prev("ul").remove(),$(".select-wrapper.initialized").prev("input").remove(),$(".select-wrapper.initialized").prev("span").remove(),$.validator.addMethod("accept",function(e,t,a){return t.files[0].type==a},"El archivo debe tener formato PDF"),$("#filter_code_project").click(function(){let e=$("#filter_code").val();(""!=e||null!=e||e.length>0)&&articulationStage.fill_code_project(e)}),$("#filter_project_modal").click(function(){let e=$("#filter_year_pro").val();articulationStage.queryProyectosFaseInicioTable(e)}),$("#filter_project_advanced").click(function(){let e=$("#filter_year_pro").val();articulationStage.queryProyectosFaseInicioTable(e)}),$("#search_talent").click(function(){let e=$("#txtsearch_user").val();e.length>0?articulationStage.searchUser(e):(articulationStage.emptyResult("result-talents"),articulationStage.notFound("result-talents"))}),$("#filter_talents_advanced").click(function(){articulationStage.queryTalentos()}),$(".datepicker_accompaniable_date").pickadate({selectMonths:!0,selectYears:10,labelMonthNext:"Próximo Mes",labelMonthPrev:"Mes anterior",labelMonthSelect:"Selecione Mes",labelYearSelect:"Selecione Año",monthsFull:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],weekdaysFull:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],weekdaysLetter:["D","L","M","Mi","J","V","S"],today:"Hoy",clear:"Limpiar",close:"Cerrar",format:"yyyy-mm-dd",onClose:function(){$(document.activeElement).blur()}}),$(".datepicker_accompaniable_max_date").pickadate({selectMonths:!0,selectYears:10,labelMonthNext:"Próximo Mes",labelMonthPrev:"Mes anterior",labelMonthSelect:"Selecione Mes",labelYearSelect:"Selecione Año",monthsFull:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],weekdaysFull:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],weekdaysLetter:["D","L","M","Mi","J","V","S"],today:"Hoy",clear:"Limpiar",close:"Cerrar",max:new Date,format:"yyyy-mm-dd",onClose:function(){$(document.activeElement).blur()}})}),$(document).ready(function(){let e=$("#articulation-form");$("#articulation-form").validate({rules:{articulation_type:{required:!0},articulation_subtype:{required:!0},start_date:{required:!0,date:!0},name:{required:!0,minlength:1,maxlength:600},description:{required:!0,minlength:1,maxlength:3e3},scope:{required:!0},talents:{required:!0,number:!0},name_entity:{required:!0,maxlength:100},name_contact:{required:!0,maxlength:100},email_entity:{required:!0,email:!0,maxlength:191},summon_name:{maxlength:100},expected_date:{required:!0,date:!0},objective:{required:!0,maxlength:3e3}},messages:{articulation_type:{required:"Por favor selecciona el tipo de articulación"},articulation_subtype:{required:"Por favor selecciona el tipo de subarticulación"},start_date:{required:"Este campo es obligatorio",date:"Por favor introduzca una fecha válida"},name:{required:"Este campo es obligatorio",minlength:jQuery.validator.format("Necesitamos por lo menos {0} caracteres"),maxlength:jQuery.validator.format("Por favor ingrese no más de {0} caracteres")},description:{required:"Este campo es obligatorio",minlength:jQuery.validator.format("Necesitamos por lo menos {0} caracteres"),maxlength:jQuery.validator.format("Por favor ingrese no más de {0} caracteres")},scope:{required:"Por favor seleccione un alcance"},talents:{required:"Por favor agrega por lo menos un talento participante"},name_entity:{required:"Este campo es obligatorio",maxlength:jQuery.validator.format("Por favor ingrese no más de {0} caracteres")},name_contact:{required:"Este campo es obligatorio",maxlength:jQuery.validator.format("Por favor ingrese no más de {0} caracteres")},email_entity:{required:"Este campo es obligatorio",email:"Por favor, introduce una dirección de correo electrónico válida."},summon_name:{minlength:jQuery.validator.format("Necesitamos por lo menos {0} caracteres"),maxlength:jQuery.validator.format("Por favor ingrese no más de {0} caracteres")},expected_date:{required:"Este campo es obligatorio",date:"Por favor introduzca una fecha válida"},objective:{required:"Este campo es obligatorio",maxlength:jQuery.validator.format("Por favor ingrese no más de {0} caracteres")}},errorPlacement:function(e,t){t.is(":radio")?e.appendTo(t.parents(".container-error")):t.is(":file")?e.appendTo(t.parents(".container-error")):t.is(":hidden")?e.appendTo(t.parents(".container-error")):t.after(e)}});e.children("div").steps({headerTag:"h3",bodyTag:"section",transitionEffect:"fade",labels:{cancel:"Cancelar",current:"current step:",pagination:"Paginación",finish:"Guardar",next:"Siguiente >",previous:"< Anterior",loading:"Cargando ..."},onStepChanging:function(t,a,o){return e.validate().settings.ignore=3==a?":disabled,:hidden:not(input[type='hidden'])":":disabled,:hidden",e.valid()},onFinishing:function(t,a){return e.validate().settings.ignore=":disabled,:hidden:not(input[type='hidden'])",e.valid()},onFinished:function(t,a){t.preventDefault();const o=new FormData(document.getElementById("articulation-form")),n=e.attr("action");$.ajax({type:e.attr("method"),url:n,data:o,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),printErrorsForm(e.data),filter_articulations.messageArticulation(e.data,"registrada","Registro exitoso")},error:function(e,t,a){alert("Error: "+a)}})}}),$(".wizard .actions ul li a").addClass("waves-effect waves-primary btn-flat"),$(".wizard .steps ul").addClass("tabs z-depth-1"),$(".wizard .steps ul li").addClass("tab"),$("ul.tabs").tabs(),$("select").material_select(),$(".select-wrapper.initialized").prev("ul").remove(),$(".select-wrapper.initialized").prev("input").remove(),$(".select-wrapper.initialized").prev("span").remove(),$(".datepicker_articulation_date").pickadate({selectMonths:!0,selectYears:10,labelMonthNext:"Próximo Mes",labelMonthPrev:"Mes anterior",labelMonthSelect:"Selecione Mes",labelYearSelect:"Selecione Año",monthsFull:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],weekdaysFull:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],weekdaysLetter:["D","L","M","Mi","J","V","S"],today:"Hoy",clear:"Limpiar",close:"Cerrar",format:"yyyy-mm-dd",onClose:function(){$(document.activeElement).blur()}}),$(".datepicker_articulation_max_date").pickadate({selectMonths:!0,selectYears:10,labelMonthNext:"Próximo Mes",labelMonthPrev:"Mes anterior",labelMonthSelect:"Selecione Mes",labelYearSelect:"Selecione Año",monthsFull:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],weekdaysFull:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],weekdaysShort:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],weekdaysLetter:["D","L","M","Mi","J","V","S"],today:"Hoy",clear:"Limpiar",close:"Cerrar",max:new Date,format:"yyyy-mm-dd",onClose:function(){$(document.activeElement).blur()}}),$("#search_talents").click(function(){let e=$("#txtsearch_user").val();e.length>0?filter_articulations.searchUser(e):(filter_articulations.emptyResult("result-talents"),filter_articulations.notFound("result-talents"))}),$("#advanced_talent_filter").click(function(){filter_articulations.queryTalentos()}),$("#show_type_articulations").click(function(){$("#type_articulations_modal").openModal()}),filter_articulations.valueArticulationType(),filter_articulations.changeLabelArticulationSubtype()});const filter_articulations={searchUser:function(e){$(".result-talents").empty(),null==e&&null==e||$.ajax({dataType:"json",type:"get",url:`${host_url}/usuarios/filtro-talento/${e}`}).done(function(e){if(200==e.data.status_code){let t=e.data.user;$(".result-talents").append(`<div class="row">\n                        <div class="col s12 m12 l12">\n                            <div class="card card-panel card-transparent">\n                                <div class="card-content">\n                                    <span class="card-title p f-12 ">${t.documento} - ${t.nombres} ${t.apellidos}</span>\n                                    <p class="position-top-right p f-12 mail-date hide-on-med-and-down"> Acceso al sistema: ${userSearch.state(t.estado)}</p>\n                                    <div class="mailbox-text p f-12 hide-on-med-and-down">Miembro desde ${filter_articulations.formatDate(t.created_at)}</div>\n                                </div>\n                                <div class="card-action">\n                                <a class="waves-effect waves-red btn-flat m-b-xs primary-text" onclick="filter_articulations.addTalentToArticulation(${t.id});" class="primary-text">Agregar</a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>`)}else filter_articulations.notFound("result-talents")})},emptyResult:function(e){null!=e&&$("."+e).empty()},notFound:function(e,t=null){if(null!=e)return $("."+e).append(`\n                <div class="col s12 m12 l12">\n                    <div class="card card-panel card-transparent p f-12 m-t-lg">\n                        <div class="card-content">\n                            <span class="card-title p f-12 ">No se encontraron resultados</span>\n                            <div class="input-field col m12 s12">\n                            <input type="hidden" name="${t}" id="${t}" style="display:none"/>\n                        </div>\n                        </div>\n                    </div>\n                </div>`)},formatDate:function(e){return null==e?"no registra":moment(e).format("LL")},addTalentToArticulation:function(e){filter_articulations.emptyResult("alert-empty-talents"),0==filter_articulations.noRepeat(e)?filter_articulations.talentAssociated():(filter_articulations.emptyResult("talent-empty"),filter_articulations.printTalentoInTable(e)),$("#filter_talents_advanced_modal").closeModal()},noRepeat:function(e){let t=e,a=!0,o=document.getElementsByName("talents[]");for(x=0;x<o.length;x++)if(o[x].value==t){a=!1;break}return a},talentAssociated:function(){Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"warning",title:"El talento ya se encuentra asociado a la articulación!"})},printTalentoInTable:function(e){$.ajax({dataType:"json",type:"get",url:`${host_url}/usuarios/cliente/${e}`}).done(function(e){let t=filter_articulations.prepareTableRowTalent(e);$(".alert-response-talents").append(t)})},printTalentoInTable:function(e){$.ajax({dataType:"json",type:"get",url:`${host_url}/usuarios/cliente/${e}`}).done(function(e){let t=filter_articulations.prepareTableRowTalent(e);$(".alert-response-talents").append(t)})},prepareTableRowTalent:function(e){let t=e;return'<div class="row card-talent'+t.talento.id+`">\n                        <div class="col s12 m12 l12">\n                            <div class="card card-panel server-card">\n                                <div class="card-content">\n                                    <span class="card-title">${t.talento.documento} - ${t.talento.nombres} ${t.talento.apellidos}</span>\n                                    <input type="hidden" id="talents" name="talents[]" value="${t.talento.id}"/>\n                                </div>\n                                <div class="card-action">\n                                    <a target="_blank"  class="waves-effect waves-red btn-flat m-b-xs primary-text" href="/usuarios/${t.talento.documento}"><i class="material-icons left"> link</i>Ver más</a>\n                                    <a onclick="filter_articulations.deleteTalent(${t.talento.id});" class="waves-effect waves-red btn-flat m-b-xs red-text"><i class="material-icons left"> delete_sweep</i>Eliminar</a>\n                                </div>\n                            </div>\n                        </div>\n                    </div>`},deleteTalent:function(e){$(".card-talent"+e).remove(),Swal.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,type:"success",title:"Talento eliminado."})},queryTalentos:function(){$("#datatable_interlocutor_talents").dataTable().fnDestroy(),$("#datatable_interlocutor_talents").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1,processing:!0,serverSide:!0,ajax:{url:`${host_url}/usuarios/clientes`,type:"get"},columns:[{data:"documento",name:"documento"},{data:"talento",name:"talento"},{data:"add_talents_articulation",name:"add_talents_articulation",orderable:!1}]}),$("#filter_talents_advanced_modal").openModal()},messageArticulation:function(e,t,a){201==e.status_code?(Swal.fire({title:a,text:"La articulación ha sido "+t+" satisfactoriamente",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.replace(e.url)},1e3)):Swal.fire({title:"La articulación no se ha "+t+", por favor inténtalo de nuevo",type:"warning",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})},valueArticulationType:function(){$("#articulation_type").on("change",function(){let e=$(this).val();null==e&&""==e||$.ajax({dataType:"json",type:"get",url:`/tipoarticulaciones/${e}/tiposubarticulaciones`}).done(function(e){$("#articulation_subtype").empty(),$("#articulation_subtype").append('<option value="">Seleccione el tipo de subarticulación</option>'),$.each(e.data,function(e,t){$("#articulation_subtype").append(`<option  value="${t.id}">${t.name}</option>`)}),$("#articulation_subtype").material_select()})})},changeLabelArticulationSubtype:function(){},updateTalentsParticipants:function(e,t,a){$.ajax({type:e.attr("method"),url:a,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErrorsForm(e.data),filter_articulations.messageArticulation(e.data,"actualizado","Modificación Exitosa")},error:function(e,t,a){Swal.fire({title:"Error, vuelve a intentarlo",html:"Error: "+t,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}})},ajaxSendFormArticulationClosing:function(e,t,a){$.ajax({type:e.attr("method"),url:a,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),printErrorsForm(e.data),filter_articulations.messageArticulation(e.data,"registro guardado","registro guardado")},error:function(e,t,a){Swal.fire({title:"Error, vuelve a intentarlo",html:"Error: "+t,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}})},destroyArticulation:function(e){Swal.fire({title:"¿Estas seguro de eliminar esta  articulación?",text:"Recuerde que si lo elimina no lo podrá recuperar.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"si, eliminar",cancelButtonText:"No, cancelar"}).then(t=>{if(t.value){let t=$("meta[name='csrf-token']").attr("content");$.ajax({url:`${host_url}/etapa-articulaciones/articulaciones/${e}`,type:"DELETE",data:{id:e,_token:t},success:function(e){e.fail?Swal.fire("Error!","La fase de articulación no se ha eliminado.","warining"):(Swal.fire("Eliminado!","La articulación ha sido eliminado satisfactoriamente.","success"),location.href=e.redirect_url)},error:function(e,t,a){Swal.fire({title:"Error, vuelve a intentarlo",html:"Error: "+t,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}})}})}};$(document).on("submit","form#talents-form",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();const t=$(this),a=new FormData($(this)[0]),o=t.attr("action");filter_articulations.updateTalentsParticipants(t,a,o)}),$(document).on("submit","form#articulation-form-closing",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();const t=$(this),a=new FormData($(this)[0]),o=t.attr("action");filter_articulations.ajaxSendFormArticulationClosing(t,a,o)}),$(document).ready(function(){let e=$("#filter_state_type_art").val();""==e||null==e?typeArticulacion.fillDatatatablesTypeArt(e=null):""!=e||null!=e?typeArticulacion.fillDatatatablesTypeArt(e):$("#type_art_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw()}),$("#filter_type_art").click(function(){let e=$("#filter_state_type_art").val();$("#type_art_data_table").dataTable().fnDestroy(),""==e||null==e?typeArticulacion.fillDatatatablesTypeArt(e=null):""!=e||null!=e?typeArticulacion.fillDatatatablesTypeArt(e):$("#type_art_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw()});let typeArticulacion={fillDatatatablesTypeArt:function(e=null){$("#type_art_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},pageLength:20,lengthChange:!1,processing:!1,serverSide:!1,order:[[1,"desc"]],ajax:{url:host_url+"/tipoarticulaciones",type:"get",data:{filter_state_type_art:e}},columns:[{data:"created_at",name:"created_at"},{data:"name",name:"name"},{data:"description",name:"descripcion"},{data:"state",name:"state"},{data:"show",name:"show",orderable:!1}]})},destroyTypeArticulation:function(e){Swal.fire({title:"¿Estas seguro de eliminar este tipo de articulación?",text:"Recuerde que si lo elimina no lo podrá recuperar.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"si, eliminar",cancelButtonText:"No, cancelar"}).then(t=>{if(t.value){let t=$("meta[name='csrf-token']").attr("content");$.ajax({url:host_url+"/tipoarticulaciones/"+e,type:"DELETE",data:{id:e,_token:t},success:function(e){e.fail?Swal.fire("No se puede eliminar!","El tipo de articulación tiene asociadas tipos de subarticulaciones.","error"):(Swal.fire("Eliminado!","El tipo de articulación ha sido eliminado satisfactoriamente.","success"),location.href=e.redirect_url)},error:function(e,t,a){alert("Error: "+a)}})}else t.dismiss===Swal.DismissReason.cancel&&swalWithBootstrapButtons.fire("Cancelado","El tipo de articulación está a salvo","error")})}};$("#check-all-nodes").click(function(){$(this).prop("checked")?$(".filled-in-node").prop("checked",!0):$(".filled-in-node").prop("checked",!1)}),$("#formTypeArticulation").on("submit",function(e){e.preventDefault();let t=$(this),a=new FormData($(this)[0]),o=t.attr("action");$.ajax({type:t.attr("method"),url:o,data:a,contentType:!1,cache:!1,processData:!1,beforeSend:function(){$(".error").hide()},success:function(e){$(".error").hide(),printErrorsForm(e),e.fail||null!=e.errors||(Swal.fire({title:e.message,type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.redirect_url},1500))},error:function(e){Swal.fire({title:"Error, vuelve a intentarlo",html:e.status+" - "+e.responseJSON.message,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}})}),$(document).ready(function(){let e=$("#filter_node_artuculation_subtype").val(),t=$("#filter_state_artuculation_subtype").val();""!=e&&null!=e||""!=t&&null!=t?""==e&&null==e||""==t&&null==t?$("#articulation_subtype_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():articulationSubtype.fillDatatatablesArticulationSubtype(e,t):articulationSubtype.fillDatatatablesArticulationSubtype(e=null,t=null)}),$("#filter_articulation_subtype").click(function(){let e=$("#filter_node_artuculation_subtype").val(),t=$("#filter_state_artuculation_subtype").val();$("#articulation_subtype_data_table").dataTable().fnDestroy(),""!=e&&null!=e||""!=t&&null!=t?""==e&&null==e||""==t&&null==t?$("#articulation_subtype_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():articulationSubtype.fillDatatatablesArticulationSubtype(e,t):articulationSubtype.fillDatatatablesArticulationSubtype(e=null,t=null)});let articulationSubtype={fillDatatatablesArticulationSubtype:function(e=null,t=null){$("#articulation_subtype_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},pageLength:20,lengthChange:!1,processing:!1,serverSide:!1,order:[[1,"desc"]],ajax:{url:host_url+"/tiposubarticulaciones",type:"get",data:{filter_node_artuculation_subtype:e,filter_state_artuculation_subtype:t}},columns:[{data:"articulation_subtype_created_at",name:"articulation_subtype_created_at"},{data:"articulation_type_name",name:"articulation_type_name"},{data:"articulation_subtype_name",name:"articulation_subtype_name"},{data:"articulation_subtype_description",name:"articulation_subtype_description"},{data:"articulation_subtype_entity",name:"articulation_subtype_entity"},{data:"articulation_subtype_state",name:"articulation_subtype_state"},{data:"show",name:"show",orderable:!1}]})},destroyArticulationSubtype:function(e){Swal.fire({title:"¿Estas seguro de eliminar este tipo de subarticulación?",text:"Recuerde que si lo elimina no lo podrá recuperar.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"si, eliminar",cancelButtonText:"No, cancelar"}).then(t=>{if(t.value){let t=$("meta[name='csrf-token']").attr("content");$.ajax({url:host_url+"/tiposubarticulaciones/"+e,type:"DELETE",data:{id:e,_token:t},success:function(e){e.fail||(Swal.fire("Eliminado!","El tipo de articulación ha sido eliminado satisfactoriamente.","success"),location.href=e.redirect_url)},error:function(e,t,a){alert("Error: "+a)}})}else t.dismiss===Swal.DismissReason.cancel&&swalWithBootstrapButtons.fire("Cancelado","El tipo de articulación está a salvo","error")})}};function isset(e){return null!=e}function sendListNodos(e,t){let a=t;return $.ajax({dataType:"json",type:"get",data:{nodos:a},url:e,error:function(e,t,a){alert("Error: "+a)}})}function consultarSeguimientoDeUnNodoFases(e,t){if(e.preventDefault(),input=$("#txtnodo_select_actual").val(),!validarSelect(input))return Swal.fire("Error!","Debe seleccionar por lo menos un nodo","warning"),!1;sendListNodos(t,input).success(function(e){graficoSeguimientoFases(e,graficosSeguimiento.nodo_fases)})}function consultarSeguimientoEsperado(e,t){if(e.preventDefault(),input=$("#txtnodo_select_list").val(),!validarSelect(input))return Swal.fire("Error!","Debe seleccionar por lo menos un nodo","warning"),!1;sendListNodos(t,input).success(function(e){graficoSeguimientoEsperado(e,graficosSeguimiento.nodo_esperado)})}function generarExcelConTodosLosIndicadores(e,t){let a=$("#txtnodo_id").val(),o=$("#txthoja_nombre").val(),n=$("#txtfecha_inicio_todos").val(),i=$("#txtfecha_fin_todos").val();isset(a)||(a=t),isset(o)||(o="all"),n>i?Swal.fire("Error!","Seleccione un rango de fechas válido","error"):(e.preventDefault(),$.ajax({type:"get",url:`${host_url}/excel/export_proyectos_indicadores`,xhrFields:{responseType:"blob"},data:{nodos:a,hoja:o,fecha_inicio:n,fecha_fin:i,type:"todos"},success:function(e,t,a){let r=a.getResponseHeader("content-disposition"),s=/"([^"]*)"/.exec(r),l=null!=s&&s[1]?s[1]:"Proyecto_"+o+"_finalizados_"+n+"_"+i+".xlsx",c=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=document.createElement("a");d.href=window.URL.createObjectURL(c),d.download=l,document.body.appendChild(d),d.click(),document.body.removeChild(d)},error:function(e,t,a){alert("Error: "+a)}}))}function generarExcelConTodosLosIndicadoresActuales(e,t){let a=$("#txtnodo_id_actuales").val(),o=$("#txthoja_nombre_actuales").val();isset(a)||(a=t),isset(o)||(o="all"),e.preventDefault(),$.ajax({type:"get",url:`${host_url}/excel/export_proyectos_indicadores`,xhrFields:{responseType:"blob"},data:{nodos:a,hoja:o,fecha_inicio:null,fecha_fin:null,type:"activos"},success:function(e,t,a){let n=a.getResponseHeader("content-disposition"),i=/"([^"]*)"/.exec(n),r=null!=i&&i[1]?i[1]:"Proyecto_"+o+"_activos_.xlsx",s=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=document.createElement("a");l.href=window.URL.createObjectURL(s),l.download=r,document.body.appendChild(l),l.click(),document.body.removeChild(l)},error:function(e,t,a){alert("Error: "+a)}})}function generarExcelConTodosLosIndicadoresFinalizados(e,t){let a=$("#txtnodo_id_finalizados").val(),o=$("#txthoja_nombre_finalizados").val(),n=$("#txtfecha_inicio_cerrados").val(),i=$("#txtfecha_fin_cerrados").val();isset(a)||(a=t),isset(o)||(o="all"),n>i?Swal.fire("Error!","Seleccione un rango de fechas válido","error"):(e.preventDefault(),$.ajax({type:"get",url:`${host_url}/excel/export_proyectos_indicadores`,xhrFields:{responseType:"blob"},data:{nodos:a,hoja:o,fecha_inicio:n,fecha_fin:i,type:"finalizados"},success:function(e,t,a){let r=a.getResponseHeader("content-disposition"),s=/"([^"]*)"/.exec(r),l=null!=s&&s[1]?s[1]:"Proyecto_"+o+"_finalizados_"+n+"_"+i+".xlsx",c=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=document.createElement("a");d.href=window.URL.createObjectURL(c),d.download=l,document.body.appendChild(d),d.click(),document.body.removeChild(d)},error:function(e,t,a){alert("Error: "+a)}}))}function generarExcelConTodosLosIndicadoresInscritos(e,t){let a=$("#txtnodo_id_inscritos").val(),o=$("#txthoja_nombre_inscritos").val(),n=$("#txtfecha_inicio_inscritos").val(),i=$("#txtfecha_fin_inscritos").val();isset(a)||(a=t),isset(o)||(o="all"),n>i?Swal.fire("Error!","Seleccione un rango de fechas válido","error"):(e.preventDefault(),$.ajax({type:"get",url:`${host_url}/excel/export_proyectos_indicadores`,xhrFields:{responseType:"blob"},data:{nodos:a,hoja:o,fecha_inicio:n,fecha_fin:i,type:"inscritos"},success:function(e,t,a){let r=a.getResponseHeader("content-disposition"),s=/"([^"]*)"/.exec(r),l=null!=s&&s[1]?s[1]:"Proyecto_"+o+"_inscritos_"+n+"_"+i+".xlsx",c=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=document.createElement("a");d.href=window.URL.createObjectURL(c),d.download=l,document.body.appendChild(d),d.click(),document.body.removeChild(d)},error:function(e,t,a){alert("Error: "+a)}}))}function selectAll(e,t){checkboxes=document.getElementsByClassName(t);for(var a=0,o=checkboxes.length;a<o;a++)checkboxes[a].checked=e.checked}function downloadMetas(e){if(e.preventDefault(),input=$("#txtnodo_metas_id").val(),!validarSelect(input))return Swal.fire("Error!","Debe seleccionar por lo menos un nodo","warning"),!1;document.frmDescargarMetas.submit()}function validarSelect(e){return null!=e}function verificarChecks(e,t){clase=e.classList[0],checkboxes=document.getElementsByClassName(clase),t=document.getElementById(t),state=!1;for(var a=0,o=checkboxes.length;a<o;a++)if(checkboxes[a].checked){state=!0;break}for(a=0,o=checkboxes.length;a<o;a++)if(!checkboxes[a].checked){state=!1;break}t.checked=state}function validarChecks(e){checkboxes=document.getElementsByClassName(e);for(var t=0,a=checkboxes.length;t<a;t++)if(0==checkboxes[t].checked)return!1;return!0}function downloadIdeasIndicadores(e){if(e.preventDefault(),input=$("#txtnodo_ideas_download").val(),!validarSelect(input))return Swal.fire("Error!","Debe seleccionar por lo menos un nodo","warning"),!1;document.frmDescargarIdeas.submit()}function consultarSeguimientoArticulacionDeUnNodoFases(e,t){if(e.preventDefault(),input=$("#nodo_articulacion_actual").val(),!validarSelect(input))return Swal.fire("Error!","Debe seleccionar por lo menos un nodo","warning"),!1;sendListNodos(t,input).success(function(e){console.log(e),graficoSeguimientoArticulacionesFases(e,graficosArticulacionSeguimiento.nodo_fases)})}function generarExcelConTodosLosIndicadoresArticulaciones(){let e=$("#txtnodo_articulacion_todos").val(),t=$("#txthoja_articulacion_todos").val(),a=$("#txtfecha_inicio_articulacion_todos").val(),o=$("#txtfecha_fin_articulacion_todos").val();isset(e)||(e=0),isset(t)||(t="all"),a>o?Swal.fire("Error!","Seleccione fechas válidas","error"):location.href=`/excel/export/${e}/articulaciones/${a}/${o}/${t}`}function generarExcelIndicadoresArticulacionesInscritas(){let e=$("#txtnodo_articulaciones_inscritas").val(),t=$("#txthoja_articulaciones_inscritas").val(),a=$("#txtfecha_inicio_articulaciones_inscritas").val(),o=$("#txtfecha_fin_articulaciones_inscritas").val();isset(e)||(e=0),isset(t)||(t="all"),a>o?Swal.fire("Error!","Seleccione un rango de fechas válido","error"):location.href=`/excel/export_articulaciones_inscritos/${e}/${a}/${o}/${t}`}function generarExcelIndicadoresArticulacionesActuales(){let e=$("#txtnodo_articulaciones_activas").val(),t=$("#txthoja_articulaciones_activas").val();isset(e)||(e=0),isset(t)||(t="all"),location.href=`/excel/export_articulaciones_actuales/${e}/${t}`}function generarExcelIndicadoresArticulacionesFinalizadas(){let e=$("#txtnodo_articulaciones_finalizadas").val(),t=$("#txthoja_articulaciones_finalizadas").val(),a=$("#txtfecha_inicio_finalizadas").val(),o=$("#txtfecha_fin_finalizadas").val();isset(e)||(e=0),isset(t)||(t="all"),a>o?Swal.fire("Error!","Seleccione fechas válidas","error"):location.href=`/excel/export_articulaciones_finalizadas/${e}/${a}/${o}/${t}`}$("#formArticualtionSubtype").on("submit",function(e){e.preventDefault();let t=$(this),a=new FormData($(this)[0]),o=t.attr("action");$.ajax({type:t.attr("method"),url:o,data:a,contentType:!1,cache:!1,processData:!1,beforeSend:function(){$(".error").hide()},success:function(e){$(".error").hide(),$('button[type="submit"]').removeAttr("disabled"),printErrorsForm(e),e.fail||null!=e.errors||(Swal.fire({title:e.message,type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.redirect_url},1500))},error:function(e){Swal.fire({title:" Registro erróneo, vuelve a intentarlo",html:e.status+" - "+e.responseJSON.message,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}})}),$("#txtcontenido").summernote({lang:"es-ES",height:300}),$("#txtfecha_inicio").bootstrapMaterialDatePicker({time:!1,date:!0,shortTime:!0,format:"YYYY-MM-DD",language:"es",weekStart:1,cancelText:"Cancelar",okText:"Guardar"}),$("#txtfecha_fin").bootstrapMaterialDatePicker({time:!1,date:!0,shortTime:!0,format:"YYYY-MM-DD",language:"es",weekStart:1,cancelText:"Cancelar",okText:"Guardar"}),$("#formSupport").on("submit",function(e){e.preventDefault();let t=$(this),a=new FormData($(this)[0]),o=t.attr("action");$.ajax({type:t.attr("method"),url:o,data:a,contentType:!1,cache:!1,processData:!1,beforeSend:function(){$(".error").hide(),$("#formSupport").css("opacity",".5")},success:function(e){$(".error").hide(),printErrorsForm(e),e.fail||null!=e.errors||(Swal.fire({title:"Registro Exitoso",type:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),setTimeout(function(){window.location.href=e.redirect_url},1500))},error:function(e){Swal.fire({title:" Registro erróneo, vuelve a intentarlo",html:e.status+" - "+e.responseJSON.message,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}})}),$(document).ready(function(){let e=$("#filter_year_support").val(),t=$("#filter_state_support").val(),a=$("#filter_request_support").val();""!=e&&null!=e||""!=t&&null!=t||""!=a&&null!=a?""==e&&null==e||""==t&&null==t||""==a&&null==a?$("#support_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():support.fill_datatatables_actions_support(e,t,a):support.fill_datatatables_actions_support(e=null,t=null,a=null)}),$("#filter_support").click(function(){let e=$("#filter_year_support").val(),t=$("#filter_state_support").val(),a=$("#filter_request_support").val();$("#support_data_table").dataTable().fnDestroy(),""!=e&&null!=e||""!=t&&null!=t||""!=a&&null!=a?""==e&&null==e||""==t&&null==t||""==a&&null==a?$("#support_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},lengthChange:!1}).clear().draw():support.fill_datatatables_actions_support(e,t,a):support.fill_datatatables_actions_support(e=null,t=null,a=null)});let support={fill_datatatables_actions_support:function(e=null,t=null,a=null){$("#support_data_table").DataTable({language:{url:"//cdn.datatables.net/plug-ins/1.10.19/i18n/Spanish.json"},pageLength:20,lengthChange:!1,processing:!0,serverSide:!0,order:[[1,"desc"]],ajax:{url:host_url+"/support",type:"get",data:{filter_year_support:e,filter_state_support:t,filter_request_support:a}},columns:[{data:"ticket",name:"ticket"},{data:"created_at",name:"created_at"},{data:"name",name:"name"},{data:"email",name:"email"},{data:"subject",name:"subject"},{data:"status",name:"status"},{data:"show",name:"show",orderable:!1}]})},destroySupport:function(e){Swal.fire({title:"¿Estas seguro de eliminar este caso?",text:"Recuerde que si lo elimina no lo podrá recuperar.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"si, eliminar caso",cancelButtonText:"No, cancelar"}).then(t=>{if(t.value){let t=$("meta[name='csrf-token']").attr("content");$.ajax({url:host_url+"/support/"+e,type:"DELETE",data:{id:e,_token:t},success:function(e){e.fail||(Swal.fire("Eliminado!","El caso ha sido eliminado satisfactoriamente.","success"),location.href=e.redirect_url)},error:function(e,t,a){alert("Error: "+a)}})}else t.dismiss===Swal.DismissReason.cancel&&swalWithBootstrapButtons.fire("Cancelado","El caso está a salvo","error")})},updateSupport:function(e,t){Swal.fire({title:"¿Estas seguro de cambiar a "+t+" este caso?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"si, cambiar caso",cancelButtonText:"No, cancelar"}).then(a=>{if(a.value){let a=$("meta[name='csrf-token']").attr("content");$.ajax({url:host_url+"/support/"+e,type:"PUT",data:{id:e,_token:a,status:t},success:function(e){e.fail||(Swal.fire("Actualizado!","El caso ha sido eliminado satisfactoriamente.","success"),location.href=e.redirect_url)},error:function(e,t,a){alert("Error: "+a)}})}else a.dismiss===Swal.DismissReason.cancel&&swalWithBootstrapButtons.fire("Cancelado","El caso está a salvo","error")})}};
