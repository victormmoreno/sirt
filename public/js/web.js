$(document).on("submit","form#formValidateCredentials",function(o){$('button[type="submit"]').attr("disabled","disabled"),o.preventDefault();var e=$(this),t=new FormData($(this)[0]),n=e.attr("action");$.ajax({type:e.attr("method"),url:n,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(o){if($('button[type="submit"]').prop("disabled",!1),$(".error").hide(),o.fail){for(control in o.errors)$("#"+control+"-error").html(o.errors[control]),$("#"+control+"-error").show();verificationUser.printErroresFormulario(o)}else o.data.user?Swal.fire({title:"Atención!",html:"Este usuario ya existe. Por favor ingrese utilizando las credenciales de usuario. Recuerde que si no recuerda su contraseña también la puede restablecer.",type:"error",position:"top",toast:!0,icon:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok",timer:1e4,timerProgressBar:!0}):($("#modalvalidationuser").closeModal(),$("#txtdocumento").val(t.get("document")),$("label[for='txtdocumento']").addClass("active"),$("#txttipo_documento option[value='"+t.get("document_type")+"']").addClass("active selected",!0),$("#txttipo_documento").material_select())}})});var verificationUser={printErroresFormulario:function(o){if("error_form"==o.state){let e="";for(control in o.errors)e+=" </br><b> - "+o.errors[control]+" </b> ",$("#"+control+"-error").html(o.errors[control]),$("#"+control+"-error").show();Swal.fire({title:"Advertencia!",html:"Estas ingresando mal los datos."+e,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}}},user={checkedTypeUser:function(){let o=$("input:radio[name=txttipousuario]:checked").val();"talento"==o?($(".talento").show(),$(".contratista").hide()):"contratista"==o?($(".contratista").show(),$(".talento").hide()):($(".talento").show(),$(".contratista").hide())},getCiudadExpedicion:function(){let o;o=$("#txtdepartamentoexpedicion").val(),$.ajax({dataType:"json",type:"get",url:host_url+"/usuario/getciudad/"+o}).done(function(o){$("#txtciudadexpedicion").empty(),$.each(o.ciudades,function(o,e){$("#txtciudadexpedicion").append('<option  value="'+e.id+'">'+e.nombre+"</option>")}),$("#txtciudadexpedicion").material_select()})},getOtraEsp:function(o){let e=$(o).val();$("#txteps option:selected").text();42==e?$(".otraeps").removeAttr("style"):$(".otraeps").attr("style","display:none")},getCiudad:function(){let o;o=$("#txtdepartamento").val(),$.ajax({dataType:"json",type:"get",url:host_url+"/usuario/getciudad/"+o}).done(function(o){$("#txtciudad").empty(),$("#txtciudad").append('<option value="">Seleccione la Ciudad</option>'),$.each(o.ciudades,function(o,e){$("#txtciudad").append('<option  value="'+e.id+'">'+e.nombre+"</option>")}),$("#txtciudad").material_select()})},getGradoDiscapacidad(o){1==$(o).val()?$(".gradodiscapacidad").removeAttr("style"):$(".gradodiscapacidad").attr("style","display:none")},getOtraOcupacion:function(o){$("#otraocupacion").hide();$(o).val();let e=$("#txtocupaciones option:selected").text().match(/[A-Z][a-z]+/g);$("#otraocupacion").hide(),null!=e&&e.includes("Otra")&&$("#otraocupacion").show()}},tipoTalento={getSelectTipoTalento:function(o){let e=$(o).val();$("#txttipotalento option:selected").text();1==e||2==e?tipoTalento.showAprendizSena():3==e?tipoTalento.showEgresadoSena():4==e?tipoTalento.showInstructorSena():5==e?tipoTalento.showFuncionarioSena():6==e?tipoTalento.showPropietarioEmpresa():7==e?tipoTalento.showEmprendedor():8==e?tipoTalento.showUniversitario():9==e?tipoTalento.showFuncionarioEmpresa():tipoTalento.ShowSelectTipoTalento()},showAprendizSena:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideEgresadoSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hidePropietarioEmpresa(),tipoTalento.hideEmprendedor(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),$(".aprendizSena").css("display","block"),$(".aprendizSena").show()},showEgresadoSena:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hidePropietarioEmpresa(),tipoTalento.hideEmprendedor(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),$(".egresadoSena").show()},showInstructorSena:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hidePropietarioEmpresa(),tipoTalento.hideEmprendedor(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),$(".instructorSena").css("display","block")},showFuncionarioSena:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hidePropietarioEmpresa(),tipoTalento.hideEmprendedor(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),$(".funcionarioSena").css("display","block")},showPropietarioEmpresa:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),$(".otherUser").empty(),$(".otherUser").append('<div class="valign-wrapper" >\n            <h5> Seleccionaste Propietario empresa</h5>\n        </div>')},showEmprendedor:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),$(".otherUser").empty(),$(".otherUser").append('<div class="valign-wrapper" >\n            <h5> Seleccionaste Emprendedor</h5>\n        </div>')},showUniversitario:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hidePropietarioEmpresa(),tipoTalento.hideEmprendedor(),tipoTalento.hideFuncionarioEmpresa(),$(".universitario").css("display","block")},showFuncionarioEmpresa:function(){tipoTalento.hideSelectTipoTalento(),tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideInstructorSena(),tipoTalento.hideFuncionarioSena(),tipoTalento.hidePropietarioEmpresa(),tipoTalento.hideUniversitario(),tipoTalento.hideEmprendedor(),$(".funcionarioEmpresa").css("display","block")},hideAprendizSena:function(){$(".aprendizSena").hide()},hideEgresadoSena:function(){$(".egresadoSena").hide()},hideInstructorSena:function(){$(".instructorSena").css("display","none")},hideFuncionarioSena:function(){$(".funcionarioSena").css("display","none")},hideSelectTipoTalento:function(){$(".selecttipotalento").css("display","none")},hidePropietarioEmpresa:function(){$(".otherUser").css("display","none")},hideUniversitario:function(){$(".universitario").css("display","none")},hideFuncionarioEmpresa:function(){$(".funcionarioEmpresa").css("display","none")},hideEmprendedor:function(){$(".otherUser").css("display","none")},ShowSelectTipoTalento:function(){tipoTalento.hideAprendizSena(),tipoTalento.hideEgresadoSena(),tipoTalento.hideEmprendedor(),tipoTalento.hideUniversitario(),tipoTalento.hideFuncionarioEmpresa(),tipoTalento.hideFuncionarioSena(),tipoTalento.hideInstructorSena(),tipoTalento.hidePropietarioEmpresa(),$(".selecttipotalento").css("display","block")},getCentroFormacionAprendiz:function(){let o=$("#txtregional_aprendiz").val();$.ajax({dataType:"json",type:"get",url:host_url+"/centro-formacion/getcentrosregional/"+o}).done(function(o){$("#txtcentroformacion_aprendiz").empty(),$("#txtcentroformacion_aprendiz").append('<option value="">Seleccione el centro de formación</option>'),$.each(o.centros,function(o,e){$("#txtcentroformacion_aprendiz").append('<option  value="'+o+'">'+e+"</option>"),$("#txtcentroformacion_aprendiz").material_select()})})},getCentroFormacionEgresadoSena:function(){let o=$("#txtregional_egresado").val();$.ajax({dataType:"json",type:"get",url:host_url+"/centro-formacion/getcentrosregional/"+o}).done(function(o){$("#txtcentroformacion_egresado").empty(),$("#txtcentroformacion_egresado").append('<option value="">Seleccione el centro de formación</option>'),$.each(o.centros,function(o,e){$("#txtcentroformacion_egresado").append('<option  value="'+o+'">'+e+"</option>"),$("#txtcentroformacion_egresado").material_select()})})},getCentroFormacionFuncionarioSena:function(){let o=$("#txtregional_funcionarioSena").val();$.ajax({dataType:"json",type:"get",url:host_url+"/centro-formacion/getcentrosregional/"+o}).done(function(o){$("#txtcentroformacion_funcionarioSena").empty(),$("#txtcentroformacion_funcionarioSena").append('<option value="">Seleccione el centro de formación</option>'),$.each(o.centros,function(o,e){$("#txtcentroformacion_funcionarioSena").append('<option  value="'+o+'">'+e+"</option>"),$("#txtcentroformacion_funcionarioSena").material_select()})})},getCentroFormacionInstructorSena:function(){let o=$("#txtregional_instructorSena").val();$.ajax({dataType:"json",type:"get",url:host_url+"/centro-formacion/getcentrosregional/"+o}).done(function(o){$("#txtcentroformacion_instructorSena").empty(),$("#txtcentroformacion_instructorSena").append('<option value="">Seleccione el centro de formación</option>'),$.each(o.centros,function(o,e){$("#txtcentroformacion_instructorSena").append('<option  value="'+o+'">'+e+"</option>"),$("#txtcentroformacion_instructorSena").material_select()})})}};$('button[type="reset"]').click(function(){return this.form.reset(),$(".talento").show(),$(".contratista").hide(),$("#document").empty(),$("#txtocupaciones").val(),$("#document_type").val(),$("#modalvalidationuser").openModal({opacity:.7,in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!1,starting_top:"10%",ending_top:"10%"}),!1}),$('button[type="reset"]').click(function(){return this.form.reset(),$(".talento").show(),$(".contratista").hide(),$("#document").empty(),$("#txtocupaciones").val(),$("#document_type").val(),$("#modalvalidationuser").openModal({opacity:.7,in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!1,starting_top:"10%",ending_top:"10%"}),$('small[class="error red-text"]').empty(),!1}),$(document).on("submit","form#formRegisterUser",function(o){$('button[type="submit"]').attr("disabled","disabled"),o.preventDefault();var e=$(this),t=new FormData($(this)[0]),n=e.attr("action");$.ajax({type:e.attr("method"),url:n,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(o){if($('button[type="submit"]').prop("disabled",!1),$(".error").hide(),o.fail){for(control in o.errors)$("#"+control+"-error").html(o.errors[control]),$("#"+control+"-error").show();createUser.printErroresFormulario(o)}"error"==o.state&&0==o.url&&Swal.fire({title:"Registro Erróneo, por favor inténtalo de nuevo",type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"success"==o.state&&0!=o.url&&Swal.fire({title:"Registro Exitoso",icon:"success",type:"success",html:o.message,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok",backdrop:!0,allowOutsideClick:!1,footer:'<p class="red-text">Hemos enviado un correo electrónico  a '+o.user.email+" con las credenciales de ingreso a la plataforma.</p>"}).then(e=>{e.isConfirmed&&setTimeout(function(){window.location.href=o.url},50),setTimeout(function(){window.location.href=o.url},50)})}})});var createUser={printErroresFormulario:function(o){if("error_form"==o.state){let e="";for(control in o.errors)e+=" </br><b> - "+o.errors[control]+" </b> ",$("#"+control+"-error").html(o.errors[control]),$("#"+control+"-error").show();Swal.fire({title:"Advertencia!",html:"Estas ingresando mal los datos."+e,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}}};
