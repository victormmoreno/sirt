$(document).on("submit","form#formValidateCredentials",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();let t=$(this),o=new FormData($(this)[0]),i=t.attr("action");$.ajax({type:t.attr("method"),url:i,data:o,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){if($('button[type="submit"]').prop("disabled",!1),$(".error").hide(),e.fail){for(control in e.errors)$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();printErroresFormulario(e)}else e.data.user?Swal.fire({title:"Atención!",html:"Este usuario ya existe. Por favor ingrese utilizando las credenciales de usuario. Recuerde que si no recuerda su contraseña también la puede restablecer.",type:"error",position:"top",toast:!0,type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok",timer:1e4,timerProgressBar:!0}):($("#modalvalidationuser").closeModal(),$("#documento").val(o.get("document")),$("label[for='documento']").addClass("active"),$("#tipo_documento option[value='"+o.get("document_type")+"']").attr("selected",!0),$("#tipo_documento").val(o.get("document_type")),$("#tipo_documento option[value='"+o.get("document_type")+"']").addClass("active selected",!0),$("#tipo_documento").material_select())}})});const user={getCiudadExpedicion:function(){let e=$("#departamentoexpedicion").val();$.ajax({dataType:"json",type:"get",url:`${host_url}/help/getciudades/${e}`}).done(function(e){$("#ciudadexpedicion").empty(),$.each(e.ciudades,function(e,t){$("#ciudadexpedicion").append('<option  value="'+t.id+'">'+t.nombre+"</option>")}),$("#ciudadexpedicion").material_select()})},getOtraEsp:function(e){42==$(e).val()?$(".otraeps").removeAttr("style"):$(".otraeps").attr("style","display:none")},getCiudad:function(){let e;e=$("#departamento").val(),$.ajax({dataType:"json",type:"get",url:`${host_url}/help/getciudades/${e}`}).done(function(e){$("#ciudad").empty(),$("#ciudad").append('<option value="">Seleccione la Ciudad</option>'),$.each(e.ciudades,function(e,t){$("#ciudad").append('<option  value="'+t.id+'">'+t.nombre+"</option>")}),$("#ciudad").material_select()})},getGradoDiscapacidad(e){1==$(e).val()?$(".gradodiscapacidad").removeAttr("style"):$(".gradodiscapacidad").attr("style","display:none")},getOtraOcupacion:function(e){$("#otraocupacion").hide();let t=$("#ocupaciones option:selected").text().match(/[A-Z][a-z]+/g);$("#otraocupacion").hide(),null!=t&&t.includes("Otra")&&$("#otraocupacion").show()}};function sendFormSurvey(e,t,o){$.ajax({type:e.attr("method"),url:o,data:t,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){$('button[type="submit"]').removeAttr("disabled"),$(".error").hide(),"error_form"==e.state?printErroresFormulario(e):(mensajesResponderEncuesta(e),e.state&&setTimeout(function(){window.location.replace(e.url)},1e3))},error:function(e,t,o){alert("Error: "+o)}})}function mensajesResponderEncuesta(e){Swal.fire({title:e.title,text:e.msj,type:e.type,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"})}function showInput_Infocenter(){$("#conoce_infocenter").is(":checked")?divInfocenter.show():divInfocenter.hide()}function showInput_Dinamizador(){$("#conoce_dinamizador").is(":checked")?divDinamizador.show():divDinamizador.hide()}function showInput_Articulador(){$("#conoce_articulador").is(":checked")?divArticulador.show():divArticulador.hide()}function showInput_CompartirCredenciales(){$("#comparte_credenciales").is(":checked")?divCredenciales.show():divCredenciales.hide()}function showInput_AlcanzaObjetivos(){$("#alcanza_objetivos").is(":checked")?divAlcanzaObjetivo.hide():divAlcanzaObjetivo.show()}function showInput_OtrosServicios(){$("#usa_otros_servicios").is(":checked")?divOtrosServicios.show():divOtrosServicios.hide()}$('button[type="reset"]').click(function(){return this.form.reset(),$("#modalvalidationuser").openModal({opacity:.7,in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!1,starting_top:"10%",ending_top:"10%"}),$('small[class="error red-text"]').empty(),!1}),$(document).on("submit","form#formRegisterUser",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();let t=$(this),o=new FormData($(this)[0]),i=t.attr("action");$.ajax({type:t.attr("method"),url:i,data:o,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){if($('button[type="submit"]').prop("disabled",!1),$(".error").hide(),e.fail){for(control in e.errors)$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();printErroresFormulario(e)}"error"==e.state&&0==e.url&&Swal.fire({title:"Registro Erróneo, por favor inténtalo de nuevo",type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"success"==e.state&&0!=e.url&&Swal.fire({title:"Registro Exitoso",type:"success",type:"success",html:e.message,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok",backdrop:!0,allowOutsideClick:!1,footer:`<p class="red-text">Hemos enviado un correo electrónico a ${e.user.email} con las credenciales de ingreso al sistema.</p>`}).then(t=>{t.isConfirmed&&setTimeout(function(){window.location.href=e.url},50),setTimeout(function(){window.location.href=e.url},50)})}})}),$(document).ready(function(){divForm=$("#form_content"),divInfocenter=$("#infocenter_content"),divDinamizador=$("#dinamizador_content"),divArticulador=$("#articulador_content"),divArticuladorAcompanamiento=$("#articulador_acompanamiento_content"),divCredenciales=$("#credenciales_content"),divAlcanzaObjetivo=$("#alcanza_objetivo_content"),divOtrosServicios=$("#otros_servicios_content"),divForm.hide(),divInfocenter.hide(),divDinamizador.hide(),divArticulador.hide(),divArticuladorAcompanamiento.hide(),divCredenciales.hide(),divAlcanzaObjetivo.show(),divOtrosServicios.hide()}),$(document).on("submit","form#formSaveSurvey",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();var t=$(this),o=new FormData($(this)[0]),i=t.attr("action");sendFormSurvey(t,o,i)});
