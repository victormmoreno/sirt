$(document).on("submit","form#formValidateCredentials",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();let t=$(this),o=new FormData($(this)[0]),a=t.attr("action");$.ajax({type:t.attr("method"),url:a,data:o,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){if($('button[type="submit"]').prop("disabled",!1),$(".error").hide(),e.fail){for(control in e.errors)$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();printErroresFormulario(e)}else e.data.user?Swal.fire({title:"Atención!",html:"Este usuario ya existe. Por favor ingrese utilizando las credenciales de usuario. Recuerde que si no recuerda su contraseña también la puede restablecer.",type:"error",position:"top",toast:!0,icon:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok",timer:1e4,timerProgressBar:!0}):($("#modalvalidationuser").closeModal(),$("#documento").val(o.get("document")),$("label[for='documento']").addClass("active"),$("#tipo_documento option[value='"+o.get("document_type")+"']").attr("selected",!0),$("#tipo_documento").val(o.get("document_type")),$("#tipo_documento option[value='"+o.get("document_type")+"']").addClass("active selected",!0),$("#tipo_documento").material_select())}})});const user={getCiudadExpedicion:function(){let e=$("#departamentoexpedicion").val();$.ajax({dataType:"json",type:"get",url:`${host_url}/help/getciudades/${e}`}).done(function(e){$("#ciudadexpedicion").empty(),$.each(e.ciudades,function(e,t){$("#ciudadexpedicion").append('<option  value="'+t.id+'">'+t.nombre+"</option>")}),$("#ciudadexpedicion").material_select()})},getOtraEsp:function(e){42==$(e).val()?$(".otraeps").removeAttr("style"):$(".otraeps").attr("style","display:none")},getCiudad:function(){let e;e=$("#departamento").val(),$.ajax({dataType:"json",type:"get",url:`${host_url}/help/getciudades/${e}`}).done(function(e){$("#ciudad").empty(),$("#ciudad").append('<option value="">Seleccione la Ciudad</option>'),$.each(e.ciudades,function(e,t){$("#ciudad").append('<option  value="'+t.id+'">'+t.nombre+"</option>")}),$("#ciudad").material_select()})},getGradoDiscapacidad(e){1==$(e).val()?$(".gradodiscapacidad").removeAttr("style"):$(".gradodiscapacidad").attr("style","display:none")},getOtraOcupacion:function(e){$("#otraocupacion").hide();let t=$("#ocupaciones option:selected").text().match(/[A-Z][a-z]+/g);$("#otraocupacion").hide(),null!=t&&t.includes("Otra")&&$("#otraocupacion").show()}};$('button[type="reset"]').click(function(){return this.form.reset(),$("#modalvalidationuser").openModal({opacity:.7,in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!1,starting_top:"10%",ending_top:"10%"}),$('small[class="error red-text"]').empty(),!1}),$(document).on("submit","form#formRegisterUser",function(e){$('button[type="submit"]').attr("disabled","disabled"),e.preventDefault();let t=$(this),o=new FormData($(this)[0]),a=t.attr("action");$.ajax({type:t.attr("method"),url:a,data:o,cache:!1,contentType:!1,dataType:"json",processData:!1,success:function(e){if($('button[type="submit"]').prop("disabled",!1),$(".error").hide(),e.fail){for(control in e.errors)$("#"+control+"-error").html(e.errors[control]),$("#"+control+"-error").show();printErroresFormulario(e)}"error"==e.state&&0==e.url&&Swal.fire({title:"Registro Erróneo, por favor inténtalo de nuevo",type:"error",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}),"success"==e.state&&0!=e.url&&Swal.fire({title:"Registro Exitoso",icon:"success",type:"success",html:e.message,showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok",backdrop:!0,allowOutsideClick:!1,footer:`<p class="red-text">Hemos enviado un correo electrónico a ${e.user.email} con las credenciales de ingreso al sistema.</p>`}).then(t=>{t.isConfirmed&&setTimeout(function(){window.location.href=e.url},50),setTimeout(function(){window.location.href=e.url},50)})}})});
